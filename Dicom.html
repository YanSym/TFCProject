<!DOCTYPE html>
<!-- saved from url=(0043)http://localhost:8888/notebooks/Dicom.ipynb -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    

    <title>Dicom</title>
    <link rel="shortcut icon" type="image/x-icon" href="http://localhost:8888/static/base/images/favicon.ico?v=97c6417ed01bdc0ae3ef32ae4894fd03">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="./Dicom_files/jquery-ui.min.css" type="text/css">
    <link rel="stylesheet" href="./Dicom_files/jquery.typeahead.min.css" type="text/css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    


<script type="text/javascript" src="./Dicom_files/MathJax.js" charset="utf-8"></script>

<script type="text/javascript">
// MathJax disabled, set as null to distingish from *missing* MathJax,
// where it will be undefined, and should prompt a dialog later.
window.mathjax_url = "/static/components/MathJax/MathJax.js";
</script>

<link rel="stylesheet" href="./Dicom_files/bootstrap-tour.min.css" type="text/css">
<link rel="stylesheet" href="./Dicom_files/codemirror.css">


    <link rel="stylesheet" href="./Dicom_files/style.min.css" type="text/css">
    

<link rel="stylesheet" href="./Dicom_files/override.css" type="text/css">
<link rel="stylesheet" href="http://localhost:8888/notebooks/Dicom.ipynb" id="kernel-css" type="text/css">


    <link rel="stylesheet" href="./Dicom_files/custom.css" type="text/css">
    <script src="./Dicom_files/promise.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="./Dicom_files/index.js" type="text/javascript"></script>
    <script src="./Dicom_files/index(1).js" type="text/javascript"></script>
    <script src="./Dicom_files/index(2).js" type="text/javascript"></script>
    <script src="./Dicom_files/require.js" type="text/javascript" charset="utf-8"></script>
    <script>
      require.config({
          
          urlArgs: "v=20170504191621",
          
          baseUrl: '/static/',
          paths: {
            'auth/js/main': 'auth/js/main.min',
            custom : '/custom',
            nbextensions : '/nbextensions',
            kernelspecs : '/kernelspecs',
            underscore : 'components/underscore/underscore-min',
            backbone : 'components/backbone/backbone-min',
            jquery: 'components/jquery/jquery.min',
            bootstrap: 'components/bootstrap/js/bootstrap.min',
            bootstraptour: 'components/bootstrap-tour/build/js/bootstrap-tour.min',
            'jquery-ui': 'components/jquery-ui/ui/minified/jquery-ui.min',
            moment: 'components/moment/moment',
            codemirror: 'components/codemirror',
            termjs: 'components/xterm.js/dist/xterm',
            typeahead: 'components/jquery-typeahead/dist/jquery.typeahead.min',
          },
          map: { // for backward compatibility
              "*": {
                  "jqueryui": "jquery-ui",
              }
          },
          shim: {
            typeahead: {
              deps: ["jquery"],
              exports: "typeahead"
            },
            underscore: {
              exports: '_'
            },
            backbone: {
              deps: ["underscore", "jquery"],
              exports: "Backbone"
            },
            bootstrap: {
              deps: ["jquery"],
              exports: "bootstrap"
            },
            bootstraptour: {
              deps: ["bootstrap"],
              exports: "Tour"
            },
            "jquery-ui": {
              deps: ["jquery"],
              exports: "$"
            }
          },
          waitSeconds: 30,
      });

      require.config({
          map: {
              '*':{
                'contents': 'services/contents',
              }
          }
      });

      // error-catching custom.js shim.
      define("custom", function (require, exports, module) {
          try {
              var custom = require('custom/custom');
              console.debug('loaded custom.js');
              return custom;
          } catch (e) {
              console.error("error loading custom.js", e);
              return {};
          }
      })
    </script>

    
    

<script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="services/contents" src="./Dicom_files/contents.js"></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck.RTL {right: .7em; left: auto}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="custom/custom" src="./Dicom_files/custom.js"></script><script type="text/javascript" charset="utf-8" async="" data-requirecontext="_" data-requiremodule="nbextensions/widgets/notebook/js/extension" src="./Dicom_files/extension.js"></script><style type="text/css">div.MathJax_MathML {text-align: center; margin: .75em 0px; display: block!important}
.MathJax_MathML {font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
span.MathJax_MathML {display: inline!important}
.MathJax_mmlExBox {display: block!important; overflow: hidden; height: 1px; width: 60ex; min-height: 0; max-height: none; padding: 0; border: 0; margin: 0}
[class="MJX-tex-oldstyle"] {font-family: MathJax_Caligraphic, MathJax_Caligraphic-WEB}
[class="MJX-tex-oldstyle-bold"] {font-family: MathJax_Caligraphic, MathJax_Caligraphic-WEB; font-weight: bold}
[class="MJX-tex-caligraphic"] {font-family: MathJax_Caligraphic, MathJax_Caligraphic-WEB}
[class="MJX-tex-caligraphic-bold"] {font-family: MathJax_Caligraphic, MathJax_Caligraphic-WEB; font-weight: bold}
@font-face /*1*/ {font-family: MathJax_Caligraphic-WEB; src: url('http://localhost:8888/static/components/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Regular.otf')}
@font-face /*2*/ {font-family: MathJax_Caligraphic-WEB; font-weight: bold; src: url('http://localhost:8888/static/components/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Caligraphic-Bold.otf')}
[mathvariant="double-struck"] {font-family: MathJax_AMS, MathJax_AMS-WEB}
[mathvariant="script"] {font-family: MathJax_Script, MathJax_Script-WEB}
[mathvariant="fraktur"] {font-family: MathJax_Fraktur, MathJax_Fraktur-WEB}
[mathvariant="bold-script"] {font-family: MathJax_Script, MathJax_Caligraphic-WEB; font-weight: bold}
[mathvariant="bold-fraktur"] {font-family: MathJax_Fraktur, MathJax_Fraktur-WEB; font-weight: bold}
[mathvariant="monospace"] {font-family: monospace}
[mathvariant="sans-serif"] {font-family: sans-serif}
[mathvariant="bold-sans-serif"] {font-family: sans-serif; font-weight: bold}
[mathvariant="sans-serif-italic"] {font-family: sans-serif; font-style: italic}
[mathvariant="sans-serif-bold-italic"] {font-family: sans-serif; font-style: italic; font-weight: bold}
@font-face /*3*/ {font-family: MathJax_AMS-WEB; src: url('http://localhost:8888/static/components/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_AMS-Regular.otf')}
@font-face /*4*/ {font-family: MathJax_Script-WEB; src: url('http://localhost:8888/static/components/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Script-Regular.otf')}
@font-face /*5*/ {font-family: MathJax_Fraktur-WEB; src: url('http://localhost:8888/static/components/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Fraktur-Regular.otf')}
@font-face /*6*/ {font-family: MathJax_Fraktur-WEB; font-weight: bold; src: url('http://localhost:8888/static/components/MathJax/fonts/HTML-CSS/TeX/otf/MathJax_Fraktur-Bold.otf')}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">.MathJax_Display {text-align: center; margin: 0; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MathJax .MJX-monospace {font-family: monospace}
.MathJax .MJX-sans-serif {font-family: sans-serif}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
.MathJax:focus, body :focus .MathJax {display: inline-table}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0!important; padding: 0!important; margin: 0!important; vertical-align: 0!important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none}
.MathJax nobr {white-space: nowrap!important}
.MathJax img {display: inline!important; float: none!important}
.MathJax * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax_Processed {display: none!important}
.MathJax_ExBox {display: block!important; overflow: hidden; width: 1px; height: 60ex; min-height: 0; max-height: none}
.MathJax .MathJax_EmBox {display: block!important; overflow: hidden; width: 1px; height: 60em; min-height: 0; max-height: none}
.MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
.MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
#MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
@font-face {font-family: MathJax_Blank; src: url('about:blank')}
.MathJax .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><link id="favicon" type="image/x-icon" rel="shortcut icon" href="http://localhost:8888/static/base/images/favicon.ico"></head>

<body class="notebook_app command_mode" data-jupyter-api-token="249447848c0d7d5e4418cd70b34088ae069d323666d4147d" data-base-url="/" data-ws-url="" data-notebook-name="Dicom.ipynb" data-notebook-path="Dicom.ipynb" dir="ltr"><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div><div id="MathJax_Message" style="display: none;"></div>

<noscript>
    &lt;div id='noscript'&gt;
      Jupyter Notebook requires JavaScript.&lt;br&gt;
      Please enable it to proceed.
  &lt;/div&gt;
</noscript>

<div id="header" style="display: block;">
  <div id="header-container" class="container">
  <div id="ipython_notebook" class="nav navbar-brand pull-left"><a href="http://localhost:8888/tree" title="dashboard"><img src="./Dicom_files/logo.png" alt="Jupyter Notebook"></a></div>

  
  
  

    <span id="login_widget">
      
        <button id="logout" class="btn btn-sm navbar-btn">Logout</button>
      
    </span>

  

  

  


<span id="save_widget" class="pull-left save_widget">
    <span id="notebook_name" class="filename">Dicom</span>
    <span class="checkpoint_status" title="Thu, May 4, 2017 8:16 PM">Last Checkpoint: 21 minutes ago</span>
    <span class="autosave_status">(unsaved changes)</span>
</span>

<span id="kernel_logo_widget">
  
  <img class="current_kernel_logo" src="./Dicom_files/logo-64x64.png" title="Python 2" style="display: inline;">
  
</span>


  </div>
  <div class="header-bar"></div>

  
<div id="menubar-container" class="container">
<div id="menubar">
    <div id="menus" class="navbar navbar-default" role="navigation">
        <div class="container-fluid">
            <button type="button" class="btn btn-default navbar-btn navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
              <i class="fa fa-bars"></i>
              <span class="navbar-text">Menu</span>
            </button>
            <p id="kernel_indicator" class="navbar-text indicator_area">
              <span class="kernel_indicator_name">Python 2</span>
              <i id="kernel_indicator_icon" class="kernel_idle_icon" title="Kernel Idle"></i>
            </p>
            <i id="readonly-indicator" class="navbar-text" title="This notebook is read-only" style="display: none;">
                <span class="fa-stack">
                    <i class="fa fa-save fa-stack-1x"></i>
                    <i class="fa fa-ban fa-stack-2x text-danger"></i>
                </span>
            </i>
            <i id="modal_indicator" class="navbar-text modal_indicator" title="Command Mode"></i>
            <span id="notification_area"><div id="notification_kernel" class="notification_widget btn btn-xs navbar-btn undefined info" style="display: none;"><span></span></div><div id="notification_notebook" class="notification_widget btn btn-xs navbar-btn" style="display: none;"><span></span></div><div id="notification_trusted" class="notification_widget btn btn-xs navbar-btn" style="display: inline-block;"><span>Trusted</span></div></span>
            <div class="navbar-collapse collapse">
              <ul class="nav navbar-nav">
                <li class="dropdown"><a href="http://localhost:8888/notebooks/Dicom.ipynb#" class="dropdown-toggle" data-toggle="dropdown">File</a>
                    <ul id="file_menu" class="dropdown-menu">
                        <li id="new_notebook" class="dropdown-submenu">
                            <a href="http://localhost:8888/notebooks/Dicom.ipynb#">New Notebook</a>
                            <ul class="dropdown-menu" id="menu-new-notebook-submenu"><li id="new-notebook-submenu-python2"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Python 2</a></li></ul>
                        </li>
                        <li id="open_notebook" title="Opens a new window with the Dashboard view">
                            <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Open...</a></li>
                        <!-- <hr/> -->
                        <li class="divider"></li>
                        <li id="copy_notebook" title="Open a copy of this notebook&#39;s contents and start a new kernel">
                            <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Make a Copy...</a></li>
                        <li id="rename_notebook"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Rename...</a></li>
                        <li id="save_checkpoint"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Save and Checkpoint</a></li>
                        <!-- <hr/> -->
                        <li class="divider"></li>
                        <li id="restore_checkpoint" class="dropdown-submenu"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Revert to Checkpoint</a>
                          <ul class="dropdown-menu"><li><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Thursday, May 4, 2017 8:16 PM</a></li></ul>
                        </li>
                        <li class="divider"></li>
                        <li id="print_preview"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Print Preview</a></li>
                        <li class="dropdown-submenu"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Download as</a>
                            <ul id="download_menu" class="dropdown-menu">
                                <li id="download_ipynb"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Notebook (.ipynb)</a></li>
                                <li id="download_script"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Python (.py)</a></li>
                                <li id="download_html"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">HTML (.html)</a></li>
                                <li id="download_markdown"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Markdown (.md)</a></li>
                                <li id="download_rst"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">reST (.rst)</a></li>
                                <li id="download_latex"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">LaTeX (.tex)</a></li>
                                <li id="download_pdf"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">PDF via LaTeX (.pdf)</a></li>
                            </ul>
                        </li>
                        <li class="dropdown-submenu hidden"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Deploy as</a>
                            <ul id="deploy_menu" class="dropdown-menu"></ul>
                        </li>
                        <li class="divider"></li>
                        <li id="trust_notebook" title="Trust the output of this notebook" class="disabled">
                            <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Trusted Notebook</a></li>
                        <li class="divider"></li>
                        <li id="kill_and_exit" title="Shutdown this notebook&#39;s kernel, and close this window">
                            <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Close and Halt</a></li>
                    </ul>
                </li>
                <li class="dropdown"><a href="http://localhost:8888/notebooks/Dicom.ipynb#" class="dropdown-toggle" data-toggle="dropdown">Edit</a>
                    <ul id="edit_menu" class="dropdown-menu">
                        <li id="cut_cell"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Cut Cells</a></li>
                        <li id="copy_cell"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Copy Cells</a></li>
                        <li id="paste_cell_above" class="disabled"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Paste Cells Above</a></li>
                        <li id="paste_cell_below" class="disabled"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Paste Cells Below</a></li>
                        <li id="paste_cell_replace" class="disabled"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Paste Cells &amp; Replace</a></li>
                        <li id="delete_cell"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Delete Cells</a></li>
                        <li id="undelete_cell" class="disabled"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Undo Delete Cells</a></li>
                        <li class="divider"></li>
                        <li id="split_cell"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Split Cell</a></li>
                        <li id="merge_cell_above"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Merge Cell Above</a></li>
                        <li id="merge_cell_below"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Merge Cell Below</a></li>
                        <li class="divider"></li>
                        <li id="move_cell_up"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Move Cell Up</a></li>
                        <li id="move_cell_down"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Move Cell Down</a></li>
                        <li class="divider"></li>
                        <li id="edit_nb_metadata"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Edit Notebook Metadata</a></li>
                        <li class="divider"></li>
                        <li id="find_and_replace"><a href="http://localhost:8888/notebooks/Dicom.ipynb#"> Find and Replace </a></li>
                        <li class="divider"></li>
                        <li id="cut_cell_attachments"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Cut Cell Attachments</a></li>
                        <li id="copy_cell_attachments"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Copy Cell Attachments</a></li>
                        <li id="paste_cell_attachments" class="disabled"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Paste Cell Attachments</a></li>
                        <li class="divider"></li>
                        <li id="insert_image" class="disabled"><a href="http://localhost:8888/notebooks/Dicom.ipynb#"> Insert Image </a></li>
                    </ul>
                </li>
                <li class="dropdown"><a href="http://localhost:8888/notebooks/Dicom.ipynb#" class="dropdown-toggle" data-toggle="dropdown">View</a>
                    <ul id="view_menu" class="dropdown-menu">
                        <li id="toggle_header" title="Show/Hide the logo and notebook title (above menu bar)">
                            <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Toggle Header</a>
                        </li>
                        <li id="toggle_toolbar" title="Show/Hide the action icons (below menu bar)">
                            <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Toggle Toolbar</a>
                        </li>
                        <li id="toggle_line_numbers" title="Show/Hide line numbers in cells">
                            <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Toggle Line Numbers</a>
                        </li>
                        <li id="menu-cell-toolbar" class="dropdown-submenu">
                            <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Cell Toolbar</a>
                            <ul class="dropdown-menu" id="menu-cell-toolbar-submenu"><li data-name="None"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">None</a></li><li data-name="Edit%20Metadata"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Edit Metadata</a></li><li data-name="Raw%20Cell%20Format"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Raw Cell Format</a></li><li data-name="Slideshow"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Slideshow</a></li><li data-name="Attachments"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Attachments</a></li><li data-name="Tags"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Tags</a></li></ul>
                        </li>
                    </ul>
                </li>
                <li class="dropdown"><a href="http://localhost:8888/notebooks/Dicom.ipynb#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">Insert</a>
                    <ul id="insert_menu" class="dropdown-menu">
                        <li id="insert_cell_above" title="Insert an empty Code cell above the currently active cell">
                            <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Insert Cell Above</a></li>
                        <li id="insert_cell_below" title="Insert an empty Code cell below the currently active cell">
                            <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Insert Cell Below</a></li>
                    </ul>
                </li>
                <li class="dropdown"><a href="http://localhost:8888/notebooks/Dicom.ipynb#" class="dropdown-toggle" data-toggle="dropdown">Cell</a>
                    <ul id="cell_menu" class="dropdown-menu">
                        <li id="run_cell" title="Run this cell, and move cursor to the next one">
                            <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Run Cells</a></li>
                        <li id="run_cell_select_below" title="Run this cell, select below">
                            <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Run Cells and Select Below</a></li>
                        <li id="run_cell_insert_below" title="Run this cell, insert below">
                            <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Run Cells and Insert Below</a></li>
                        <li id="run_all_cells" title="Run all cells in the notebook">
                            <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Run All</a></li>
                        <li id="run_all_cells_above" title="Run all cells above (but not including) this cell">
                            <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Run All Above</a></li>
                        <li id="run_all_cells_below" title="Run this cell and all cells below it">
                            <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Run All Below</a></li>
                        <li class="divider"></li>
                        <li id="change_cell_type" class="dropdown-submenu" title="All cells in the notebook have a cell type. By default, new cells are created as &#39;Code&#39; cells">
                            <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Cell Type</a>
                            <ul class="dropdown-menu">
                              <li id="to_code" title="Contents will be sent to the kernel for execution, and output will display in the footer of cell">
                                  <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Code</a></li>
                              <li id="to_markdown" title="Contents will be rendered as HTML and serve as explanatory text">
                                  <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Markdown</a></li>
                              <li id="to_raw" title="Contents will pass through nbconvert unmodified">
                                  <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Raw NBConvert</a></li>
                            </ul>
                        </li>
                        <li class="divider"></li>
                        <li id="current_outputs" class="dropdown-submenu"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Current Outputs</a>
                            <ul class="dropdown-menu">
                                <li id="toggle_current_output" title="Hide/Show the output of the current cell">
                                    <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Toggle</a>
                                </li>
                                <li id="toggle_current_output_scroll" title="Scroll the output of the current cell">
                                    <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Toggle Scrolling</a>
                                </li>
                                <li id="clear_current_output" title="Clear the output of the current cell">
                                    <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Clear</a>
                                </li>
                            </ul>
                        </li>
                        <li id="all_outputs" class="dropdown-submenu"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">All Output</a>
                            <ul class="dropdown-menu">
                                <li id="toggle_all_output" title="Hide/Show the output of all cells">
                                    <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Toggle</a>
                                </li>
                                <li id="toggle_all_output_scroll" title="Scroll the output of all cells">
                                    <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Toggle Scrolling</a>
                                </li>
                                <li id="clear_all_output" title="Clear the output of all cells">
                                    <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Clear</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li class="dropdown"><a href="http://localhost:8888/notebooks/Dicom.ipynb#" class="dropdown-toggle" data-toggle="dropdown">Kernel</a>
                    <ul id="kernel_menu" class="dropdown-menu">
                        <li id="int_kernel" title="Send KeyboardInterrupt (CTRL-C) to the Kernel">
                            <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Interrupt</a>
                        </li>
                        <li id="restart_kernel" title="Restart the Kernel">
                            <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Restart</a>
                        </li>
                        <li id="restart_clear_output" title="Restart the Kernel and clear all output">
                            <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Restart &amp; Clear Output</a>
                        </li>
                        <li id="restart_run_all" title="Restart the Kernel and re-run the notebook">
                            <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Restart &amp; Run All</a>
                        </li>
                        <li id="reconnect_kernel" title="Reconnect to the Kernel">
                            <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Reconnect</a>
                        </li>
                        <li id="shutdown_kernel" title="Shutdown the Kernel">
                            <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Shutdown</a>
                        </li>
                        <li class="divider"></li>
                        <li id="menu-change-kernel" class="dropdown-submenu">
                            <a href="http://localhost:8888/notebooks/Dicom.ipynb#">Change kernel</a>
                            <ul class="dropdown-menu" id="menu-change-kernel-submenu"><li id="kernel-submenu-python2"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Python 2</a></li></ul>
                        </li>
                    </ul>
                </li>
                <li class="dropdown"><a href="http://localhost:8888/notebooks/Dicom.ipynb#" class="dropdown-toggle" data-toggle="dropdown">Help</a>
                    <ul id="help_menu" class="dropdown-menu">
                        
                        <li id="notebook_tour" title="A quick tour of the notebook user interface"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">User Interface Tour</a></li>
                        <li id="keyboard_shortcuts" title="Opens a dialog which shows all keyboard shortcuts"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Keyboard Shortcuts</a></li>
                        <li id="edit_keyboard_shortcuts" title="Opens a dialog allowing you to edit Keyboard shortcuts"><a href="http://localhost:8888/notebooks/Dicom.ipynb#">Edit Keyboard Shortcuts</a></li>
                        <li class="divider"></li>
                        

                        
                            
                                <li><a rel="noreferrer" href="http://nbviewer.ipython.org/github/ipython/ipython/blob/3.x/examples/Notebook/Index.ipynb" target="_blank" title="Opens in a new window">
                                
                                    <i class="fa fa-external-link menu-icon pull-right"></i>
                                

                                Notebook Help
                                </a></li>
                            
                                <li><a rel="noreferrer" href="https://help.github.com/articles/markdown-basics/" target="_blank" title="Opens in a new window">
                                
                                    <i class="fa fa-external-link menu-icon pull-right"></i>
                                

                                Markdown
                                </a></li>
                            
                            
                        
                        <li id="kernel-help-links" class="divider"></li><li><a target="_blank" title="Opens in a new window" href="http://docs.python.org/2.7?v=20170504191621"><i class="fa fa-external-link menu-icon pull-right"></i><span>Python</span></a></li><li><a target="_blank" title="Opens in a new window" href="http://ipython.org/documentation.html?v=20170504191621"><i class="fa fa-external-link menu-icon pull-right"></i><span>IPython</span></a></li><li><a target="_blank" title="Opens in a new window" href="http://docs.scipy.org/doc/numpy/reference/?v=20170504191621"><i class="fa fa-external-link menu-icon pull-right"></i><span>NumPy</span></a></li><li><a target="_blank" title="Opens in a new window" href="http://docs.scipy.org/doc/scipy/reference/?v=20170504191621"><i class="fa fa-external-link menu-icon pull-right"></i><span>SciPy</span></a></li><li><a target="_blank" title="Opens in a new window" href="http://matplotlib.org/contents.html?v=20170504191621"><i class="fa fa-external-link menu-icon pull-right"></i><span>Matplotlib</span></a></li><li><a target="_blank" title="Opens in a new window" href="http://docs.sympy.org/latest/index.html?v=20170504191621"><i class="fa fa-external-link menu-icon pull-right"></i><span>SymPy</span></a></li><li><a target="_blank" title="Opens in a new window" href="http://pandas.pydata.org/pandas-docs/stable/?v=20170504191621"><i class="fa fa-external-link menu-icon pull-right"></i><span>pandas</span></a></li><li class="divider"></li>
                        <li title="About Jupyter Notebook"><a id="notebook_about" href="http://localhost:8888/notebooks/Dicom.ipynb#">About</a></li>
                        
                    </ul>
                </li>
              </ul>
            </div>
        </div>
    </div>
</div>

<div id="maintoolbar" class="navbar">
  <div class="toolbar-inner navbar-inner navbar-nobg">
    <div id="maintoolbar-container" class="container toolbar"><div class="btn-group" id="save-notbook"><button class="btn btn-default" title="Save and Checkpoint" data-jupyter-action="jupyter-notebook:save-notebook"><i class="fa-save fa"></i></button></div><div class="btn-group" id="insert_above_below"><button class="btn btn-default" title="insert cell below" data-jupyter-action="jupyter-notebook:insert-cell-below"><i class="fa-plus fa"></i></button></div><div class="btn-group" id="cut_copy_paste"><button class="btn btn-default" title="cut selected cells" data-jupyter-action="jupyter-notebook:cut-cell"><i class="fa-cut fa"></i></button><button class="btn btn-default" title="copy selected cells" data-jupyter-action="jupyter-notebook:copy-cell"><i class="fa-copy fa"></i></button><button class="btn btn-default" title="paste cells below" data-jupyter-action="jupyter-notebook:paste-cell-below"><i class="fa-paste fa"></i></button></div><div class="btn-group" id="move_up_down"><button class="btn btn-default" title="move selected cells up" data-jupyter-action="jupyter-notebook:move-cell-up"><i class="fa-arrow-up fa"></i></button><button class="btn btn-default" title="move selected cells down" data-jupyter-action="jupyter-notebook:move-cell-down"><i class="fa-arrow-down fa"></i></button></div><div class="btn-group" id="run_int"><button class="btn btn-default" title="run cell, select below" data-jupyter-action="jupyter-notebook:run-cell-and-select-next"><i class="fa-step-forward fa"></i></button><button class="btn btn-default" title="interrupt kernel" data-jupyter-action="jupyter-notebook:interrupt-kernel"><i class="fa-stop fa"></i></button><button class="btn btn-default" title="restart the kernel (with dialog)" data-jupyter-action="jupyter-notebook:confirm-restart-kernel"><i class="fa-repeat fa"></i></button></div><select id="cell_type" class="form-control select-xs"><option value="code">Code</option><option value="markdown">Markdown</option><option value="raw">Raw NBConvert</option><option value="heading">Heading</option><option value="multiselect" disabled="disabled" style="display: none;">-</option></select><div class="btn-group"><button class="btn btn-default" title="open the command palette" data-jupyter-action="jupyter-notebook:show-command-palette"><i class="fa-keyboard-o fa"></i></button></div></div>
  </div>
</div>
</div>

<div class="lower-header-bar"></div>

</div>

<div id="site" style="height: 499px; display: block;">


<div id="ipython-main-app">
    <div id="notebook_panel">
        <div id="notebook" tabindex="-1"><div class="container" id="notebook-container"><div class="cell text_cell unrendered unselected" tabindex="2"><div class="prompt input_prompt"></div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-default CodeMirror-wrap"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; padding-right: 0px; padding-bottom: 0px; margin-bottom: -15px; border-right-width: 15px; min-height: 32px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 21px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-header cm-header-1"># Dicom</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 15px; width: 1px; border-bottom: 0px solid transparent; top: 32px;"></div><div class="CodeMirror-gutters" style="display: none; height: 47px;"></div></div></div></div><div class="text_cell_render rendered_html" tabindex="-1"><h1 id="Dicom">Dicom<a class="anchor-link" href="http://localhost:8888/notebooks/Dicom.ipynb#Dicom">¶</a></h1>
</div></div></div><div class="cell code_cell rendered selected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[6]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 137.797px; margin-bottom: -15px; border-right-width: 15px; min-height: 45px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"><div class="CodeMirror-selected" style="position: absolute; left: 0px; top: 0px; width: 984px; height: 17px;"></div><div class="CodeMirror-selected" style="position: absolute; left: 0px; top: 17px; width: 134.797px; height: 17px;"></div></div><div class="CodeMirror-cursors"></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-operator">%%</span><span class="cm-variable">HTML</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-operator">&lt;</span><span class="cm-variable">h1</span><span class="cm-operator">&gt;</span><span class="cm-variable">Imports</span><span class="cm-operator">&lt;/</span><span class="cm-variable">h1</span><span class="cm-operator">&gt;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 15px; width: 1px; border-bottom: 0px solid transparent; top: 45px;"></div><div class="CodeMirror-gutters" style="display: none; height: 60px;"></div></div></div></div></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to scroll output; double click to hide" style=""></div><div class="output" style=""><div class="output_area"><div class="prompt"></div><div class="output_subarea output_html rendered_html"><h1>Imports</h1></div></div></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[1]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 64.5938px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 929.922px; margin-bottom: -15px; border-right-width: 15px; min-height: 1014px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 59px; top: 0px; height: 17px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#############</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Imports</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#############</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#coding=utf-8</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#matplotlib.use('Agg')</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">warnings</span>.<span class="cm-property">filterwarnings</span>(<span class="cm-string">"ignore"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">numpy</span> <span class="cm-keyword">import</span> <span class="cm-operator">*</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">numpy</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">numpy</span> <span class="cm-keyword">as</span> <span class="cm-variable">np</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">matplotlib</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">matplotlib</span>.<span class="cm-property">pyplot</span> <span class="cm-keyword">as</span> <span class="cm-variable">plt</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">skimage</span> <span class="cm-keyword">import</span> <span class="cm-variable">color</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">dicom</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">io</span> <span class="cm-keyword">import</span> <span class="cm-variable">StringIO</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">sys</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">glob</span>, <span class="cm-variable">urllib</span>, <span class="cm-variable">os</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">ia636</span> <span class="cm-keyword">import</span> <span class="cm-variable">iaconv</span>, <span class="cm-variable">ianormalize</span>, <span class="cm-variable">iamosaic</span>, <span class="cm-variable">iagshow</span>,<span class="cm-variable">iaimginfo</span>, <span class="cm-variable">iaffine</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">ia870</span> <span class="cm-keyword">import</span> <span class="cm-variable">iagradm</span>, <span class="cm-variable">iaareaopen</span>, <span class="cm-variable">iaareaclose</span>, <span class="cm-variable">ialabel</span>, <span class="cm-variable">iadist</span>, <span class="cm-variable">iasedisk</span>, <span class="cm-variable">iasecross</span>, <span class="cm-variable">iasubm</span>, <span class="cm-variable">iadil</span>, <span class="cm-variable">iaero</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">skimage</span>.<span class="cm-property">feature</span> <span class="cm-keyword">import</span> <span class="cm-variable">local_binary_pattern</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">sklearn</span>.<span class="cm-property">feature_extraction</span> <span class="cm-keyword">import</span> <span class="cm-variable">image</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">sklearn</span>.<span class="cm-property">metrics</span> <span class="cm-keyword">import</span> <span class="cm-variable">accuracy_score</span>, <span class="cm-variable">confusion_matrix</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">sklearn</span> <span class="cm-keyword">import</span> <span class="cm-variable">svm</span>,<span class="cm-variable">neighbors</span>,<span class="cm-variable">preprocessing</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">sklearn</span> <span class="cm-keyword">import</span> <span class="cm-variable">metrics</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">skimage</span> <span class="cm-keyword">import</span> <span class="cm-variable">exposure</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">skimage</span>.<span class="cm-property">transform</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">joblib</span> <span class="cm-keyword">import</span> <span class="cm-variable">Parallel</span>, <span class="cm-variable">delayed</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">multiprocessing</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">sklearn</span>.<span class="cm-property">ensemble</span> <span class="cm-keyword">import</span> <span class="cm-variable">BaggingClassifier</span>, <span class="cm-variable">RandomForestClassifier</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">sklearn</span>.<span class="cm-property">multiclass</span> <span class="cm-keyword">import</span> <span class="cm-variable">OneVsRestClassifier</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">sklearn</span>.<span class="cm-property">svm</span> <span class="cm-keyword">import</span> <span class="cm-variable">SVC</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">sklearn</span> <span class="cm-keyword">import</span> <span class="cm-variable">linear_model</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">sklearn</span>.<span class="cm-property">neural_network</span> <span class="cm-keyword">import</span> <span class="cm-variable">MLPClassifier</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">sklearn</span>.<span class="cm-property">preprocessing</span> <span class="cm-keyword">import</span> <span class="cm-variable">StandardScaler</span> </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">sklearn</span>.<span class="cm-property">svm</span> <span class="cm-keyword">import</span> <span class="cm-variable">LinearSVC</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">sklearn</span>.<span class="cm-property">calibration</span> <span class="cm-keyword">import</span> <span class="cm-variable">CalibratedClassifierCV</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">sklearn</span>.<span class="cm-property">model_selection</span> <span class="cm-keyword">import</span> <span class="cm-variable">cross_val_score</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">sklearn</span>.<span class="cm-property">grid_search</span> <span class="cm-keyword">import</span> <span class="cm-variable">GridSearchCV</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">sklearn</span> <span class="cm-keyword">import</span> <span class="cm-variable">decomposition</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">sklearn</span>.<span class="cm-property">decomposition</span> <span class="cm-keyword">import</span> <span class="cm-variable">PCA</span>,<span class="cm-variable">IncrementalPCA</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">time</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">timeit</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">warnings</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">import</span> <span class="cm-variable">datetime</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">time</span> <span class="cm-keyword">import</span> <span class="cm-variable">gmtime</span>, <span class="cm-variable">strftime</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">from</span> <span class="cm-variable">copy</span> <span class="cm-keyword">import</span> <span class="cm-variable">deepcopy</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 15px; width: 1px; border-bottom: 0px solid transparent; top: 1014px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1029px;"></div></div></div></div></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to expand output; double click to hide output" style=""></div><div class="output" style=""><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_stream output_stderr"><pre>/usr/local/lib/python2.7/dist-packages/sklearn/cross_validation.py:44: DeprecationWarning: This module was deprecated in version 0.18 in favor of the model_selection module into which all the refactored classes and functions are moved. Also note that the interface of the new CV iterators are different from that of this module. This module will be removed in 0.20.
  "This module will be removed in 0.20.", DeprecationWarning)
/usr/local/lib/python2.7/dist-packages/sklearn/grid_search.py:43: DeprecationWarning: This module was deprecated in version 0.18 in favor of the model_selection module into which all the refactored classes and functions are moved. This module will be removed in 0.20.
  DeprecationWarning)
</pre></div></div></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[2]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 804.594px; left: 174.141px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 15px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true" style="right: 0px; left: 0px; display: block;"><div style="height: 100%; min-height: 1px; width: 2868px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true" style="height: 15px; width: 15px;"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 2868.08px; margin-bottom: -15px; border-right-width: 15px; min-height: 827px; padding-right: 0px; padding-bottom: 15px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre>x</pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors" style="visibility: hidden;"><div class="CodeMirror-cursor" style="left: 168.547px; top: 799px; height: 17px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#########################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Support Functions</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#########################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">write</span>(<span class="cm-variable">msg</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">print</span> <span class="cm-variable">msg</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">execution_log</span>.<span class="cm-property">write</span>(<span class="cm-variable">msg</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">write_table</span>(<span class="cm-variable">msg</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">execution_results</span>.<span class="cm-property">write</span>(<span class="cm-variable">msg</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">write_double</span>(<span class="cm-variable">msg</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write</span>(<span class="cm-variable">msg</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_table</span>(<span class="cm-variable">msg</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">write_double_fim</span>():</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">msg</span> = (<span class="cm-string">"-------------------"</span> <span class="cm-operator">*</span> <span class="cm-number">3</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_double</span>(<span class="cm-variable">msg</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">write_line</span>(<span class="cm-variable">msg</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">print</span> (<span class="cm-variable">msg</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span> <span class="cm-operator">+</span> <span class="cm-variable">line</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">execution_log</span>.<span class="cm-property">write</span>(<span class="cm-variable">msg</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span> <span class="cm-operator">+</span> <span class="cm-variable">line</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">write_double_line</span>(<span class="cm-variable">msg</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">print</span> (<span class="cm-variable">line</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span> <span class="cm-operator">+</span> <span class="cm-variable">msg</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span> <span class="cm-operator">+</span> <span class="cm-variable">line</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">execution_log</span>.<span class="cm-property">write</span>(<span class="cm-variable">line</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span> <span class="cm-operator">+</span> <span class="cm-variable">msg</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span> <span class="cm-operator">+</span> <span class="cm-variable">line</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">write_line_fim</span>(<span class="cm-variable">msg</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">print</span> (<span class="cm-variable">msg</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span> <span class="cm-operator">+</span> <span class="cm-variable">line</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span> <span class="cm-operator">+</span> <span class="cm-variable">line</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">execution_log</span>.<span class="cm-property">write</span>(<span class="cm-variable">msg</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span> <span class="cm-operator">+</span> <span class="cm-variable">line</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span> <span class="cm-operator">+</span> <span class="cm-variable">big_line</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span> <span class="cm-operator">+</span> <span class="cm-variable">line</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">execution_results</span>.<span class="cm-property">write</span>(<span class="cm-variable">msg</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span> <span class="cm-operator">+</span> <span class="cm-variable">line</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span> <span class="cm-operator">+</span> <span class="cm-variable">big_line</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span> <span class="cm-operator">+</span> <span class="cm-variable">line</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">write_results</span>(<span class="cm-variable">results</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_double</span>(<span class="cm-string">"Result for each user ID:"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">separate</span>(<span class="cm-string">"-"</span>, <span class="cm-number">86</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> <span class="cm-variable">result</span> <span class="cm-keyword">in</span> <span class="cm-variable">results</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_double</span>(<span class="cm-string">"|id: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">result</span>[<span class="cm-number">0</span>], <span class="cm-string">"02d"</span>)) <span class="cm-operator">+</span> <span class="cm-string">"|Acuracy: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">result</span>[<span class="cm-number">1</span>], <span class="cm-string">"5.3f"</span>)) <span class="cm-operator">+</span> <span class="cm-string">"| Dice without post-processing: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">result</span>[<span class="cm-number">2</span>], <span class="cm-string">"5.3f"</span>)) <span class="cm-operator">+</span> <span class="cm-string">"|std: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">result</span>[<span class="cm-number">3</span>], <span class="cm-string">"5.3f"</span>)) <span class="cm-operator">+</span> <span class="cm-string">"| Dice with post-processing: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">result</span>[<span class="cm-number">4</span>], <span class="cm-string">"5.3f"</span>)) <span class="cm-operator">+</span> <span class="cm-string">"|std: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">result</span>[<span class="cm-number">5</span>], <span class="cm-string">"5.3f"</span>)) <span class="cm-operator">+</span> <span class="cm-string">"|"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">separate</span>(<span class="cm-string">"-"</span>,<span class="cm-number">86</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">close_files</span>():</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">execution_log</span>.<span class="cm-property">close</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">execution_results</span>.<span class="cm-property">close</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">separate</span>(<span class="cm-variable">separator</span>, <span class="cm-variable">n</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">msg</span> = <span class="cm-builtin">str</span>(<span class="cm-variable">separator</span> <span class="cm-operator">*</span> <span class="cm-variable">n</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write</span>(<span class="cm-variable">msg</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_table</span>(<span class="cm-variable">msg</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 15px; width: 1px; border-bottom: 15px solid transparent; top: 827px;"></div><div class="CodeMirror-gutters" style="display: none; height: 857px;"></div></div></div></div></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to expand output; double click to hide output" style="display: none;"></div><div class="output" style="display: none;"></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[3]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 21476.6px; left: 165.703px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 15px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true" style="right: 0px; left: 0px; display: block;"><div style="height: 100%; min-height: 1px; width: 2017px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true" style="height: 15px; width: 15px;"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 2016.69px; margin-bottom: -15px; border-right-width: 15px; min-height: 21499px; padding-right: 0px; padding-bottom: 15px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 160.109px; top: 21471px; height: 17px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#######################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Program Functions</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#######################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">####################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">####################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Function: gradimg (from local_texture)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Goal: generate gradient of an image</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Input: image f</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Output: gradient of image f</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">####################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">####################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">gradimg</span>(<span class="cm-variable">f</span>):        </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">if</span> <span class="cm-builtin">len</span>(<span class="cm-variable">f</span>.<span class="cm-property">shape</span>) == <span class="cm-number">2</span>:                                    <span class="cm-comment"># 2D case</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">h1</span> = <span class="cm-variable">array</span>([[<span class="cm-number">0</span>,<span class="cm-number">1</span>,<span class="cm-number">0</span>],                                 <span class="cm-comment"># Defining the horizontal mask</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                       [<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                       [<span class="cm-number">0</span>,<span class="cm-operator">-</span><span class="cm-number">1</span>,<span class="cm-number">0</span>]])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">h2</span> = <span class="cm-variable">array</span>([[<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>],                                 <span class="cm-comment"># Defining the vertical mask</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                       [<span class="cm-number">1</span>,<span class="cm-number">0</span>,<span class="cm-operator">-</span><span class="cm-number">1</span>],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                       [<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>]])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">aux1</span> = <span class="cm-variable">iaconv</span>(<span class="cm-variable">f</span>,<span class="cm-variable">h1</span>)[<span class="cm-number">1</span>:<span class="cm-operator">-</span><span class="cm-number">1</span>,<span class="cm-number">1</span>:<span class="cm-operator">-</span><span class="cm-number">1</span>].<span class="cm-property">astype</span>(<span class="cm-builtin">int</span>)        <span class="cm-comment"># Make the convolution between horizontal mask and image</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">aux2</span> = <span class="cm-variable">iaconv</span>(<span class="cm-variable">f</span>,<span class="cm-variable">h2</span>)[<span class="cm-number">1</span>:<span class="cm-operator">-</span><span class="cm-number">1</span>,<span class="cm-number">1</span>:<span class="cm-operator">-</span><span class="cm-number">1</span>].<span class="cm-property">astype</span>(<span class="cm-builtin">int</span>)        <span class="cm-comment"># Make the convolution between vertical mask and image</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">g</span> = <span class="cm-variable">sqrt</span>(<span class="cm-variable">aux1</span><span class="cm-operator">**</span><span class="cm-number">2</span> <span class="cm-operator">+</span> <span class="cm-variable">aux2</span><span class="cm-operator">**</span><span class="cm-number">2</span>)                       <span class="cm-comment"># Use the equation to compute the gradient of an image</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-keyword">return</span> <span class="cm-variable">g</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">        <span class="cm-keyword">else</span>:                                                    <span class="cm-comment"># 3D case</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">h1</span> = <span class="cm-variable">array</span>([[[<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>],                                <span class="cm-comment"># Defining the horizontal mask </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                         [<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                         [<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>]],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                        [[<span class="cm-number">0</span>,<span class="cm-number">1</span>,<span class="cm-number">0</span>],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                         [<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                         [<span class="cm-number">0</span>,<span class="cm-operator">-</span><span class="cm-number">1</span>,<span class="cm-number">0</span>]],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                        [[<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                         [<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                         [<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>]]])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">h2</span> = <span class="cm-variable">array</span>([[[<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>],                                <span class="cm-comment"># Defining the vertical mask</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                         [<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                         [<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>]],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                        [[<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                         [<span class="cm-number">1</span>,<span class="cm-number">0</span>,<span class="cm-operator">-</span><span class="cm-number">1</span>],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                         [<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>]],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                        [[<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                         [<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                         [<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>]]])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">h3</span> = <span class="cm-variable">array</span>([[[<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>],                                <span class="cm-comment"># Defining the depth mask</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                         [<span class="cm-number">0</span>,<span class="cm-number">1</span>,<span class="cm-number">0</span>],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                         [<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>]],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                        [[<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                         [<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                         [<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>]],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                        [[<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                         [<span class="cm-number">0</span>,<span class="cm-operator">-</span><span class="cm-number">1</span>,<span class="cm-number">0</span>],</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">                         [<span class="cm-number">0</span>,<span class="cm-number">0</span>,<span class="cm-number">0</span>]]])  </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">    </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">aux1</span> = <span class="cm-variable">iaconv</span>(<span class="cm-variable">f</span>,<span class="cm-variable">h1</span>)[<span class="cm-number">1</span>:<span class="cm-operator">-</span><span class="cm-number">1</span>,<span class="cm-number">1</span>:<span class="cm-operator">-</span><span class="cm-number">1</span>,<span class="cm-number">1</span>:<span class="cm-operator">-</span><span class="cm-number">1</span>].<span class="cm-property">astype</span>(<span class="cm-builtin">int</span>)    <span class="cm-comment"># Make the convolution between horizontal mask and image </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">aux2</span> = <span class="cm-variable">iaconv</span>(<span class="cm-variable">f</span>,<span class="cm-variable">h2</span>)[<span class="cm-number">1</span>:<span class="cm-operator">-</span><span class="cm-number">1</span>,<span class="cm-number">1</span>:<span class="cm-operator">-</span><span class="cm-number">1</span>,<span class="cm-number">1</span>:<span class="cm-operator">-</span><span class="cm-number">1</span>].<span class="cm-property">astype</span>(<span class="cm-builtin">int</span>)    <span class="cm-comment"># Make the convolution between vertical mask and image</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">aux3</span> = <span class="cm-variable">iaconv</span>(<span class="cm-variable">f</span>,<span class="cm-variable">h3</span>)[<span class="cm-number">1</span>:<span class="cm-operator">-</span><span class="cm-number">1</span>,<span class="cm-number">1</span>:<span class="cm-operator">-</span><span class="cm-number">1</span>,<span class="cm-number">1</span>:<span class="cm-operator">-</span><span class="cm-number">1</span>].<span class="cm-property">astype</span>(<span class="cm-builtin">int</span>)    <span class="cm-comment"># Make the convolution between depth mask and image</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-variable">grad</span> = <span class="cm-variable">sqrt</span>(<span class="cm-variable">aux1</span><span class="cm-operator">**</span><span class="cm-number">2</span> <span class="cm-operator">+</span> <span class="cm-variable">aux2</span><span class="cm-operator">**</span><span class="cm-number">2</span> <span class="cm-operator">+</span> <span class="cm-variable">aux3</span><span class="cm-operator">**</span><span class="cm-number">2</span>)              <span class="cm-comment"># Use the equation to compute the gradient of an image</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;">            <span class="cm-keyword">return</span> <span class="cm-variable">grad</span>  </span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">####################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">####################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Function: resize</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Goal: changes the dimension of the images</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Input: img, slices</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Output: img (imagem redimensionada)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">####################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">####################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">resize</span>(<span class="cm-variable">img</span>, <span class="cm-variable">slices</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">img</span>.<span class="cm-property">shape</span>[<span class="cm-number">1</span>] <span class="cm-operator">&gt;</span> <span class="cm-variable">size_slice</span> <span class="cm-keyword">and</span> <span class="cm-variable">img</span>.<span class="cm-property">shape</span>[<span class="cm-number">2</span>] <span class="cm-operator">&gt;</span> <span class="cm-variable">size_slice</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-variable">skimage</span>.<span class="cm-property">transform</span>.<span class="cm-property">resize</span>(<span class="cm-variable">img</span>, (<span class="cm-variable">slices</span>,<span class="cm-variable">size_slice</span>,<span class="cm-variable">size_slice</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">elif</span> (<span class="cm-variable">img</span>.<span class="cm-property">shape</span>[<span class="cm-number">1</span>] == <span class="cm-variable">size_slice</span> <span class="cm-keyword">and</span> <span class="cm-variable">img</span>.<span class="cm-property">shape</span>[<span class="cm-number">2</span>] == <span class="cm-variable">size_slice</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-variable">img</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">sys</span>.<span class="cm-property">exit</span>(<span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#####################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#####################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Function: generate_images_pre_processing</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Goal: performs pre-processing of the images</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Input: img_org, img_wm, img_wml</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Output: img_org, img_wm, img_wml</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#####################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#####################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">generate_images_pre_processing</span>(<span class="cm-variable">img_org</span>, <span class="cm-variable">img_wm</span>, <span class="cm-variable">img_wml</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#resize</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">slices</span> = <span class="cm-variable">img_org</span>.<span class="cm-property">shape</span>[<span class="cm-number">0</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_org</span> = <span class="cm-variable">resize</span>(<span class="cm-variable">img_org</span>, <span class="cm-variable">slices</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_wm</span> = <span class="cm-variable">resize</span>(<span class="cm-variable">img_wm</span>, <span class="cm-variable">slices</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_wml</span> = <span class="cm-variable">resize</span>(<span class="cm-variable">img_wml</span>, <span class="cm-variable">slices</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#normalize the image</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_org</span> = <span class="cm-variable">ianormalize</span>(<span class="cm-variable">img_org</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> (<span class="cm-variable">img_org</span>, <span class="cm-variable">img_wm</span>, <span class="cm-variable">img_wml</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">####################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">####################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Function: print_infos_start_program</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Goal: print information about the program</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Input: -</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Output: -</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">####################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">####################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">print_infos_start_program</span>():</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">execution_log</span>.<span class="cm-property">write</span>(<span class="cm-variable">line</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">print</span> <span class="cm-variable">line</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_double</span>(<span class="cm-string">"Start of the program"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">print</span> <span class="cm-variable">line</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data_local</span> = <span class="cm-variable">time</span>.<span class="cm-property">localtime</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">year</span> = <span class="cm-builtin">str</span>(<span class="cm-variable">data_local</span>[<span class="cm-number">0</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">month</span> = <span class="cm-variable">data_local</span>[<span class="cm-number">1</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">day</span> = <span class="cm-variable">data_local</span>[<span class="cm-number">2</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">hour</span> = <span class="cm-variable">data_local</span>[<span class="cm-number">3</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">minute</span> = <span class="cm-variable">data_local</span>[<span class="cm-number">4</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">second</span> = <span class="cm-variable">data_local</span>[<span class="cm-number">5</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">current_date</span> = (<span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">day</span>, <span class="cm-string">"02d"</span>)) <span class="cm-operator">+</span> <span class="cm-string">"/"</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">month</span>, <span class="cm-string">"02d"</span>)) <span class="cm-operator">+</span> <span class="cm-string">"/"</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">year</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">current_time</span> = (<span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">hour</span>, <span class="cm-string">"02d"</span>)) <span class="cm-operator">+</span> <span class="cm-string">":"</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">minute</span>, <span class="cm-string">"02d"</span>)) <span class="cm-operator">+</span> <span class="cm-string">":"</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">second</span>, <span class="cm-string">"02d"</span>)))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#Prints date and time</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"Day: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">current_date</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"Time: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">current_time</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#prints the number of processors</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"Num CPUs: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">num_cores</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">###############################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">###############################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Function: print_lists_patients_training_and_test</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Goal: prints list of patients for training and testing</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Input: list of patients for training and testing</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Output: -</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">###############################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">###############################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">print_lists_patients_training_and_test</span>(<span class="cm-variable">id_list_training</span>, <span class="cm-variable">id_list_testing</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#IDs for training</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">num_elements_training</span>=<span class="cm-builtin">len</span>(<span class="cm-variable">id_list_training</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_double</span>(<span class="cm-string">"Number of elements for training: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">num_elements_training</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_double</span>(<span class="cm-string">"IDs for training:"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> <span class="cm-builtin">id</span> <span class="cm-keyword">in</span> <span class="cm-variable">id_list_training</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">print</span> <span class="cm-builtin">id</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">execution_log</span>.<span class="cm-property">write</span>(<span class="cm-builtin">str</span>(<span class="cm-builtin">id</span>) <span class="cm-operator">+</span> <span class="cm-string">" "</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">execution_results</span>.<span class="cm-property">write</span>(<span class="cm-builtin">str</span>(<span class="cm-builtin">id</span>) <span class="cm-operator">+</span> <span class="cm-string">" "</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_double</span>(<span class="cm-string">"\n"</span> <span class="cm-operator">+</span> <span class="cm-variable">line</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#IDs for testing</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">num_elements_testing</span>=<span class="cm-builtin">len</span>(<span class="cm-variable">id_list_testing</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_double</span>(<span class="cm-string">"Number of elements for testing: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">num_elements_testing</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_double</span>(<span class="cm-string">"IDs for testing:"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> <span class="cm-builtin">id</span> <span class="cm-keyword">in</span> <span class="cm-variable">id_list_testing</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">print</span> <span class="cm-builtin">id</span>,</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">execution_log</span>.<span class="cm-property">write</span>(<span class="cm-builtin">str</span>(<span class="cm-builtin">id</span>) <span class="cm-operator">+</span> <span class="cm-string">" "</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">execution_results</span>.<span class="cm-property">write</span>(<span class="cm-builtin">str</span>(<span class="cm-builtin">id</span>) <span class="cm-operator">+</span> <span class="cm-string">" "</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_double</span>(<span class="cm-string">"\n"</span> <span class="cm-operator">+</span> <span class="cm-variable">line</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">###################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">###################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Function: boxplot</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Goal: prints boxplot of the testing patients</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Input: dice_total_testing, labels=list_testing_wml</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Output: -</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">###################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">###################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">boxplot</span>(<span class="cm-variable">dice_total_testing</span>, <span class="cm-variable">list_testing_wml</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">xlabel</span>(<span class="cm-string">'Testing Patients'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">ylabel</span>(<span class="cm-string">'Dice Coefficient'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">ylim</span>([<span class="cm-number">0.0</span>, <span class="cm-number">1.0</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">boxplot</span>(<span class="cm-variable">dice_total_testing</span>, <span class="cm-variable">labels</span>=<span class="cm-variable">list_testing_wml</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">title</span>(<span class="cm-string">"Boxplot"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">savefig</span>(<span class="cm-variable">path_box_plot_folder</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">show</span>(<span class="cm-variable">dice_total_testing</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">###########################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">###########################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Function: generate_mosaics</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Goal: creates 3D Mosaics of the testing patients</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Input: user_id, img_wml, prediction_matrix_without_post_processing, prediction_matrix_with_post_processing</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Output: -</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">############################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">############################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">generate_mosaics</span>(<span class="cm-variable">user_id</span>, <span class="cm-variable">img_wml</span>, <span class="cm-variable">prediction_matrix_without_post_processing</span>, <span class="cm-variable">prediction_matrix_with_post_processing</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#3D mosaic img_wml1</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_temp</span> = <span class="cm-variable">img_wml</span>[<span class="cm-number">0</span>:<span class="cm-number">50</span>,:,:]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_wml1</span> = <span class="cm-variable">ianormalize</span>(<span class="cm-variable">iamosaic</span>(<span class="cm-variable">img_temp</span>,<span class="cm-number">5</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#3D mosaic img_wml2</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_temp</span> = <span class="cm-variable">img_wml</span>[<span class="cm-number">50</span>:<span class="cm-number">100</span>,:,:]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_wml2</span> = <span class="cm-variable">ianormalize</span>(<span class="cm-variable">iamosaic</span>(<span class="cm-variable">img_temp</span>,<span class="cm-number">5</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#3D mosaic img_wml3</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_temp</span> = <span class="cm-variable">img_wml</span>[<span class="cm-number">100</span>:,:,:]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_wml3</span> = <span class="cm-variable">ianormalize</span>(<span class="cm-variable">iamosaic</span>(<span class="cm-variable">img_temp</span>,<span class="cm-number">5</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#3D mosaic img_prediction1</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_temp</span> = <span class="cm-variable">prediction_matrix_without_post_processing</span>[<span class="cm-number">0</span>:<span class="cm-number">50</span>,:,:]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_prediction1</span> = <span class="cm-variable">ianormalize</span>(<span class="cm-variable">iamosaic</span>(<span class="cm-variable">img_temp</span>,<span class="cm-number">5</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#3D mosaic img_prediction2</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_temp</span> = <span class="cm-variable">prediction_matrix_without_post_processing</span>[<span class="cm-number">50</span>:<span class="cm-number">100</span>,:,:]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_prediction2</span> = <span class="cm-variable">ianormalize</span>(<span class="cm-variable">iamosaic</span>(<span class="cm-variable">img_temp</span>,<span class="cm-number">5</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#3D mosaic img_prediction3</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_temp</span> = <span class="cm-variable">prediction_matrix_without_post_processing</span>[<span class="cm-number">100</span>:,:,:]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_prediction3</span> = <span class="cm-variable">ianormalize</span>(<span class="cm-variable">iamosaic</span>(<span class="cm-variable">img_temp</span>,<span class="cm-number">5</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#3D mosaic img_prediction_pos1</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_temp</span> = <span class="cm-variable">prediction_matrix_with_post_processing</span>[<span class="cm-number">0</span>:<span class="cm-number">50</span>,:,:]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_prediction_pos1</span> = <span class="cm-variable">ianormalize</span>(<span class="cm-variable">iamosaic</span>(<span class="cm-variable">img_temp</span>,<span class="cm-number">5</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#3D mosaic img_prediction_pos2</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_temp</span> = <span class="cm-variable">prediction_matrix_with_post_processing</span>[<span class="cm-number">50</span>:<span class="cm-number">100</span>,:,:]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_prediction_pos2</span> = <span class="cm-variable">ianormalize</span>(<span class="cm-variable">iamosaic</span>(<span class="cm-variable">img_temp</span>,<span class="cm-number">5</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#3D mosaic img_prediction_pos3</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_temp</span> = <span class="cm-variable">prediction_matrix_with_post_processing</span>[<span class="cm-number">100</span>:,:,:]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_prediction_pos3</span> = <span class="cm-variable">ianormalize</span>(<span class="cm-variable">iamosaic</span>(<span class="cm-variable">img_temp</span>,<span class="cm-number">5</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">imshow</span>(<span class="cm-variable">img_wml1</span>, <span class="cm-variable">cmap</span>=<span class="cm-string">'Greys_r'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">title</span>(<span class="cm-string">" id "</span><span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>)<span class="cm-operator">+</span><span class="cm-string">" | wml1 0-50"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">savefig</span>(<span class="cm-variable">path_mosaics_folder</span><span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>)<span class="cm-operator">+</span><span class="cm-string">"/1)wml_0_50"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">imshow</span>(<span class="cm-variable">img_prediction1</span>, <span class="cm-variable">cmap</span>=<span class="cm-string">'Greys_r'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">title</span>(<span class="cm-string">" id "</span> <span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>)<span class="cm-operator">+</span> <span class="cm-string">" | img prediction 1 without post-processing 1 0-50"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">savefig</span>(<span class="cm-variable">path_mosaics_folder</span><span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>)<span class="cm-operator">+</span><span class="cm-string">"/2)prediction_without_post_0_50"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">imshow</span>(<span class="cm-variable">img_prediction_pos1</span>, <span class="cm-variable">cmap</span>=<span class="cm-string">'Greys_r'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">title</span>(<span class="cm-string">" id "</span> <span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>)<span class="cm-operator">+</span> <span class="cm-string">" | img prediction 1 with post-processing 0-50"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">savefig</span>(<span class="cm-variable">path_mosaics_folder</span><span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>)<span class="cm-operator">+</span><span class="cm-string">"/3)prediction_with_post_0_50"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">imshow</span>(<span class="cm-variable">img_wml2</span>, <span class="cm-variable">cmap</span>=<span class="cm-string">'Greys_r'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">title</span>(<span class="cm-string">" id "</span> <span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>)<span class="cm-operator">+</span> <span class="cm-string">" | wml2 50-100"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">savefig</span>(<span class="cm-variable">path_mosaics_folder</span><span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>)<span class="cm-operator">+</span><span class="cm-string">"/4)wml_50_100"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">imshow</span>(<span class="cm-variable">img_prediction2</span>, <span class="cm-variable">cmap</span>=<span class="cm-string">'Greys_r'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">title</span>(<span class="cm-string">" id "</span> <span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>)<span class="cm-operator">+</span> <span class="cm-string">" | img prediction 2 without post-processing 50-100"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">savefig</span>(<span class="cm-variable">path_mosaics_folder</span><span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>)<span class="cm-operator">+</span><span class="cm-string">"/5)prediction_without_post_50_100"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">imshow</span>(<span class="cm-variable">img_prediction_pos2</span>, <span class="cm-variable">cmap</span>=<span class="cm-string">'Greys_r'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">title</span>(<span class="cm-string">" id "</span> <span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>)<span class="cm-operator">+</span> <span class="cm-string">" | img prediction 2 with post-processing 50-100"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">savefig</span>(<span class="cm-variable">path_mosaics_folder</span><span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>)<span class="cm-operator">+</span><span class="cm-string">"/6)prediction_with_post_50_100"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">imshow</span>(<span class="cm-variable">img_wml3</span>, <span class="cm-variable">cmap</span>=<span class="cm-string">'Greys_r'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">title</span>(<span class="cm-string">" id "</span> <span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>)<span class="cm-operator">+</span> <span class="cm-string">" | wml3 100-154"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">savefig</span>(<span class="cm-variable">path_mosaics_folder</span><span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>)<span class="cm-operator">+</span><span class="cm-string">"/7)wml_100_154"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">imshow</span>(<span class="cm-variable">img_prediction3</span>, <span class="cm-variable">cmap</span>=<span class="cm-string">'Greys_r'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">title</span>(<span class="cm-string">" id "</span> <span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>)<span class="cm-operator">+</span> <span class="cm-string">" | img prediction 3 without post-processing 100-154"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">savefig</span>(<span class="cm-variable">path_mosaics_folder</span><span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>)<span class="cm-operator">+</span><span class="cm-string">"/8)rediction_without_post_100_154"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">imshow</span>(<span class="cm-variable">img_prediction_pos3</span>, <span class="cm-variable">cmap</span>=<span class="cm-string">'Greys_r'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">title</span>(<span class="cm-string">" id "</span> <span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>)<span class="cm-operator">+</span> <span class="cm-string">" | img prediction 3 with post-processing 100-154"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">savefig</span>(<span class="cm-variable">path_mosaics_folder</span><span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>)<span class="cm-operator">+</span><span class="cm-string">"/9)prediction_with_post_100_154"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">######################################################################################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">######################################################################################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Function: generate_color_maps</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Goal: generates color map of the desired slice of a patient</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Input: user_id, img_org, img_wml, prediction_probability_matrix, prediction_matrix_without_post_processing, prediction_matrix_with_post_processing, desired_slice</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Output: -</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#######################################################################################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#######################################################################################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">generate_color_maps</span>(<span class="cm-variable">user_id</span>, <span class="cm-variable">img_org</span>, <span class="cm-variable">img_wml</span>, <span class="cm-variable">prediction_probability_matrix</span>, <span class="cm-variable">prediction_matrix_without_post_processing</span>, <span class="cm-variable">prediction_matrix_with_post_processing</span>, <span class="cm-variable">desired_slice</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">imshow</span>(<span class="cm-variable">img_org</span>[<span class="cm-variable">desired_slice</span>], <span class="cm-variable">cmap</span>=<span class="cm-string">'Greys_r'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">title</span>(<span class="cm-string">"Original Image"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">savefig</span>(<span class="cm-variable">path_color_maps_folder</span><span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>)<span class="cm-operator">+</span><span class="cm-string">"/"</span><span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">desired_slice</span>)<span class="cm-operator">+</span><span class="cm-string">"/Original Image"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">imshow</span>(<span class="cm-variable">img_wml</span>[<span class="cm-variable">desired_slice</span>], <span class="cm-variable">cmap</span>=<span class="cm-string">'Greys_r'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">title</span>(<span class="cm-string">"WML Image"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">savefig</span>(<span class="cm-variable">path_color_maps_folder</span><span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>)<span class="cm-operator">+</span><span class="cm-string">"/"</span><span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">desired_slice</span>)<span class="cm-operator">+</span><span class="cm-string">"/WML Image"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">imshow</span>(<span class="cm-variable">prediction_matrix_without_post_processing</span>[<span class="cm-variable">desired_slice</span>], <span class="cm-variable">cmap</span>=<span class="cm-string">'Greys_r'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">title</span>(<span class="cm-string">"Prediction without post-processing"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">savefig</span>(<span class="cm-variable">path_color_maps_folder</span><span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>)<span class="cm-operator">+</span><span class="cm-string">"/"</span><span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">desired_slice</span>)<span class="cm-operator">+</span><span class="cm-string">"/Prediction without post-processing"</span>)</span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">imshow</span>(<span class="cm-variable">prediction_matrix_with_post_processing</span>[<span class="cm-variable">desired_slice</span>], <span class="cm-variable">cmap</span>=<span class="cm-string">'Greys_r'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">title</span>(<span class="cm-string">"Prediction with post-processing"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">savefig</span>(<span class="cm-variable">path_color_maps_folder</span><span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>)<span class="cm-operator">+</span><span class="cm-string">"/"</span><span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">desired_slice</span>)<span class="cm-operator">+</span><span class="cm-string">"/Prediction with post-processing"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">imshow</span>(<span class="cm-number">1.0</span><span class="cm-operator">*</span><span class="cm-variable">prediction_probability_matrix</span>[<span class="cm-variable">desired_slice</span>]<span class="cm-operator">/</span><span class="cm-variable">prediction_probability_matrix</span>[<span class="cm-variable">desired_slice</span>].<span class="cm-property">max</span>())</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">colorbar</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">title</span>(<span class="cm-string">"Color Probability"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">savefig</span>(<span class="cm-variable">path_color_maps_folder</span><span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>)<span class="cm-operator">+</span><span class="cm-string">"/"</span><span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">desired_slice</span>)<span class="cm-operator">+</span><span class="cm-string">"/Color Probability"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">######################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">######################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Function: generate_slice_post_processing</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Goal: performs post-processing on a slice of the prediction matrix</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Input: prediction_slice_matrix</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Output: slice_prediction_matrix_with_post_processing</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">######################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">######################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">generate_slice_post_processing</span>(<span class="cm-variable">prediction_slice_matrix</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#copies slice</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">slice_prediction_matrix_with_post_processing</span> = <span class="cm-variable">prediction_slice_matrix</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#connects regions disconnected by a maximum amount of the specified number of pixels</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">slice_prediction_matrix_with_post_processing</span> = <span class="cm-variable">iaareaclose</span>(<span class="cm-variable">slice_prediction_matrix_with_post_processing</span>,<span class="cm-variable">size_closed_area</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#the method ignores regions with less than a specified number of pixels of lesion</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">slice_prediction_matrix_with_post_processing</span> = <span class="cm-variable">iaareaopen</span>(<span class="cm-variable">slice_prediction_matrix_with_post_processing</span>,<span class="cm-variable">size_opened_area</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#the method ignores regions that do not fit on a unitary radius disk</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">prob_mask_pred</span> = <span class="cm-variable">slice_prediction_matrix_with_post_processing</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">mask_pred_label</span> = <span class="cm-variable">ialabel</span>(<span class="cm-variable">slice_prediction_matrix_with_post_processing</span>)  <span class="cm-comment"># separate lesions</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">nrois</span> = <span class="cm-builtin">len</span>(<span class="cm-variable">np</span>.<span class="cm-property">unique</span>(<span class="cm-variable">mask_pred_label</span>))<span class="cm-operator">-</span><span class="cm-number">1</span> <span class="cm-comment"># background</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> <span class="cm-variable">id_les</span> <span class="cm-keyword">in</span> <span class="cm-variable">arange</span>(<span class="cm-number">0</span>,<span class="cm-variable">nrois</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">roi</span> = <span class="cm-variable">zeros_like</span>(<span class="cm-variable">slice_prediction_matrix_with_post_processing</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">roi</span>[<span class="cm-variable">mask_pred_label</span>==<span class="cm-variable">id_les</span><span class="cm-operator">+</span><span class="cm-number">1</span>] = <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">prob_mask_pred</span>[<span class="cm-variable">roi</span><span class="cm-operator">&gt;</span><span class="cm-number">0</span>] = <span class="cm-variable">prob_mask_pred</span>[<span class="cm-variable">roi</span><span class="cm-operator">&gt;</span><span class="cm-number">0</span>].<span class="cm-property">mean</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#if it fits on a unitary radius disk</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> <span class="cm-variable">iadist</span>(<span class="cm-variable">roi</span><span class="cm-operator">&gt;</span><span class="cm-number">0</span>,<span class="cm-variable">iasedisk</span>(<span class="cm-number">1</span>),<span class="cm-string">'EUCLIDEAN'</span>).<span class="cm-property">max</span>()<span class="cm-operator">&lt;</span><span class="cm-number">2</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">slice_prediction_matrix_with_post_processing</span>[<span class="cm-variable">roi</span>]=<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-variable">slice_prediction_matrix_with_post_processing</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#################################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#################################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Function: read_dcm</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Goal: reads and returns Dicom images (original, wm mask and wml mask)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Input: user_id (id do paciente)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Output: img_org, img_wm, img_wml</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#################################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#################################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">read_dcm</span>(<span class="cm-variable">user_id</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">filename_img</span> = (<span class="cm-string">"%s/%d/FLAIR.dcm"</span> <span class="cm-operator">%</span> (<span class="cm-variable">path_miccai_images_folder</span>, <span class="cm-variable">user_id</span>)) <span class="cm-comment">#3D original image</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">dataset_img</span> = <span class="cm-variable">dicom</span>.<span class="cm-property">read_file</span>(<span class="cm-variable">filename_img</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_org</span> = <span class="cm-variable">dataset_img</span>.<span class="cm-property">pixel_array</span>.<span class="cm-property">astype</span>(<span class="cm-builtin">float</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">filename_wml</span> = (<span class="cm-string">"%s/%d/WML.dcm"</span> <span class="cm-operator">%</span> (<span class="cm-variable">path_miccai_images_folder</span>, <span class="cm-variable">user_id</span>)) <span class="cm-comment">#3D image with lesions</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">dataset_wml</span> = <span class="cm-variable">dicom</span>.<span class="cm-property">read_file</span>(<span class="cm-variable">filename_wml</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_wml</span> = <span class="cm-variable">dataset_wml</span>.<span class="cm-property">pixel_array</span>.<span class="cm-property">astype</span>(<span class="cm-builtin">bool</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_wm</span> = (<span class="cm-variable">np</span>.<span class="cm-property">zeros_like</span>(<span class="cm-variable">img_org</span>)).<span class="cm-property">astype</span>(<span class="cm-builtin">bool</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> <span class="cm-variable">current_slice</span> <span class="cm-keyword">in</span> <span class="cm-builtin">range</span> (<span class="cm-variable">img_wm</span>.<span class="cm-property">shape</span>[<span class="cm-number">0</span>]):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">filename_wm</span> = (<span class="cm-string">"%s/%d/WM-mask/IM-0001-%04d.dcm"</span> <span class="cm-operator">%</span> (<span class="cm-variable">path_miccai_images_folder</span>, <span class="cm-variable">user_id</span>, (<span class="cm-variable">current_slice</span><span class="cm-operator">+</span><span class="cm-number">1</span>)))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">dataset_wm</span> = <span class="cm-variable">dicom</span>.<span class="cm-property">read_file</span>(<span class="cm-variable">filename_wm</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_wm</span>[<span class="cm-variable">current_slice</span>] = <span class="cm-variable">dataset_wm</span>.<span class="cm-property">pixel_array</span>.<span class="cm-property">astype</span>(<span class="cm-builtin">bool</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> (<span class="cm-variable">img_org</span>, <span class="cm-variable">img_wm</span>, <span class="cm-variable">img_wml</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">##############################################################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">##############################################################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Function: extract_attributes_slice</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Goal: extract attributes of a given slice of a given patient</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Input: user_id, flag_training_or_testing, img_org, img_wm, slice_wml, current_slice, slices</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Output: data_userid_slice, n_pixels_wml_slice, n_pixels_used_wm_not_wml_slice, n_total_pixels_wm_slice</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">##############################################################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">##############################################################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">extract_attributes_slice</span> (<span class="cm-variable">user_id</span>, <span class="cm-variable">flag_training_or_testing</span>, <span class="cm-variable">img_org</span>, <span class="cm-variable">img_wm</span>, <span class="cm-variable">slice_wml</span>, <span class="cm-variable">current_slice</span>, <span class="cm-variable">slices</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#initialize variables</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data_userid_slice</span> = []</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">n_pixels_wml_slice</span>=<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">n_pixels_used_wm_not_wml_slice</span>=<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">n_total_pixels_wm_slice</span>=<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#analyse an individual slices</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">slice_org</span> = <span class="cm-variable">img_org</span>[<span class="cm-variable">current_slice</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">slice_maskwm</span> = <span class="cm-variable">img_wm</span>[<span class="cm-variable">current_slice</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#features</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">lbp_img</span> = <span class="cm-variable">local_binary_pattern</span>(<span class="cm-variable">slice_org</span>, <span class="cm-variable">n_points</span>, <span class="cm-variable">radius</span>, <span class="cm-variable">method</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">grad_img</span> = <span class="cm-variable">gradimg</span>(<span class="cm-variable">slice_org</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">mgrad_img</span> = <span class="cm-variable">iagradm</span>(<span class="cm-variable">slice_org</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#training</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">flag_training_or_testing</span> == <span class="cm-number">0</span>):</span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#pre-processing<span class="cm-tab" role="presentation" cm-text="	"> </span></span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#ignores pixels where intensity&lt;wmmean</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#ignores pixels where there are less than "method_threshold" concatenated pixels</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">mean_wm</span> = <span class="cm-variable">slice_org</span>[<span class="cm-variable">slice_maskwm</span>==<span class="cm-number">1</span>].<span class="cm-property">mean</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">slice_maskwm2</span> = <span class="cm-variable">logical_and</span>(<span class="cm-variable">iaareaopen</span>((<span class="cm-variable">slice_org</span><span class="cm-operator">&gt;</span><span class="cm-variable">mean_wm</span>),<span class="cm-variable">method_threshold</span>),<span class="cm-variable">slice_maskwm</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#pre-processing to possibly reduce the number of wm_nao_wml pixels</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#Modo 0 ou 1</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">operation_mode</span> == <span class="cm-number">0</span> <span class="cm-keyword">or</span> <span class="cm-variable">operation_mode</span> == <span class="cm-number">1</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">wm_nao_wml</span> = <span class="cm-variable">slice_maskwm2</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#mode 2</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">elif</span> (<span class="cm-variable">operation_mode</span> == <span class="cm-number">2</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#dilation of wml using a cross of size 2</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">cross2</span> = <span class="cm-variable">iasecross</span>(<span class="cm-variable">size_cross_2</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">wm_nao_wml</span> = <span class="cm-variable">iasubm</span>(<span class="cm-variable">slice_maskwm2</span>, <span class="cm-variable">iadil</span>(<span class="cm-variable">slice_wml</span><span class="cm-operator">&gt;</span><span class="cm-number">0</span>,<span class="cm-variable">cross2</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#mode 3</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">elif</span> (<span class="cm-variable">operation_mode</span> == <span class="cm-number">3</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#erosion of wml using a cross of size 1</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">cross1</span> = <span class="cm-variable">iasecross</span>(<span class="cm-variable">size_cross_1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">wm_nao_wml</span> = <span class="cm-variable">iaero</span>(<span class="cm-variable">slice_maskwm2</span>,<span class="cm-variable">cross1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#mode 4</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">elif</span> (<span class="cm-variable">operation_mode</span> == <span class="cm-number">4</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#dilation of wml using a cross of size 2</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#erosion of wml using a cross of size 1</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">cross2</span> = <span class="cm-variable">iasecross</span>(<span class="cm-variable">size_cross_2</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">cross1</span> = <span class="cm-variable">iasecross</span>(<span class="cm-variable">size_cross_1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">wm_nao_wml</span> = <span class="cm-variable">iasubm</span>(<span class="cm-variable">iaero</span>(<span class="cm-variable">slice_maskwm2</span>,<span class="cm-variable">cross1</span>), <span class="cm-variable">iadil</span>(<span class="cm-variable">slice_wml</span><span class="cm-operator">&gt;</span><span class="cm-number">0</span>,<span class="cm-variable">cross2</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#creates a list with wm pixels after pre-processing<span class="cm-tab" role="presentation" cm-text="	"> </span></span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ind_class</span> = <span class="cm-variable">argwhere</span>(<span class="cm-variable">slice_maskwm2</span> == <span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> <span class="cm-variable">ind_mask</span> <span class="cm-keyword">in</span> <span class="cm-builtin">xrange</span>(<span class="cm-builtin">len</span>(<span class="cm-variable">ind_class</span>)):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">x</span> = <span class="cm-variable">ind_class</span>[<span class="cm-variable">ind_mask</span>,<span class="cm-number">0</span>] <span class="cm-comment">#coordeinate x of the pixels in the mask of wm validated</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y</span> = <span class="cm-variable">ind_class</span>[<span class="cm-variable">ind_mask</span>,<span class="cm-number">1</span>] <span class="cm-comment">#coordinate y of the pixels in the mask of wml validated</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>   </span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-null cm-error"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#total number of pixels wm</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">n_total_pixels_wm_slice</span>+=<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#data paremeters:</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#[user id, current_slice, x, y, intensity, inferior slice intensity, superior slice intensity, lbp, grad, mgrad, average]</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#if the pixel represents a lesion</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">slice_wml</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>] <span class="cm-operator">&gt;</span> <span class="cm-number">0.5</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">n_pixels_wml_slice</span>+=<span class="cm-number">1</span> <span class="cm-comment">#number of lesions</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#inferior slice</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">current_slice</span>==<span class="cm-number">0</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>   <span class="cm-variable cm-error">data_userid_slice</span>.<span class="cm-property">append</span>([<span class="cm-variable">user_id</span>,<span class="cm-variable">current_slice</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>,<span class="cm-variable">slice_org</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">slice_org</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">img_org</span>[<span class="cm-variable">current_slice</span><span class="cm-operator">+</span><span class="cm-number">1</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">lbp_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">grad_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">mgrad_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">mean_wm</span>,<span class="cm-number">1</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#superior slice</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">elif</span> (<span class="cm-variable">current_slice</span>==(<span class="cm-variable">slices</span><span class="cm-operator">-</span><span class="cm-number">1</span>)):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>   <span class="cm-variable cm-error">data_userid_slice</span>.<span class="cm-property">append</span>([<span class="cm-variable">user_id</span>,<span class="cm-variable">current_slice</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>,<span class="cm-variable">slice_org</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">img_org</span>[<span class="cm-variable">current_slice</span><span class="cm-operator">-</span><span class="cm-number">1</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">slice_org</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">lbp_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">grad_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">mgrad_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">mean_wm</span>,<span class="cm-number">1</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  <span class="cm-variable cm-error">data_userid_slice</span>.<span class="cm-property">append</span>([<span class="cm-variable">user_id</span>,<span class="cm-variable">current_slice</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>,<span class="cm-variable">slice_org</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">img_org</span>[<span class="cm-variable">current_slice</span><span class="cm-operator">-</span><span class="cm-number">1</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">img_org</span>[<span class="cm-variable">current_slice</span><span class="cm-operator">+</span><span class="cm-number">1</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">lbp_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">grad_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">mgrad_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">mean_wm</span>,<span class="cm-number">1</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#if the pixel does not represents a lesion</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#it only considers the pixel if it is in the area defined by wm_nao_wml</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">wm_nao_wml</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>]):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">n_pixels_used_wm_not_wml_slice</span>+=<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#inferior slice</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">current_slice</span>==<span class="cm-number">0</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data_userid_slice</span>.<span class="cm-property">append</span>([<span class="cm-variable">user_id</span>,<span class="cm-variable">current_slice</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>,<span class="cm-variable">slice_org</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">slice_org</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">img_org</span>[<span class="cm-variable">current_slice</span><span class="cm-operator">+</span><span class="cm-number">1</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">lbp_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">grad_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">mgrad_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">mean_wm</span>,<span class="cm-number">1</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#superior slice</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">elif</span> (<span class="cm-variable">current_slice</span>==(<span class="cm-variable">slices</span><span class="cm-operator">-</span><span class="cm-number">1</span>)):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>   <span class="cm-variable cm-error">data_userid_slice</span>.<span class="cm-property">append</span>([<span class="cm-variable">user_id</span>,<span class="cm-variable">current_slice</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>,<span class="cm-variable">slice_org</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">img_org</span>[<span class="cm-variable">current_slice</span><span class="cm-operator">-</span><span class="cm-number">1</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">slice_org</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">lbp_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">grad_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">mgrad_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">mean_wm</span>,<span class="cm-number">0</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>   <span class="cm-variable cm-error">data_userid_slice</span>.<span class="cm-property">append</span>([<span class="cm-variable">user_id</span>,<span class="cm-variable">current_slice</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>,<span class="cm-variable">slice_org</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">img_org</span>[<span class="cm-variable">current_slice</span><span class="cm-operator">-</span><span class="cm-number">1</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">img_org</span>[<span class="cm-variable">current_slice</span><span class="cm-operator">+</span><span class="cm-number">1</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">lbp_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">grad_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">mgrad_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">mean_wm</span>,<span class="cm-number">0</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> (<span class="cm-variable">data_userid_slice</span>, <span class="cm-variable">n_pixels_wml_slice</span>, <span class="cm-variable">n_pixels_used_wm_not_wml_slice</span>, <span class="cm-variable">n_total_pixels_wm_slice</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">elif</span> (<span class="cm-variable">flag_training_or_testing</span> == <span class="cm-number">1</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#pre-processing</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#eliminates pixels where intensity&lt;wmmean</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#eliminates regions where there are less than 10 concatenated pixels</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">mean_wm</span> = <span class="cm-variable">slice_org</span>[<span class="cm-variable">slice_maskwm</span>==<span class="cm-number">1</span>].<span class="cm-property">mean</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">slice_maskwm2</span> = <span class="cm-variable">logical_and</span>(<span class="cm-variable">iaareaopen</span>(<span class="cm-variable">slice_org</span>,<span class="cm-variable">method_threshold</span>),<span class="cm-variable">slice_maskwm</span>)</span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#creates a list of wm pixels after the pre-processing</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ind_class</span> = <span class="cm-variable">argwhere</span>(<span class="cm-variable">slice_maskwm2</span> == <span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> <span class="cm-variable">ind_mask</span> <span class="cm-keyword">in</span> <span class="cm-builtin">xrange</span>(<span class="cm-builtin">len</span>(<span class="cm-variable">ind_class</span>)):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">x</span> = <span class="cm-variable">ind_class</span>[<span class="cm-variable">ind_mask</span>,<span class="cm-number">0</span>] <span class="cm-comment">#x coordinate of the do pixel na máscara de wm válidos</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y</span> = <span class="cm-variable">ind_class</span>[<span class="cm-variable">ind_mask</span>,<span class="cm-number">1</span>] <span class="cm-comment">#y coordinate of the y do pixel na máscara de wm válidos</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>   </span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-null cm-error"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#number of wm pixels</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">n_total_pixels_wm_slice</span>+=<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#data parameters:</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#[user id, current_slice, x, y, intensity, inferior slice intensity, superior slice intensity, lbp, grad, mgrad, average]</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#se o pixel for lesão</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">slice_wml</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>] <span class="cm-operator">&gt;</span> <span class="cm-number">0.5</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">n_pixels_wml_slice</span>+=<span class="cm-number">1</span> <span class="cm-comment">#number of lesions</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#slice de baixo</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">current_slice</span>==<span class="cm-number">0</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>   <span class="cm-variable cm-error">data_userid_slice</span>.<span class="cm-property">append</span>([<span class="cm-variable">user_id</span>,<span class="cm-variable">current_slice</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>,<span class="cm-variable">slice_org</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">slice_org</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">img_org</span>[<span class="cm-builtin">slice</span><span class="cm-operator">+</span><span class="cm-number">1</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">lbp_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">grad_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">mgrad_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">mean_wm</span>,<span class="cm-number">1</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#slice de cima</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">elif</span> (<span class="cm-variable">current_slice</span>==(<span class="cm-variable">slices</span><span class="cm-operator">-</span><span class="cm-number">1</span>)):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>   <span class="cm-variable cm-error">data_userid_slice</span>.<span class="cm-property">append</span>([<span class="cm-variable">user_id</span>,<span class="cm-variable">current_slice</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>,<span class="cm-variable">slice_org</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">img_org</span>[<span class="cm-variable">current_slice</span><span class="cm-operator">-</span><span class="cm-number">1</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">slice_org</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">lbp_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">grad_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">mgrad_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">mean_wm</span>,<span class="cm-number">1</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>  <span class="cm-variable cm-error">data_userid_slice</span>.<span class="cm-property">append</span>([<span class="cm-variable">user_id</span>,<span class="cm-variable">current_slice</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>,<span class="cm-variable">slice_org</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">img_org</span>[<span class="cm-variable">current_slice</span><span class="cm-operator">-</span><span class="cm-number">1</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">img_org</span>[<span class="cm-variable">current_slice</span><span class="cm-operator">+</span><span class="cm-number">1</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">lbp_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">grad_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">mgrad_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">mean_wm</span>,<span class="cm-number">1</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#se o pixel não for lesão</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">n_pixels_used_wm_not_wml_slice</span>+=<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#slice de baixo</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">current_slice</span>==<span class="cm-number">0</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data_userid_slice</span>.<span class="cm-property">append</span>([<span class="cm-variable">user_id</span>,<span class="cm-variable">current_slice</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>,<span class="cm-variable">slice_org</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">slice_org</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">img_org</span>[<span class="cm-builtin">slice</span><span class="cm-operator">+</span><span class="cm-number">1</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">lbp_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">grad_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">mgrad_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">mean_wm</span>,<span class="cm-number">1</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#slice de cima</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">elif</span> (<span class="cm-variable">current_slice</span>==(<span class="cm-variable">slices</span><span class="cm-operator">-</span><span class="cm-number">1</span>)):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>   <span class="cm-variable cm-error">data_userid_slice</span>.<span class="cm-property">append</span>([<span class="cm-variable">user_id</span>,<span class="cm-variable">current_slice</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>,<span class="cm-variable">slice_org</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">img_org</span>[<span class="cm-variable">current_slice</span><span class="cm-operator">-</span><span class="cm-number">1</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">slice_org</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">lbp_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">grad_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">mgrad_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">mean_wm</span>,<span class="cm-number">0</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>   <span class="cm-variable cm-error">data_userid_slice</span>.<span class="cm-property">append</span>([<span class="cm-variable">user_id</span>,<span class="cm-variable">current_slice</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>,<span class="cm-variable">slice_org</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">img_org</span>[<span class="cm-variable">current_slice</span><span class="cm-operator">-</span><span class="cm-number">1</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">img_org</span>[<span class="cm-variable">current_slice</span><span class="cm-operator">+</span><span class="cm-number">1</span>,<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">lbp_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">grad_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">mgrad_img</span>[<span class="cm-variable">x</span>,<span class="cm-variable">y</span>],<span class="cm-variable">mean_wm</span>,<span class="cm-number">0</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> (<span class="cm-variable">data_userid_slice</span>, <span class="cm-variable">n_pixels_wml_slice</span>, <span class="cm-variable">n_pixels_used_wm_not_wml_slice</span>, <span class="cm-variable">n_total_pixels_wm_slice</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">sys</span>.<span class="cm-property">exit</span>(<span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">##########################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">##########################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Function: calculate_dice_slice</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Goal: calculates the dice coefficient for a given slice</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Input: img_wml_slice, prediction_slice_matrix</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Output: ds (dice of a slice)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">##########################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">##########################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">calculate_dice_slice</span>(<span class="cm-variable">img_wml_slice</span>, <span class="cm-variable">prediction_slice_matrix</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#calculates dividend and divider using the standard dice formula</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">dividend</span> = (<span class="cm-number">1.0</span><span class="cm-operator">*</span>(<span class="cm-variable">logical_and</span>(<span class="cm-variable">img_wml_slice</span>,(<span class="cm-variable">prediction_slice_matrix</span>)).<span class="cm-property">sum</span>()))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">divider</span> = (<span class="cm-number">1.0</span><span class="cm-operator">*</span>((<span class="cm-variable">img_wml_slice</span>.<span class="cm-property">sum</span>()<span class="cm-operator">+</span>(<span class="cm-variable">prediction_slice_matrix</span>).<span class="cm-property">sum</span>())))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">divider</span> == <span class="cm-number">0</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ds</span> = <span class="cm-number">0.0</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ds</span> = <span class="cm-number">2.0</span><span class="cm-operator">*</span>(<span class="cm-variable">dividend</span><span class="cm-operator">/</span><span class="cm-variable">divider</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#print "%s" % (ds)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-variable">ds</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#############################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#############################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Function: extract_attributes_training</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Goal: extract attributes for a patient</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Input: user_id</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Output: data_userid</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#############################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#############################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">extract_attributes_training</span>(<span class="cm-variable">user_id</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_org</span>, <span class="cm-variable">img_wm</span>, <span class="cm-variable">img_wml</span> = <span class="cm-variable">read_dcm</span>(<span class="cm-variable">user_id</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">slices</span> = <span class="cm-variable">img_org</span>.<span class="cm-property">shape</span>[<span class="cm-number">0</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#training</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">flag_training_or_testing</span> = <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#initialize variables</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">n_pixels_wml</span> = <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">n_pixels_used_wm_not_wml</span> = <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">n_total_pixels_wm</span> = <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#user_id data</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data_userid</span> = []</span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_org</span>, <span class="cm-variable">img_wm</span>, <span class="cm-variable">img_wml</span> = <span class="cm-variable">generate_images_pre_processing</span>(<span class="cm-variable">img_org</span>, <span class="cm-variable">img_wm</span>, <span class="cm-variable">img_wml</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> <span class="cm-variable">current_slice</span> <span class="cm-keyword">in</span> <span class="cm-builtin">xrange</span>(<span class="cm-variable">slices</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#ignores regions with less than a specified number of pixels of lesion (prediction_matrix)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">slice_wml</span> = <span class="cm-variable">iaareaopen</span>(<span class="cm-variable">img_wml</span>[<span class="cm-variable">current_slice</span>],<span class="cm-variable">method_threshold</span>)</span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#ignores regions that do not fit on a unitary radius disk</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">prob_mask_pred</span> = <span class="cm-variable">slice_wml</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">mask_pred_label</span> = <span class="cm-variable">ialabel</span>(<span class="cm-variable">slice_wml</span>)  <span class="cm-comment"># mask with lesions</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">nrois</span> = <span class="cm-builtin">len</span>(<span class="cm-variable">np</span>.<span class="cm-property">unique</span>(<span class="cm-variable">mask_pred_label</span>))<span class="cm-operator">-</span><span class="cm-number">1</span> <span class="cm-comment"># background</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> <span class="cm-variable">id_les</span> <span class="cm-keyword">in</span> <span class="cm-variable">arange</span>(<span class="cm-number">0</span>,<span class="cm-variable">nrois</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">roi</span> = <span class="cm-variable">zeros_like</span>(<span class="cm-variable">slice_wml</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">roi</span>[<span class="cm-variable">mask_pred_label</span>==<span class="cm-variable">id_les</span><span class="cm-operator">+</span><span class="cm-number">1</span>] = <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">prob_mask_pred</span>[<span class="cm-variable">roi</span><span class="cm-operator">&gt;</span><span class="cm-number">0</span>] = <span class="cm-variable">prob_mask_pred</span>[<span class="cm-variable">roi</span><span class="cm-operator">&gt;</span><span class="cm-number">0</span>].<span class="cm-property">mean</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> <span class="cm-variable">iadist</span>(<span class="cm-variable">roi</span><span class="cm-operator">&gt;</span><span class="cm-number">0</span>,<span class="cm-variable">iasedisk</span>(<span class="cm-number">1</span>),<span class="cm-string">'EUCLIDEAN'</span>).<span class="cm-property">max</span>()<span class="cm-operator">&lt;</span><span class="cm-number">2</span>: <span class="cm-comment"># se cabe um disco de raio unitário</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">slice_wml</span>[<span class="cm-variable">roi</span>]=<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#updates slice</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_wml</span>[<span class="cm-variable">current_slice</span>] = <span class="cm-variable">slice_wml</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#if there are lesion pixels</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">slice_wml</span>.<span class="cm-property">sum</span>() <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data_userid_slice</span>, <span class="cm-variable">n_pixels_wml_slice</span>, <span class="cm-variable">n_pixels_used_wm_not_wml_slice</span>, <span class="cm-variable">n_total_pixels_wm_slice</span> = <span class="cm-variable">extract_attributes_slice</span> (<span class="cm-variable">user_id</span>, <span class="cm-variable">flag_training_or_testing</span>, <span class="cm-variable">img_org</span>, <span class="cm-variable">img_wm</span>, <span class="cm-variable">slice_wml</span>, <span class="cm-variable">current_slice</span>, <span class="cm-variable">slices</span>)</span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-builtin">len</span>(<span class="cm-variable">data_userid_slice</span>) <span class="cm-operator">!</span>= <span class="cm-number">0</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data_userid</span> += <span class="cm-variable">data_userid_slice</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">n_pixels_wml</span> += <span class="cm-variable">n_pixels_wml_slice</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">n_pixels_used_wm_not_wml</span> += <span class="cm-variable">n_pixels_used_wm_not_wml_slice</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">n_total_pixels_wm</span> += <span class="cm-variable">n_total_pixels_wm_slice</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#prints data about the pixels</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"Patient ID: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write</span>(<span class="cm-string">"Number of wml Pixels: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">n_pixels_wml</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write</span>(<span class="cm-string">"Number of wm and not wml Pixels: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">n_pixels_used_wm_not_wml</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write</span>(<span class="cm-string">"Number of wm Pixels: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">n_total_pixels_wm</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"Number of Pixels in the image: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">slices</span><span class="cm-operator">*</span><span class="cm-variable">size_slice</span><span class="cm-operator">*</span><span class="cm-variable">size_slice</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#adds user id data to total data</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-variable">data_userid</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">###########################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">###########################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Function: perform_parallel_training</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Goal: extracts data for the patients in the training set</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Input: id_list</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Output: data (lista 2D (Nx12) contendo atributos)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">###########################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">###########################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">perform_parallel_training</span>(<span class="cm-variable">id_list</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#prints operation mode (flag)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"Operation mode: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">operation_mode</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data_array_return</span> = <span class="cm-variable">Parallel</span>(<span class="cm-variable">n_jobs</span>=<span class="cm-variable">num_cores</span>)(<span class="cm-variable">delayed</span>(<span class="cm-variable">extract_attributes_training</span>)(<span class="cm-variable">user_id</span>) <span class="cm-keyword">for</span> <span class="cm-variable">user_id</span> <span class="cm-keyword">in</span> <span class="cm-variable">id_list</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data</span> = []</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> <span class="cm-variable">data_element</span> <span class="cm-keyword">in</span> <span class="cm-variable">data_array_return</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data</span> = <span class="cm-variable">data</span> <span class="cm-operator">+</span> <span class="cm-variable">data_element</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#total number of wm pixels and wml pixels</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data</span> = <span class="cm-variable">np</span>.<span class="cm-property">array</span>(<span class="cm-variable">data</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data_wml</span> = <span class="cm-variable">data</span>[<span class="cm-variable">data</span>[:,<span class="cm-operator">-</span><span class="cm-number">1</span>]==<span class="cm-number">1</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data_nao_wml</span> = <span class="cm-variable">data</span>[<span class="cm-variable">data</span>[:,<span class="cm-operator">-</span><span class="cm-number">1</span>]==<span class="cm-number">0</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">n_pixels_wml</span> = <span class="cm-builtin">len</span>(<span class="cm-variable">data_wml</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">n_pixels_used_wm_not_wml</span> = <span class="cm-builtin">len</span>(<span class="cm-variable">data_nao_wml</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#if the mode is not 0</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#randomly reduces the set of pixels to fit the model</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">operation_mode</span> <span class="cm-operator">!</span>= <span class="cm-number">0</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#if the number of wml pixels is less than the desired amount</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">n_pixels_used_wm_not_wml</span> <span class="cm-operator">&gt;</span> <span class="cm-variable">number_times_wm_greater_than_wml</span><span class="cm-operator">*</span><span class="cm-variable">n_pixels_wml</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">number_desired_pixels_wm_and_not_wml</span> = (<span class="cm-variable">number_times_wm_greater_than_wml</span> <span class="cm-operator">*</span> <span class="cm-variable">n_pixels_wml</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data_nao_wml_randomized</span> = <span class="cm-variable">random</span>.<span class="cm-property">permutation</span>(<span class="cm-variable">data_nao_wml</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data_nao_wml</span> = <span class="cm-variable">data_nao_wml_randomized</span>[<span class="cm-number">0</span>:<span class="cm-variable">number_desired_pixels_wm_and_not_wml</span>]</span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">n_pixels_wml</span> = <span class="cm-builtin">len</span>(<span class="cm-variable">data_wml</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data</span> = <span class="cm-variable">concatenate</span>((<span class="cm-variable">data_wml</span>,<span class="cm-variable">data_nao_wml</span>), <span class="cm-variable">axis</span>=<span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data</span> = <span class="cm-variable">data</span>.<span class="cm-property">tolist</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#end of data processing</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#prints the results of the used pixels</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"End of the training:"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write</span>(<span class="cm-string">"Total number of pixels wml: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">n_pixels_wml</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"Total number of pixels wm and not wml: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">n_pixels_used_wm_not_wml</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#transform the date into a numpy array</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data</span> = <span class="cm-variable">np</span>.<span class="cm-property">array</span>(<span class="cm-variable">data</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#prints the size of the data</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write</span>(<span class="cm-string">"Size of data: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">data</span>.<span class="cm-property">shape</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#returns the data</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> <span class="cm-variable">data</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">################################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">################################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Function: extract_attributes_testing</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Goal: extracts data for the patients in the training set</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Input: id_list</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Output: slices, img_org, img_wml, data (lista 2D (Nx12) contendo atributos)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">################################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">################################################################################</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">extract_attributes_testing</span>(<span class="cm-variable">id_list</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data</span> = []</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#testing</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">flag_training_or_testing</span> = <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> <span class="cm-variable">user_id</span> <span class="cm-keyword">in</span> <span class="cm-variable">id_list</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_org</span>, <span class="cm-variable">img_wm</span>, <span class="cm-variable">img_wml</span> = <span class="cm-variable">read_dcm</span>(<span class="cm-variable">user_id</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">slices</span> = <span class="cm-variable">img_org</span>.<span class="cm-property">shape</span>[<span class="cm-number">0</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#initialize variables</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">n_pixels_wml</span> = <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">n_pixels_used_wm_not_wml</span> = <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">n_total_pixels_wm</span> = <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#analyse an individual slices</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data_userid</span> = []</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_org</span>, <span class="cm-variable">img_wm</span>, <span class="cm-variable">img_wml</span> = <span class="cm-variable">generate_images_pre_processing</span>(<span class="cm-variable">img_org</span>, <span class="cm-variable">img_wm</span>, <span class="cm-variable">img_wml</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> <span class="cm-variable">current_slice</span> <span class="cm-keyword">in</span> <span class="cm-builtin">xrange</span>(<span class="cm-variable">slices</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#the method ignores regions with less than a specified number of pixels of lesion (prediction_matrix)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">slice_wml</span> = <span class="cm-variable">iaareaopen</span>(<span class="cm-variable">img_wml</span>[<span class="cm-variable">current_slice</span>],<span class="cm-variable">method_threshold</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#the method ignores regions that do not fit on a unitary radius disk</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">prob_mask_pred</span> = <span class="cm-variable">slice_wml</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">mask_pred_label</span> = <span class="cm-variable">ialabel</span>(<span class="cm-variable">slice_wml</span>)  <span class="cm-comment"># mask with lesions</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">nrois</span> = <span class="cm-builtin">len</span>(<span class="cm-variable">np</span>.<span class="cm-property">unique</span>(<span class="cm-variable">mask_pred_label</span>))<span class="cm-operator">-</span><span class="cm-number">1</span> <span class="cm-comment"># background</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> <span class="cm-variable">id_les</span> <span class="cm-keyword">in</span> <span class="cm-variable">arange</span>(<span class="cm-number">0</span>,<span class="cm-variable">nrois</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">roi</span> = <span class="cm-variable">zeros_like</span>(<span class="cm-variable">slice_wml</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">roi</span>[<span class="cm-variable">mask_pred_label</span>==<span class="cm-variable">id_les</span><span class="cm-operator">+</span><span class="cm-number">1</span>] = <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">prob_mask_pred</span>[<span class="cm-variable">roi</span><span class="cm-operator">&gt;</span><span class="cm-number">0</span>] = <span class="cm-variable">prob_mask_pred</span>[<span class="cm-variable">roi</span><span class="cm-operator">&gt;</span><span class="cm-number">0</span>].<span class="cm-property">mean</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> <span class="cm-variable">iadist</span>(<span class="cm-variable">roi</span><span class="cm-operator">&gt;</span><span class="cm-number">0</span>,<span class="cm-variable">iasedisk</span>(<span class="cm-number">1</span>),<span class="cm-string">'EUCLIDEAN'</span>).<span class="cm-property">max</span>()<span class="cm-operator">&lt;</span><span class="cm-number">2</span>: <span class="cm-comment"># se cabe um disco de raio unitário</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">slice_wml</span>[<span class="cm-variable">roi</span>]=<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#updates slice</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_wml</span>[<span class="cm-variable">current_slice</span>] = <span class="cm-variable">slice_wml</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#if there are lesion pixels</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">slice_wml</span>.<span class="cm-property">sum</span>() <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data_userid_slice</span>, <span class="cm-variable">n_pixels_wml_slice</span>, <span class="cm-variable">n_pixels_used_wm_not_wml_slice</span>, <span class="cm-variable">n_total_pixels_wm_slice</span> = <span class="cm-variable">extract_attributes_slice</span> (<span class="cm-variable">user_id</span>, <span class="cm-variable">flag_training_or_testing</span>, <span class="cm-variable">img_org</span>, <span class="cm-variable">img_wm</span>, <span class="cm-variable">slice_wml</span>, <span class="cm-variable">current_slice</span>, <span class="cm-variable">slices</span>)</span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-builtin">len</span>(<span class="cm-variable">data_userid_slice</span>) <span class="cm-operator">!</span>= <span class="cm-number">0</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data_userid</span> += <span class="cm-variable">data_userid_slice</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">n_pixels_wml</span> += <span class="cm-variable">n_pixels_wml_slice</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">n_pixels_used_wm_not_wml</span> += <span class="cm-variable">n_pixels_used_wm_not_wml_slice</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">n_total_pixels_wm</span> += <span class="cm-variable">n_total_pixels_wm_slice</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-builtin">len</span>(<span class="cm-variable">data_userid</span>) == <span class="cm-number">0</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"ID "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>) <span class="cm-operator">+</span> <span class="cm-string">": There are no wml pixels after the pre-processing"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data</span>.<span class="cm-property">append</span>(<span class="cm-string">"nan"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#prints data about the pixels</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"Patient ID: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write</span>(<span class="cm-string">"Number of wml Pixels: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">n_pixels_wml</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write</span>(<span class="cm-string">"Number of wm and not wml Pixels: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">n_pixels_used_wm_not_wml</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write</span>(<span class="cm-string">"Number of wm Pixels: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">n_total_pixels_wm</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"Number of Pixels in the image: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">slices</span><span class="cm-operator">*</span><span class="cm-variable">size_slice</span><span class="cm-operator">*</span><span class="cm-variable">size_slice</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#adds user id data to total data</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data</span> = <span class="cm-variable">data</span> <span class="cm-operator">+</span> <span class="cm-variable">data_userid</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#end of data processing</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#prints the results of all pixels</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"End of testing for ID: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write</span>(<span class="cm-string">"Total of wml Pixels: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">n_pixels_wml</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"Total of wm and not wml Pixels: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">n_pixels_used_wm_not_wml</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#transform the data in a numpy array</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data</span> = <span class="cm-variable">np</span>.<span class="cm-property">array</span>(<span class="cm-variable">data</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#prints the size of the matrix</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write</span>(<span class="cm-string">"Size of data: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">data</span>.<span class="cm-property">shape</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#returns the data</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> (<span class="cm-variable">slices</span>, <span class="cm-variable">img_org</span>, <span class="cm-variable">img_wml</span>, <span class="cm-variable">data</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">######################################################################################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">######################################################################################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Function: perform_parallel_testing</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Goal: extract features, calculates accuracy, calculates dice with and without pos-processing and calls support functions</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Input: user_id, clf</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Output: user_id, accuracy, average_dice_without_post, dice_std_sem_pos, average_dice_with_post, dice_std_com_pos</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">######################################################################################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">######################################################################################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">perform_parallel_testing</span>(<span class="cm-variable">user_id</span>, <span class="cm-variable">clf1</span>, <span class="cm-variable">clf2</span>, <span class="cm-variable">clf3</span>, <span class="cm-variable">algorithm</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">list_user_id_testing</span> = [<span class="cm-variable">user_id</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#extract features</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">slices</span>, <span class="cm-variable">img_org</span>, <span class="cm-variable">img_wml</span>, <span class="cm-variable">data_testing</span> = <span class="cm-variable">extract_attributes_testing</span>(<span class="cm-variable">list_user_id_testing</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">data_testing</span>[<span class="cm-number">0</span>] == <span class="cm-string">"nan"</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"User ID: "</span> <span class="cm-operator">+</span>  <span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>) <span class="cm-operator">+</span> <span class="cm-string">" | There are no wml Pixels after the pre-processment"</span>)</span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> (<span class="cm-variable">user_id</span>, <span class="cm-string">"nan"</span>, <span class="cm-string">"nan"</span>, <span class="cm-string">"nan"</span>, <span class="cm-string">"nan"</span>, <span class="cm-string">"nan"</span>, <span class="cm-string">"nan"</span>, <span class="cm-string">"nan"</span>, <span class="cm-string">"nan"</span>, <span class="cm-string">"nan"</span>, <span class="cm-string">"nan"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">algorithm</span> == <span class="cm-number">0</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">x_testing</span> = <span class="cm-variable">data_testing</span>[:,<span class="cm-number">4</span>:<span class="cm-operator">-</span><span class="cm-number">1</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y_testing</span> = <span class="cm-variable">data_testing</span>[:,<span class="cm-operator">-</span><span class="cm-number">1</span>].<span class="cm-property">astype</span>(<span class="cm-builtin">int</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#classifying the testing set</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"Classifying using SVM..."</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y_prediction1</span> = <span class="cm-variable">clf1</span>.<span class="cm-property">predict_proba</span>(<span class="cm-variable">x_testing</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#array with the final prediction (0 or 1)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">prediction_size</span> = <span class="cm-builtin">len</span>(<span class="cm-variable">y_prediction1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y_prediction_final</span> = (<span class="cm-variable">np</span>.<span class="cm-property">zeros</span>(<span class="cm-variable">prediction_size</span>)).<span class="cm-property">astype</span>(<span class="cm-builtin">bool</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#determines what is lesion and what is not lesion based on the threshold of the classifier</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-builtin">xrange</span>(<span class="cm-variable">prediction_size</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">y_prediction1</span>[<span class="cm-variable">i</span>][<span class="cm-number">1</span>] <span class="cm-operator">&gt;</span>= <span class="cm-variable">threshold_lesion_SVM</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y_prediction_final</span>[<span class="cm-variable">i</span>]=<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y_prediction_final</span>[<span class="cm-variable">i</span>]=<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">elif</span> (<span class="cm-variable">algorithm</span> == <span class="cm-number">1</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">x_testing</span> = <span class="cm-variable">data_testing</span>[:,<span class="cm-number">4</span>:<span class="cm-operator">-</span><span class="cm-number">1</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y_testing</span> = <span class="cm-variable">data_testing</span>[:,<span class="cm-operator">-</span><span class="cm-number">1</span>].<span class="cm-property">astype</span>(<span class="cm-builtin">int</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#classifying the testing set</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"Classifying using Random Forest..."</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y_prediction1</span> = <span class="cm-variable">clf1</span>.<span class="cm-property">predict_proba</span>(<span class="cm-variable">x_testing</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#array with the final prediction (0 or 1)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">prediction_size</span> = <span class="cm-builtin">len</span>(<span class="cm-variable">y_prediction1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y_prediction_final</span> = (<span class="cm-variable">np</span>.<span class="cm-property">zeros</span>(<span class="cm-variable">prediction_size</span>)).<span class="cm-property">astype</span>(<span class="cm-builtin">bool</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#determines what is lesion and what is not lesion based on the threshold of the classifier</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-builtin">xrange</span>(<span class="cm-variable">prediction_size</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">y_prediction1</span>[<span class="cm-variable">i</span>][<span class="cm-number">1</span>] <span class="cm-operator">&gt;</span>= <span class="cm-variable">threshold_lesion_RF</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y_prediction_final</span>[<span class="cm-variable">i</span>]=<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y_prediction_final</span>[<span class="cm-variable">i</span>]=<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">elif</span> (<span class="cm-variable">algorithm</span> == <span class="cm-number">2</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">x_testing</span> = <span class="cm-variable">data_testing</span>[:,<span class="cm-number">4</span>:<span class="cm-operator">-</span><span class="cm-number">1</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">x_testing_normalized</span> = <span class="cm-variable">preprocessing</span>.<span class="cm-property">normalize</span>(<span class="cm-variable">x_testing</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y_testing</span> = <span class="cm-variable">data_testing</span>[:,<span class="cm-operator">-</span><span class="cm-number">1</span>].<span class="cm-property">astype</span>(<span class="cm-builtin">int</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#classifying the testing set</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"Classifying using kNN..."</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y_prediction1</span> = <span class="cm-variable">clf1</span>.<span class="cm-property">predict_proba</span>(<span class="cm-variable">x_testing_normalized</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#array with the final prediction (0 or 1)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">prediction_size</span> = <span class="cm-builtin">len</span>(<span class="cm-variable">y_prediction1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y_prediction_final</span> = (<span class="cm-variable">np</span>.<span class="cm-property">zeros</span>(<span class="cm-variable">prediction_size</span>)).<span class="cm-property">astype</span>(<span class="cm-builtin">bool</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#determines what is lesion and what is not lesion based on the threshold of the classifier</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-builtin">xrange</span>(<span class="cm-variable">prediction_size</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">y_prediction1</span>[<span class="cm-variable">i</span>][<span class="cm-number">1</span>] <span class="cm-operator">&gt;</span>= <span class="cm-variable">threshold_lesion_kNN</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y_prediction_final</span>[<span class="cm-variable">i</span>]=<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y_prediction_final</span>[<span class="cm-variable">i</span>]=<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">elif</span> (<span class="cm-variable">algorithm</span> == <span class="cm-number">3</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#normalizes the testing set</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#[user id, slice, x, y, intensity, inferior slice intensity, superior slice intensity, lbp, grad, mgrad, average]</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">x_testing</span> = <span class="cm-variable">data_testing</span>[:,<span class="cm-number">4</span>:<span class="cm-operator">-</span><span class="cm-number">1</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">x_testing_normalized</span> = <span class="cm-variable">preprocessing</span>.<span class="cm-property">normalize</span>(<span class="cm-variable">x_testing</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y_testing</span> = <span class="cm-variable">data_testing</span>[:,<span class="cm-operator">-</span><span class="cm-number">1</span>].<span class="cm-property">astype</span>(<span class="cm-builtin">int</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#predictions</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"Classifying using SVM..."</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y_prediction1</span> = <span class="cm-variable">clf1</span>.<span class="cm-property">predict_proba</span>(<span class="cm-variable">x_testing</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"Classifying using RF..."</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y_prediction2</span> = <span class="cm-variable">clf2</span>.<span class="cm-property">predict_proba</span>(<span class="cm-variable">x_testing</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"Classifying using kNN..."</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y_prediction3</span> = <span class="cm-variable">clf3</span>.<span class="cm-property">predict_proba</span>(<span class="cm-variable">x_testing_normalized</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#array with the final prediction (0 or 1)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">prediction_size</span> = <span class="cm-builtin">len</span>(<span class="cm-variable">y_prediction1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y_prediction_final</span> = (<span class="cm-variable">np</span>.<span class="cm-property">zeros</span>(<span class="cm-variable">prediction_size</span>)).<span class="cm-property">astype</span>(<span class="cm-builtin">bool</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#determines what is lesion and what is not lesion based on the threshold of the classifier</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-builtin">xrange</span>(<span class="cm-variable">prediction_size</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">y_prediction1</span>[<span class="cm-variable">i</span>][<span class="cm-number">1</span>] <span class="cm-operator">&gt;</span>= <span class="cm-number">0.7</span> <span class="cm-keyword">or</span> (<span class="cm-variable">y_prediction1</span>[<span class="cm-variable">i</span>][<span class="cm-number">1</span>] <span class="cm-operator">&gt;</span>= <span class="cm-number">0.65</span> <span class="cm-keyword">and</span> <span class="cm-variable">y_prediction2</span>[<span class="cm-variable">i</span>][<span class="cm-number">1</span>] <span class="cm-operator">&gt;</span>= <span class="cm-number">0.45</span> <span class="cm-keyword">and</span> <span class="cm-variable">y_prediction3</span>[<span class="cm-variable">i</span>][<span class="cm-number">1</span>] <span class="cm-operator">&gt;</span>= <span class="cm-number">0.45</span>) <span class="cm-keyword">or</span> (<span class="cm-variable">y_prediction1</span>[<span class="cm-variable">i</span>][<span class="cm-number">1</span>] <span class="cm-operator">&gt;</span>= <span class="cm-number">0.5</span> <span class="cm-keyword">and</span> <span class="cm-variable">y_prediction2</span>[<span class="cm-variable">i</span>][<span class="cm-number">1</span>] <span class="cm-operator">&gt;</span>= <span class="cm-number">0.5</span> <span class="cm-keyword">and</span> <span class="cm-variable">y_prediction3</span>[<span class="cm-variable">i</span>][<span class="cm-number">1</span>] <span class="cm-operator">&gt;</span>= <span class="cm-number">0.5</span>)):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y_prediction_final</span>[<span class="cm-variable">i</span>]=<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y_prediction_final</span>[<span class="cm-variable">i</span>]=<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#array with prediction probabilities using SVM results</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y_prediction_final_probabilidade</span> = (<span class="cm-variable">np</span>.<span class="cm-property">zeros</span>(<span class="cm-variable">prediction_size</span>)).<span class="cm-property">astype</span>(<span class="cm-builtin">float</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> <span class="cm-variable">i</span> <span class="cm-keyword">in</span> <span class="cm-builtin">xrange</span>(<span class="cm-variable">prediction_size</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y_prediction_final_probabilidade</span>[<span class="cm-variable">i</span>]=<span class="cm-variable">y_prediction1</span>[<span class="cm-variable">i</span>][<span class="cm-number">1</span>].<span class="cm-property">astype</span>(<span class="cm-builtin">float</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#confusion matrix</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">cm</span> = <span class="cm-variable">confusion_matrix</span>(<span class="cm-variable">y_testing</span>, <span class="cm-variable">y_prediction_final</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write</span>(<span class="cm-string">"Confusion Matrix:"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">print</span> <span class="cm-variable">cm</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">print</span> <span class="cm-variable">line</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">execution_log</span>.<span class="cm-property">write</span>(<span class="cm-string">"["</span><span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">cm</span>[<span class="cm-number">0</span>][<span class="cm-number">0</span>]) <span class="cm-operator">+</span> <span class="cm-string">" "</span> <span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">cm</span>[<span class="cm-number">0</span>][<span class="cm-number">1</span>]) <span class="cm-operator">+</span> <span class="cm-string">"]"</span><span class="cm-operator">+</span><span class="cm-string">"\n"</span><span class="cm-operator">+</span><span class="cm-string">"["</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">cm</span>[<span class="cm-number">1</span>][<span class="cm-number">0</span>]) <span class="cm-operator">+</span> <span class="cm-string">" "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">cm</span>[<span class="cm-number">1</span>][<span class="cm-number">1</span>]) <span class="cm-operator">+</span> <span class="cm-string">"]"</span><span class="cm-operator">+</span><span class="cm-string">"\n"</span> <span class="cm-operator">+</span> <span class="cm-variable">line</span> <span class="cm-operator">+</span> <span class="cm-string">"\n"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write</span>(<span class="cm-string">"Result for ID "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>) <span class="cm-operator">+</span> <span class="cm-string">":"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write</span>(<span class="cm-string">"True Negatives: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">cm</span>[<span class="cm-number">0</span>][<span class="cm-number">0</span>])) <span class="cm-comment">#true negative</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write</span>(<span class="cm-string">"False Positives: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">cm</span>[<span class="cm-number">0</span>][<span class="cm-number">1</span>])) <span class="cm-comment">#false positive</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write</span>(<span class="cm-string">"False Negatives: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">cm</span>[<span class="cm-number">1</span>][<span class="cm-number">0</span>])) <span class="cm-comment">#false negative</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write</span>(<span class="cm-string">"True Positives: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">cm</span>[<span class="cm-number">1</span>][<span class="cm-number">1</span>])) <span class="cm-comment">#true positive</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_double_line</span>(<span class="cm-string">"Total of evaluated pixels: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">len</span>(<span class="cm-variable">y_testing</span>)))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#Information obtained using the confusion matrix</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">total_cm</span> = ((<span class="cm-variable">cm</span>[<span class="cm-number">0</span>][<span class="cm-number">0</span>] <span class="cm-operator">+</span> <span class="cm-variable">cm</span>[<span class="cm-number">1</span>][<span class="cm-number">1</span>] <span class="cm-operator">+</span> <span class="cm-variable">cm</span>[<span class="cm-number">1</span>][<span class="cm-number">0</span>] <span class="cm-operator">+</span> <span class="cm-variable">cm</span>[<span class="cm-number">0</span>][<span class="cm-number">1</span>])<span class="cm-operator">*</span><span class="cm-number">1.0</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">trueNegatives</span> = (<span class="cm-variable">cm</span>[<span class="cm-number">0</span>][<span class="cm-number">0</span>]<span class="cm-operator">*</span><span class="cm-number">1.0</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">falsePositives</span> = (<span class="cm-variable">cm</span>[<span class="cm-number">0</span>][<span class="cm-number">1</span>]<span class="cm-operator">*</span><span class="cm-number">1.0</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">falseNegatives</span> = (<span class="cm-variable">cm</span>[<span class="cm-number">1</span>][<span class="cm-number">0</span>]<span class="cm-operator">*</span><span class="cm-number">1.0</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">truePositives</span> = (<span class="cm-variable">cm</span>[<span class="cm-number">1</span>][<span class="cm-number">1</span>]<span class="cm-operator">*</span><span class="cm-number">1.0</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#Accuracy</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">accuracy</span> = ((<span class="cm-variable">trueNegatives</span> <span class="cm-operator">+</span> <span class="cm-variable">truePositives</span>)<span class="cm-operator">/</span><span class="cm-variable">total_cm</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"User ID: "</span> <span class="cm-operator">+</span>  <span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>) <span class="cm-operator">+</span> <span class="cm-string">" | Acurácia: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">accuracy</span>, <span class="cm-string">"5.3f"</span>)))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"Error rate: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(((<span class="cm-variable">falseNegatives</span><span class="cm-operator">+</span><span class="cm-variable">falsePositives</span>)<span class="cm-operator">/</span><span class="cm-variable">total_cm</span>), <span class="cm-string">"5.3f"</span>)))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#sensibility (true positive rate)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"Sensibility: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>((<span class="cm-variable">truePositives</span><span class="cm-operator">/</span>(<span class="cm-variable">truePositives</span><span class="cm-operator">+</span><span class="cm-variable">falseNegatives</span>)), <span class="cm-string">"5.3f"</span>)))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#specificity (true negative rate)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"Specificity: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>((<span class="cm-variable">trueNegatives</span><span class="cm-operator">/</span>(<span class="cm-variable">trueNegatives</span><span class="cm-operator">+</span><span class="cm-variable">falsePositives</span>)), <span class="cm-string">"5.3f"</span>)))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#precision (true positive rate)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"Precision: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>((<span class="cm-variable">truePositives</span><span class="cm-operator">/</span>(<span class="cm-variable">truePositives</span><span class="cm-operator">+</span><span class="cm-variable">falsePositives</span>)), <span class="cm-string">"5.3f"</span>)))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#prevalence (true positive rate)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"Prevalence: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(((<span class="cm-variable">falseNegatives</span><span class="cm-operator">+</span><span class="cm-variable">truePositives</span>)<span class="cm-operator">/</span><span class="cm-variable">total_cm</span>), <span class="cm-string">"5.3f"</span>)))</span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#BINARY LESION MATRIX AND PROBABILITY MATRIX</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#matrix where pixels with a lesion have "1" and pixels without a lesion have value "0"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">prediction_matrix</span> = (<span class="cm-variable">np</span>.<span class="cm-property">zeros_like</span>(<span class="cm-variable">img_wml</span>)).<span class="cm-property">astype</span>(<span class="cm-builtin">bool</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#matrix with probability of a pixel being a lesion (between 0 and 1)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">prediction_probability_matrix</span> = (<span class="cm-variable">np</span>.<span class="cm-property">zeros_like</span>(<span class="cm-variable">img_wml</span>)).<span class="cm-property">astype</span>(<span class="cm-builtin">float</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">line_prediction</span> = <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> <span class="cm-variable">line_data</span> <span class="cm-keyword">in</span> <span class="cm-variable">data_testing</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">arg1</span> = <span class="cm-variable">line_data</span>[<span class="cm-number">1</span>].<span class="cm-property">astype</span>(<span class="cm-variable">uint8</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">arg2</span> = <span class="cm-variable">line_data</span>[<span class="cm-number">2</span>].<span class="cm-property">astype</span>(<span class="cm-variable">uint8</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">arg3</span> = <span class="cm-variable">line_data</span>[<span class="cm-number">3</span>].<span class="cm-property">astype</span>(<span class="cm-variable">uint8</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">prediction_probability_matrix</span>[<span class="cm-variable">arg1</span>][<span class="cm-variable">arg2</span>][<span class="cm-variable">arg3</span>] = <span class="cm-variable">y_prediction_final_probabilidade</span>[<span class="cm-variable">line_prediction</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">y_prediction_final</span>[<span class="cm-variable">line_prediction</span>] == <span class="cm-number">1</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">prediction_matrix</span>[<span class="cm-variable">arg1</span>][<span class="cm-variable">arg2</span>][<span class="cm-variable">arg3</span>] = <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">line_prediction</span>+=<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">prediction_matrix_without_post_processing</span> = <span class="cm-variable">prediction_matrix</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#Dice</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#Calculates the dice using the prediction image and the original image</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">print</span> <span class="cm-string">"Calculating dice..."</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">print</span> <span class="cm-variable">line</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">dice</span> = []</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> <span class="cm-variable">current_slice</span> <span class="cm-keyword">in</span> <span class="cm-builtin">xrange</span>(<span class="cm-variable">slices</span>):</span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#The operation requires that there are lesion pixels in the slices</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">img_wml</span>[<span class="cm-variable">current_slice</span>].<span class="cm-property">sum</span>() <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ds</span> = <span class="cm-variable">calculate_dice_slice</span>(<span class="cm-variable">img_wml</span>[<span class="cm-variable">current_slice</span>], <span class="cm-variable">prediction_matrix</span>[<span class="cm-variable">current_slice</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">dice</span>.<span class="cm-property">append</span>(<span class="cm-variable">ds</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">dice</span> = <span class="cm-variable">np</span>.<span class="cm-property">asarray</span>(<span class="cm-variable">dice</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">average_dice_without_post</span> = <span class="cm-variable">dice</span>.<span class="cm-property">mean</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">dice_std_sem_pos</span> = <span class="cm-variable">dice</span>.<span class="cm-property">std</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"User ID: "</span> <span class="cm-operator">+</span>  <span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>) <span class="cm-operator">+</span> <span class="cm-string">" | Dice: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">average_dice_without_post</span>, <span class="cm-string">"5.3f"</span>)))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">print</span> <span class="cm-string">"Calculating dice with post-processing..."</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">print</span> <span class="cm-variable">line</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">dice</span> = []</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">prediction_matrix_with_post_processing</span> = (<span class="cm-variable">np</span>.<span class="cm-property">zeros_like</span>(<span class="cm-variable">prediction_matrix</span>)).<span class="cm-property">astype</span>(<span class="cm-builtin">bool</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">for</span> <span class="cm-variable">current_slice</span> <span class="cm-keyword">in</span> <span class="cm-builtin">xrange</span>(<span class="cm-variable">slices</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#The operation requires that there are lesion pixels in the slices</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">img_wml</span>[<span class="cm-variable">current_slice</span>].<span class="cm-property">sum</span>() <span class="cm-operator">&gt;</span> <span class="cm-number">0</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#applies post-processing algorithms to the prediction matrix</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">slice_prediction_matrix_with_post_processing</span> = <span class="cm-variable">generate_slice_post_processing</span>(<span class="cm-variable">prediction_matrix</span>[<span class="cm-variable">current_slice</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">prediction_matrix_with_post_processing</span>[<span class="cm-variable">current_slice</span>] = <span class="cm-variable">slice_prediction_matrix_with_post_processing</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">ds</span> = <span class="cm-variable">calculate_dice_slice</span>(<span class="cm-variable">img_wml</span>[<span class="cm-variable">current_slice</span>], <span class="cm-variable">slice_prediction_matrix_with_post_processing</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">dice</span>.<span class="cm-property">append</span>(<span class="cm-variable">ds</span>)</span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">dice_array</span> = <span class="cm-variable">dice</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">dice</span> = <span class="cm-variable">np</span>.<span class="cm-property">asarray</span>(<span class="cm-variable">dice</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">average_dice_with_post</span> = <span class="cm-variable">dice</span>.<span class="cm-property">mean</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">dice_std_com_pos</span> = <span class="cm-variable">dice</span>.<span class="cm-property">std</span>()</span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">###############</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#3D Mosaics</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">###############</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">bool_generate_mosaics</span> == <span class="cm-number">1</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">generate_mosaics</span>(<span class="cm-variable">user_id</span>, <span class="cm-variable">img_wml</span>, <span class="cm-variable">prediction_matrix_without_post_processing</span>, <span class="cm-variable">prediction_matrix_with_post_processing</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#Color Maps</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">bool_generate_color_maps</span> == <span class="cm-number">1</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#Color Maps with probabilities</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">user_id</span> == <span class="cm-variable">desired_user_id1</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">generate_color_maps</span>(<span class="cm-variable">user_id</span>, <span class="cm-variable">img_org</span>, <span class="cm-variable">img_wml</span>, <span class="cm-variable">prediction_probability_matrix</span>, <span class="cm-variable">prediction_matrix_without_post_processing</span>, <span class="cm-variable">prediction_matrix_with_post_processing</span>, <span class="cm-variable">desired_slice1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">user_id</span> == <span class="cm-variable">desired_user_id2</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">generate_color_maps</span>(<span class="cm-variable">user_id</span>, <span class="cm-variable">img_org</span>, <span class="cm-variable">img_wml</span>, <span class="cm-variable">prediction_probability_matrix</span>, <span class="cm-variable">prediction_matrix_without_post_processing</span>, <span class="cm-variable">prediction_matrix_with_post_processing</span>, <span class="cm-variable">desired_slice2</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_line</span>(<span class="cm-string">"User ID: "</span> <span class="cm-operator">+</span>  <span class="cm-builtin">str</span>(<span class="cm-variable">user_id</span>) <span class="cm-operator">+</span> <span class="cm-string">" | Dice with post-processing: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">average_dice_with_post</span>, <span class="cm-string">"5.3f"</span>)) <span class="cm-operator">+</span> <span class="cm-string">" | std: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">dice_std_com_pos</span>, <span class="cm-string">"5.3f"</span>)))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> (<span class="cm-variable">user_id</span>, <span class="cm-variable">accuracy</span>, <span class="cm-variable">average_dice_without_post</span>, <span class="cm-variable">dice_std_sem_pos</span>, <span class="cm-variable">average_dice_with_post</span>, <span class="cm-variable">dice_std_com_pos</span>, <span class="cm-variable">dice_array</span>, <span class="cm-variable">cm</span>[<span class="cm-number">0</span>][<span class="cm-number">0</span>], <span class="cm-variable">cm</span>[<span class="cm-number">0</span>][<span class="cm-number">1</span>], <span class="cm-variable">cm</span>[<span class="cm-number">1</span>][<span class="cm-number">0</span>], <span class="cm-variable">cm</span>[<span class="cm-number">1</span>][<span class="cm-number">1</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#######################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#######################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Function: return_data_training</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Goal: returns features and results fot the data in the training set</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Input: data_training,percentage_data</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Output: x_training, y_training</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#######################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#######################################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">return_data_training</span>(<span class="cm-variable">data_training</span>,<span class="cm-variable">percentage_data</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">size_data</span> = (<span class="cm-variable">percentage_data</span><span class="cm-operator">*</span><span class="cm-number">1.0</span><span class="cm-operator">/</span><span class="cm-number">100</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">fim</span> = (<span class="cm-builtin">int</span>) (<span class="cm-variable">data_training</span>.<span class="cm-property">shape</span>[<span class="cm-number">0</span>]<span class="cm-operator">*</span><span class="cm-variable">size_data</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#permutes data to select the desired amount of samples</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">data_training</span> = <span class="cm-variable">random</span>.<span class="cm-property">permutation</span>(<span class="cm-variable">data_training</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">x_training</span> = <span class="cm-variable">data_training</span>[<span class="cm-number">0</span>:<span class="cm-variable">fim</span>,<span class="cm-number">4</span>:<span class="cm-operator">-</span><span class="cm-number">1</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">y_training</span> = <span class="cm-variable">data_training</span>[<span class="cm-number">0</span>:<span class="cm-variable">fim</span>,<span class="cm-operator">-</span><span class="cm-number">1</span>].<span class="cm-property">astype</span>(<span class="cm-builtin">int</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> (<span class="cm-variable">x_training</span>, <span class="cm-variable">y_training</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Function: return_classifier</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Goal: returns the classifying function</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Input: x_training, y_training, algorithm</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Output: clf1, clf2, clf3</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#################################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">def</span> <span class="cm-def">return_classifier</span>(<span class="cm-variable">x_training</span>, <span class="cm-variable">y_training</span>, <span class="cm-variable">algorithm</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">algorithm</span>==<span class="cm-number">0</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#SVM</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#Training the classifier</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_double_line</span>(<span class="cm-string">"Training the classifier using SVM..."</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#time</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">time_classifier</span> = <span class="cm-variable">timeit</span>.<span class="cm-property">default_timer</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">svc</span> = <span class="cm-variable">LinearSVC</span>(<span class="cm-variable">C</span>=<span class="cm-number">10</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">clf</span> = <span class="cm-variable">CalibratedClassifierCV</span>(<span class="cm-variable">svc</span>, <span class="cm-variable">cv</span>=<span class="cm-number">10</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">clf</span>.<span class="cm-property">fit</span>(<span class="cm-variable">x_training</span>, <span class="cm-variable">y_training</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">deltaTime</span> = (<span class="cm-variable">timeit</span>.<span class="cm-property">default_timer</span>() <span class="cm-operator">-</span> <span class="cm-variable">time_classifier</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_double</span>(<span class="cm-string">"Training using SVM finished in "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">deltaTime</span>, <span class="cm-string">"5.2f"</span>)) <span class="cm-operator">+</span> <span class="cm-string">" seconds"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> (<span class="cm-variable">clf</span>, <span class="cm-number">0</span>, <span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">elif</span> (<span class="cm-variable">algorithm</span>==<span class="cm-number">1</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#Random Forest</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#Training the classifier</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_double_line</span>(<span class="cm-string">"Training the classifier using Random Forest..."</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#time</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">time_classifier</span> = <span class="cm-variable">timeit</span>.<span class="cm-property">default_timer</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">clf</span> = <span class="cm-variable">RandomForestClassifier</span>(<span class="cm-variable">n_jobs</span>=<span class="cm-operator">-</span><span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">clf</span>.<span class="cm-property">fit</span>(<span class="cm-variable">x_training</span>, <span class="cm-variable">y_training</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">deltaTime</span> = (<span class="cm-variable">timeit</span>.<span class="cm-property">default_timer</span>() <span class="cm-operator">-</span> <span class="cm-variable">time_classifier</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_double</span>(<span class="cm-string">"TTraining using Random Forest finished in "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">deltaTime</span>, <span class="cm-string">"5.2f"</span>)) <span class="cm-operator">+</span> <span class="cm-string">" seconds"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> (<span class="cm-variable">clf</span>, <span class="cm-number">0</span>, <span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-string">'''</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-string"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>importances = clf.feature_importances_</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-string"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>index = np.argsort(importances)[::-1]</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-string"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>#feature ranking</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-string"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>print("Feature ranking:")</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-string"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>for f in range(x_training.shape[1]):</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-string"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>    print("%d. feature %d (%f)" % (f + 1, index[f], importances[index[f]]))</span></span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-string"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span>'''</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">elif</span> (<span class="cm-variable">algorithm</span>==<span class="cm-number">2</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#kNN</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#Training the classifier</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_double_line</span>(<span class="cm-string">"Training the classifier using kNN..."</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#time</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">time_classifier</span> = <span class="cm-variable">timeit</span>.<span class="cm-property">default_timer</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">k</span>=<span class="cm-number">21</span> <span class="cm-comment">#number of neighbors</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#normalized data</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">x_training_normalized</span> = <span class="cm-variable">preprocessing</span>.<span class="cm-property">normalize</span>(<span class="cm-variable">x_training</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">clf</span> = <span class="cm-variable">neighbors</span>.<span class="cm-property">KNeighborsClassifier</span>(<span class="cm-variable">n_neighbors</span>=<span class="cm-variable">k</span>, <span class="cm-variable">weights</span>=<span class="cm-string">'distance'</span>,<span class="cm-variable">n_jobs</span>=<span class="cm-operator">-</span><span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">clf</span>.<span class="cm-property">fit</span>(<span class="cm-variable">x_training_normalized</span>, <span class="cm-variable">y_training</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">deltaTime</span> = (<span class="cm-variable">timeit</span>.<span class="cm-property">default_timer</span>() <span class="cm-operator">-</span> <span class="cm-variable">tempo</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_double</span>(<span class="cm-string">"Training using kNN finished in "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">deltaTime</span>, <span class="cm-string">"5.2f"</span>)) <span class="cm-operator">+</span> <span class="cm-string">" seconds"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> (<span class="cm-variable">clf</span>, <span class="cm-number">0</span>, <span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">elif</span> (<span class="cm-variable">algorithm</span>==<span class="cm-number">3</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#SVM</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#Training the classifier</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_double_line</span>(<span class="cm-string">"Training the classifier using SVM..."</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#time</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">time_classifier</span> = <span class="cm-variable">timeit</span>.<span class="cm-property">default_timer</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">svc</span> = <span class="cm-variable">LinearSVC</span>(<span class="cm-variable">C</span>=<span class="cm-number">10</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">clf1</span> = <span class="cm-variable">CalibratedClassifierCV</span>(<span class="cm-variable">svc</span>, <span class="cm-variable">cv</span>=<span class="cm-number">10</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">clf1</span>.<span class="cm-property">fit</span>(<span class="cm-variable">x_training</span>, <span class="cm-variable">y_training</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">deltaTime</span> = (<span class="cm-variable">timeit</span>.<span class="cm-property">default_timer</span>() <span class="cm-operator">-</span> <span class="cm-variable">time_classifier</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_double</span>(<span class="cm-string">"Training using SVM finished in "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">deltaTime</span>, <span class="cm-string">"5.2f"</span>)) <span class="cm-operator">+</span> <span class="cm-string">" seconds"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#Random Forest</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#Training the classifier</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_double_line</span>(<span class="cm-string">"Training the classifier using Random Forest.."</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#time</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">time_classifier</span> = <span class="cm-variable">timeit</span>.<span class="cm-property">default_timer</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">clf2</span> = <span class="cm-variable">RandomForestClassifier</span>(<span class="cm-variable">n_jobs</span>=<span class="cm-operator">-</span><span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">clf2</span>.<span class="cm-property">fit</span>(<span class="cm-variable">x_training</span>, <span class="cm-variable">y_training</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">deltaTime</span> = (<span class="cm-variable">timeit</span>.<span class="cm-property">default_timer</span>() <span class="cm-operator">-</span> <span class="cm-variable">time_classifier</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_double</span>(<span class="cm-string">"Training using Random Forest finished in "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">deltaTime</span>, <span class="cm-string">"5.2f"</span>)) <span class="cm-operator">+</span> <span class="cm-string">" seconds"</span>)</span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#kNN</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#Training the classifier</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_double_line</span>(<span class="cm-string">"Training the classifier using kNN..."</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#time</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">time_classifier</span> = <span class="cm-variable">timeit</span>.<span class="cm-property">default_timer</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">k</span>=<span class="cm-number">21</span> <span class="cm-comment">#number of neighbors</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#data normalized</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">x_training_normalized</span> = <span class="cm-variable">preprocessing</span>.<span class="cm-property">normalize</span>(<span class="cm-variable">x_training</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">clf3</span> = <span class="cm-variable">neighbors</span>.<span class="cm-property">KNeighborsClassifier</span>(<span class="cm-variable">n_neighbors</span>=<span class="cm-variable">k</span>, <span class="cm-variable">weights</span>=<span class="cm-string">'distance'</span>,<span class="cm-variable">n_jobs</span>=<span class="cm-operator">-</span><span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">clf3</span>.<span class="cm-property">fit</span>(<span class="cm-variable">x_training_normalized</span>, <span class="cm-variable">y_training</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">deltaTime</span> = (<span class="cm-variable">timeit</span>.<span class="cm-property">default_timer</span>() <span class="cm-operator">-</span> <span class="cm-variable">time_classifier</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">write_double</span>(<span class="cm-string">"Training using kNN finished in "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">deltaTime</span>, <span class="cm-string">"5.2f"</span>)) <span class="cm-operator">+</span> <span class="cm-string">" seconds"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">return</span> (<span class="cm-variable">clf1</span>, <span class="cm-variable">clf2</span>, <span class="cm-variable">clf3</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">else</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">sys</span>.<span class="cm-property">exit</span>(<span class="cm-number">1</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 15px; width: 1px; border-bottom: 15px solid transparent; top: 21499px;"></div><div class="CodeMirror-gutters" style="display: none; height: 21529px;"></div></div></div></div></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to expand output; double click to hide output" style="display: none;"></div><div class="output" style="display: none;"></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[4]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 447.594px; left: 325.797px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1" draggable="false"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 711px; margin-bottom: -15px; border-right-width: 15px; min-height: 470px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors" style="visibility: hidden;"><div class="CodeMirror-cursor" style="left: 320.203px; top: 442px; height: 17px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">####################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Global Variables</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">####################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#lines</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">line</span> = <span class="cm-string">"-------------"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">big_line</span> = <span class="cm-string">"------------------------------"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">msg</span> = <span class="cm-string">""</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#counts the number of CPUs in the computer</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">num_cores</span> = <span class="cm-variable">multiprocessing</span>.<span class="cm-property">cpu_count</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#parameters of the attribute extracion function</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">radius</span> = <span class="cm-number">5</span> <span class="cm-comment">#raio do lbp</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">n_points</span> = (<span class="cm-number">5</span><span class="cm-operator">*</span><span class="cm-variable">radius</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">method</span> = <span class="cm-string">'nri_uniform'</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">size_cross_1</span> = <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">size_cross_2</span> = <span class="cm-number">2</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#number of times the number of wm pixels can be grater than the number of wml pixels</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">number_times_wm_greater_than_wml</span> = <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#size of the slice</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">size_slice</span> = <span class="cm-number">230</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">possible_algorithms</span> = [<span class="cm-number">0</span>,<span class="cm-number">1</span>,<span class="cm-number">2</span>,<span class="cm-number">3</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">possible_operation_modes</span> = [<span class="cm-number">0</span>,<span class="cm-number">1</span>,<span class="cm-number">2</span>,<span class="cm-number">3</span>,<span class="cm-number">4</span>]</span></pre></div></div></div></div></div><div style="position: absolute; height: 15px; width: 1px; border-bottom: 0px solid transparent; top: 470px;"></div><div class="CodeMirror-gutters" style="display: none; height: 485px;"></div></div></div></div></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to expand output; double click to hide output" style="display: none;"></div><div class="output" style="display: none;"></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[5]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 209.594px; left: 477.578px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 474.984px; margin-bottom: -15px; border-right-width: 15px; min-height: 232px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors" style="visibility: hidden;"><div class="CodeMirror-cursor" style="left: 471.984px; top: 204px; height: 17px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">####################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#File Paths</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">####################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#folders</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">path_miccai_images_folder</span> = <span class="cm-string">"miccai_images"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">path_color_maps_folder</span> = <span class="cm-string">"results/color_map/"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">path_box_plot_folder</span> = <span class="cm-string">"results/boxplot/Boxplot"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">path_mosaics_folder</span> = <span class="cm-string">"results/imagens_wml/"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#files</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">path_execution_log</span> = <span class="cm-string">"results/execution_log.txt"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">path_execution_results</span> = <span class="cm-string">"results/execution_results.txt"</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 15px; width: 1px; border-bottom: 0px solid transparent; top: 232px;"></div><div class="CodeMirror-gutters" style="display: none; height: 247px;"></div></div></div></div></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to expand output; double click to hide output" style="display: none;"></div><div class="output" style="display: none;"></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[6]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 804.594px; left: 283.719px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 15px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true" style="right: 0px; left: 0px; display: block;"><div style="height: 100%; min-height: 1px; width: 1183px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true" style="height: 15px; width: 15px;"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 1183px; margin-bottom: -15px; border-right-width: 15px; min-height: 827px; padding-right: 0px; padding-bottom: 15px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 278.125px; top: 799px; height: 17px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">###################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#User Defined Variables</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">###################################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#operation mode</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">operation_mode</span> = <span class="cm-number">4</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#operation_mode = 0 -&gt; uses all the pixels "wml" and "wm not wml" pixels</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#operation_mode = 1 -&gt; uses the same number of "wml" pixels and "wm not wml" pixel</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#operation_mode = 2 -&gt; dilation of "wml" and uses the same number of "wml" pixels and "wm not wml" pixels</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#operation_mode = 3 -&gt; erosion of "wm not wml" pixels and uses the same number of "wml" pixels and "wm not wml" pixels</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#operation_mode = 4 -&gt; dilation of "wml" and erosion of "wm not wml" pixels and uses the same number of "wml" pixels and "wm not wml" pixels</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#chosen algorithm</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">algorithm</span> = <span class="cm-number">3</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#algorithm 0: SVM</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#algorithm 1: Random Forest</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#algorithm 2: kNN</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#algorithm 3: usa os 3 algorithms</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#threshold for the lesions</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">threshold_lesion_SVM</span> = <span class="cm-number">0.55</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">threshold_lesion_RF</span> = <span class="cm-number">0.9</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">threshold_lesion_kNN</span> = <span class="cm-number">0.73</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#method threshold</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">method_threshold</span> = <span class="cm-number">10</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#colormap parameters</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">desired_user_id1</span> = <span class="cm-number">3</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">desired_slice1</span> = <span class="cm-number">77</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">desired_user_id2</span> = <span class="cm-number">20</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">desired_slice2</span> = <span class="cm-number">26</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#number of "data" samples used for training</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">percentage_data</span> = <span class="cm-number">20</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#boolean variables to call output functions</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#0: do not call the function</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#1: call the function</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">bool_generate_mosaics</span> = <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">bool_generate_boxplot</span> = <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">bool_generate_color_maps</span> = <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">bool_generate_color_maps_show</span> = <span class="cm-number">1</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 15px; width: 1px; border-bottom: 15px solid transparent; top: 827px;"></div><div class="CodeMirror-gutters" style="display: none; height: 857px;"></div></div></div></div></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to expand output; double click to hide output" style="display: none;"></div><div class="output" style="display: none;"></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[7]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 2963.59px; left: 789.344px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 15px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true" style="right: 0px; left: 0px; display: block;"><div style="height: 100%; min-height: 1px; width: 1722px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true" style="height: 15px; width: 15px;"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 1721.97px; margin-bottom: -15px; border-right-width: 15px; min-height: 2986px; padding-right: 0px; padding-bottom: 15px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 783.75px; top: 2958px; height: 17px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">########</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Main</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">########</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#open files</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">execution_log</span> = <span class="cm-builtin">open</span>(<span class="cm-variable">path_execution_log</span>, <span class="cm-string">'a'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">execution_results</span> = <span class="cm-builtin">open</span>(<span class="cm-variable">path_execution_results</span>, <span class="cm-string">'a'</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#program starts</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">startTime</span> = <span class="cm-variable">timeit</span>.<span class="cm-property">default_timer</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">print_infos_start_program</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#initial setup</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">total_confusion_matrix</span> = <span class="cm-variable">np</span>.<span class="cm-property">array</span>([[<span class="cm-number">0</span>,<span class="cm-number">0</span>],[<span class="cm-number">0</span>,<span class="cm-number">0</span>]])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">dice_medio</span> = <span class="cm-number">0.0</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">average_accuracy</span>=<span class="cm-number">0.0</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#tests if the algorithm exists</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">if</span> (<span class="cm-variable">algorithm</span> <span class="cm-keyword">not</span> <span class="cm-keyword">in</span> <span class="cm-variable">possible_algorithms</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#algorithm inválido</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">print</span> <span class="cm-string">"Erro, invalid algorithm"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#suspends the program execution</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">sys</span>.<span class="cm-property">exit</span>(<span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#tests if the operation mode exists</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">if</span> (<span class="cm-variable">operation_mode</span> <span class="cm-keyword">not</span> <span class="cm-keyword">in</span> <span class="cm-variable">possible_operation_modes</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#invalid mode</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">print</span> <span class="cm-string">"Error, invalid operation mode"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">#suspends the program execution</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">sys</span>.<span class="cm-property">exit</span>(<span class="cm-number">1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">if</span> (<span class="cm-variable">algorithm</span> == <span class="cm-number">0</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">size_closed_area</span> = <span class="cm-number">30</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">size_opened_area</span> = <span class="cm-number">50</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">elif</span> (<span class="cm-variable">algorithm</span> == <span class="cm-number">1</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">size_closed_area</span> = <span class="cm-number">30</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">size_opened_area</span> = <span class="cm-number">50</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">elif</span> (<span class="cm-variable">algorithm</span> == <span class="cm-number">2</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">size_closed_area</span> = <span class="cm-number">30</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">size_opened_area</span> = <span class="cm-number">50</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">elif</span> (<span class="cm-variable">algorithm</span> == <span class="cm-number">3</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">size_closed_area</span> = <span class="cm-number">30</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">size_opened_area</span> = <span class="cm-number">50</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Training</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#list of possible ids</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">id_list_training_mode1</span> = [<span class="cm-number">8</span>,<span class="cm-number">10</span>,<span class="cm-number">11</span>,<span class="cm-number">12</span>,<span class="cm-number">13</span>,<span class="cm-number">16</span>,<span class="cm-number">17</span>,<span class="cm-number">18</span>,<span class="cm-number">19</span>,<span class="cm-number">21</span>,<span class="cm-number">22</span>,<span class="cm-number">24</span>,<span class="cm-number">26</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">id_list_testing_mode1</span> = [<span class="cm-number">1</span>,<span class="cm-number">2</span>,<span class="cm-number">3</span>,<span class="cm-number">4</span>,<span class="cm-number">5</span>,<span class="cm-number">6</span>,<span class="cm-number">7</span>,<span class="cm-number">9</span>,<span class="cm-number">14</span>,<span class="cm-number">15</span>,<span class="cm-number">20</span>,<span class="cm-number">23</span>,<span class="cm-number">25</span>,<span class="cm-number">28</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#id_list_training_mode1 = [8]</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#id_list_testing_mode1 = [1]</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">list_modes</span> = []</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">list_modes</span>.<span class="cm-property">append</span>([<span class="cm-variable">id_list_training_mode1</span>, <span class="cm-variable">id_list_testing_mode1</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#user_ids for training</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">id_list_training</span> = <span class="cm-variable">list_modes</span>[<span class="cm-number">0</span>][<span class="cm-number">0</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">id_list_testing</span> = <span class="cm-variable">list_modes</span>[<span class="cm-number">0</span>][<span class="cm-number">1</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#prints the list of patients for training and for testing</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">print_lists_patients_training_and_test</span>(<span class="cm-variable">id_list_training</span>, <span class="cm-variable">id_list_testing</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#start of the training</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">write_line</span>(<span class="cm-string">"Start of the training"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#extract attributes from the training set</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">data_training</span> = <span class="cm-variable">perform_parallel_training</span>(<span class="cm-variable">id_list_training</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#returns features and results for the training data</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">x_training</span>, <span class="cm-variable">y_training</span> = <span class="cm-variable">return_data_training</span>(<span class="cm-variable">data_training</span>,<span class="cm-variable">percentage_data</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#trains the classifier using the especified algorithm</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">clf1</span>, <span class="cm-variable">clf2</span>, <span class="cm-variable">clf3</span> = <span class="cm-variable">return_classifier</span>(<span class="cm-variable">x_training</span>, <span class="cm-variable">y_training</span>, <span class="cm-variable">algorithm</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#start of the testings</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">msg</span> = <span class="cm-string">"Start of the testings"</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">write_line</span>(<span class="cm-variable">msg</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">dice_total_testing</span> = []</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#calculates the result of the testings in parallel</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">results</span> = <span class="cm-variable">Parallel</span>(<span class="cm-variable">n_jobs</span>=<span class="cm-variable">num_cores</span>)(<span class="cm-variable">delayed</span>(<span class="cm-variable">perform_parallel_testing</span>)(<span class="cm-variable">user_id</span>, <span class="cm-variable">clf1</span>, <span class="cm-variable">clf2</span>, <span class="cm-variable">clf3</span>, <span class="cm-variable">algorithm</span>) <span class="cm-keyword">for</span> <span class="cm-variable">user_id</span> <span class="cm-keyword">in</span> <span class="cm-variable">id_list_testing</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#eixo 0: user_id</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#eixo 1: accuracy</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#eixo 2: average dice without post-processing</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#eixo 3: standard deviation of the dice without post-processing</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#eixo 4: average dice with post-processing</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#eixo 5: standard deviation of the dice with post-processing</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#eixo 6: dice_array</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#number of patients in test with at least one wml</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">num_elements_testing</span>=<span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#list of elements with at least one wml</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">list_testing_wml</span> = []</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#eliminates the results with "nan" (low amount of wml pixels)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">results_final</span> = []</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">for</span> <span class="cm-variable">result</span> <span class="cm-keyword">in</span> <span class="cm-variable">results</span>:</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">if</span> (<span class="cm-variable">result</span>[<span class="cm-number">1</span>] <span class="cm-operator">!</span>= <span class="cm-string">"nan"</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">result_line</span> = [<span class="cm-variable">result</span>[<span class="cm-number">0</span>], <span class="cm-variable">result</span>[<span class="cm-number">1</span>], <span class="cm-variable">result</span>[<span class="cm-number">2</span>], <span class="cm-variable">result</span>[<span class="cm-number">3</span>], <span class="cm-variable">result</span>[<span class="cm-number">4</span>], <span class="cm-variable">result</span>[<span class="cm-number">5</span>]]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">results_final</span>.<span class="cm-property">append</span>(<span class="cm-variable">result_line</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">dice_total_testing</span>.<span class="cm-property">append</span>(<span class="cm-variable">result</span>[<span class="cm-number">6</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">list_testing_wml</span>.<span class="cm-property">append</span>(<span class="cm-variable">result</span>[<span class="cm-number">0</span>])</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">total_confusion_matrix</span>[<span class="cm-number">0</span>][<span class="cm-number">0</span>] += <span class="cm-variable">result</span>[<span class="cm-number">7</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">total_confusion_matrix</span>[<span class="cm-number">0</span>][<span class="cm-number">1</span>] += <span class="cm-variable">result</span>[<span class="cm-number">8</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">total_confusion_matrix</span>[<span class="cm-number">1</span>][<span class="cm-number">0</span>] += <span class="cm-variable">result</span>[<span class="cm-number">9</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">total_confusion_matrix</span>[<span class="cm-number">1</span>][<span class="cm-number">1</span>] += <span class="cm-variable">result</span>[<span class="cm-number">10</span>]</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">num_elements_testing</span>+=<span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#results of the testings for each patient</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#accuracy and dice with post-processing</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">write_results</span>(<span class="cm-variable">results_final</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">sum_results_testing</span> = <span class="cm-variable">np</span>.<span class="cm-property">sum</span>(<span class="cm-variable">results_final</span>, <span class="cm-variable">axis</span>=<span class="cm-number">0</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">average_accuracy</span> = (<span class="cm-number">1.0</span><span class="cm-operator">*</span><span class="cm-variable">sum_results_testing</span>[<span class="cm-number">1</span>]<span class="cm-operator">/</span><span class="cm-variable">num_elements_testing</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">average_dice_without_post</span> = (<span class="cm-number">1.0</span><span class="cm-operator">*</span><span class="cm-variable">sum_results_testing</span>[<span class="cm-number">2</span>]<span class="cm-operator">/</span><span class="cm-variable">num_elements_testing</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">average_dice_with_post</span> = (<span class="cm-number">1.0</span><span class="cm-operator">*</span><span class="cm-variable">sum_results_testing</span>[<span class="cm-number">4</span>]<span class="cm-operator">/</span><span class="cm-variable">num_elements_testing</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">write_double</span>(<span class="cm-string">"Number of elements: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">num_elements_testing</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">write_double</span>(<span class="cm-string">"Average Accuracy of the testing set: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">average_accuracy</span>, <span class="cm-string">"5.3f"</span>)))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">write_double</span>(<span class="cm-string">"Average Dice of the testing set without pos-processing: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">average_dice_without_post</span>, <span class="cm-string">"5.3f"</span>)))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">write_double</span>(<span class="cm-string">"Average Dice of the testing set with pos-processing: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">average_dice_with_post</span>, <span class="cm-string">"5.3f"</span>)))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">write_double</span>(<span class="cm-variable">line</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">write_double</span>(<span class="cm-string">"Complete Confusion Matrix:"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">write_double</span>(<span class="cm-variable">line</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">write_double</span>(<span class="cm-string">"["</span><span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">total_confusion_matrix</span>[<span class="cm-number">0</span>][<span class="cm-number">0</span>]) <span class="cm-operator">+</span> <span class="cm-string">" "</span> <span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">total_confusion_matrix</span>[<span class="cm-number">0</span>][<span class="cm-number">1</span>]) <span class="cm-operator">+</span> <span class="cm-string">"]"</span><span class="cm-operator">+</span><span class="cm-string">"\n"</span><span class="cm-operator">+</span><span class="cm-string">"["</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">total_confusion_matrix</span>[<span class="cm-number">1</span>][<span class="cm-number">0</span>]) <span class="cm-operator">+</span> <span class="cm-string">" "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-variable">total_confusion_matrix</span>[<span class="cm-number">1</span>][<span class="cm-number">1</span>]) <span class="cm-operator">+</span> <span class="cm-string">"]"</span><span class="cm-operator">+</span><span class="cm-string">"\n"</span> <span class="cm-operator">+</span> <span class="cm-variable">line</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Information obtained using the confusion matrix</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">total_cm</span> = ((<span class="cm-variable">total_confusion_matrix</span>[<span class="cm-number">0</span>][<span class="cm-number">0</span>] <span class="cm-operator">+</span> <span class="cm-variable">total_confusion_matrix</span>[<span class="cm-number">1</span>][<span class="cm-number">1</span>] <span class="cm-operator">+</span> <span class="cm-variable">total_confusion_matrix</span>[<span class="cm-number">1</span>][<span class="cm-number">0</span>] <span class="cm-operator">+</span> <span class="cm-variable">total_confusion_matrix</span>[<span class="cm-number">0</span>][<span class="cm-number">1</span>])<span class="cm-operator">*</span><span class="cm-number">1.0</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">trueNegatives</span> = (<span class="cm-variable">total_confusion_matrix</span>[<span class="cm-number">0</span>][<span class="cm-number">0</span>]<span class="cm-operator">*</span><span class="cm-number">1.0</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">falsePositives</span> = (<span class="cm-variable">total_confusion_matrix</span>[<span class="cm-number">0</span>][<span class="cm-number">1</span>]<span class="cm-operator">*</span><span class="cm-number">1.0</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">falseNegatives</span> = (<span class="cm-variable">total_confusion_matrix</span>[<span class="cm-number">1</span>][<span class="cm-number">0</span>]<span class="cm-operator">*</span><span class="cm-number">1.0</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">truePositives</span> = (<span class="cm-variable">total_confusion_matrix</span>[<span class="cm-number">1</span>][<span class="cm-number">1</span>]<span class="cm-operator">*</span><span class="cm-number">1.0</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#accuracy</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">accuracy</span> = ((<span class="cm-variable">trueNegatives</span> <span class="cm-operator">+</span> <span class="cm-variable">truePositives</span>)<span class="cm-operator">/</span><span class="cm-variable">total_cm</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">write_double</span>(<span class="cm-string">"Final Accuracy: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">accuracy</span>, <span class="cm-string">"5.3f"</span>)))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">write_double</span>(<span class="cm-string">"Error rate: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(((<span class="cm-variable">falseNegatives</span><span class="cm-operator">+</span><span class="cm-variable">falsePositives</span>)<span class="cm-operator">/</span><span class="cm-variable">total_cm</span>), <span class="cm-string">"5.3f"</span>)))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#sensibility (true positive rate)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">write_double</span>(<span class="cm-string">"Sensibility: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>((<span class="cm-variable">truePositives</span><span class="cm-operator">/</span>(<span class="cm-variable">truePositives</span><span class="cm-operator">+</span><span class="cm-variable">falseNegatives</span>)), <span class="cm-string">"5.3f"</span>)))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#specificity (true negative rate)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">write_double</span>(<span class="cm-string">"Specificity: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>((<span class="cm-variable">trueNegatives</span><span class="cm-operator">/</span>(<span class="cm-variable">trueNegatives</span><span class="cm-operator">+</span><span class="cm-variable">falsePositives</span>)), <span class="cm-string">"5.3f"</span>)))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#precision (true positive rate)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">write_double</span>(<span class="cm-string">"Precision: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>((<span class="cm-variable">truePositives</span><span class="cm-operator">/</span>(<span class="cm-variable">truePositives</span><span class="cm-operator">+</span><span class="cm-variable">falsePositives</span>)), <span class="cm-string">"5.3f"</span>)))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#prevalence (true positive rate)</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">write_double</span>(<span class="cm-string">"Prevalence: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(((<span class="cm-variable">falseNegatives</span><span class="cm-operator">+</span><span class="cm-variable">truePositives</span>)<span class="cm-operator">/</span><span class="cm-variable">total_cm</span>), <span class="cm-string">"5.3f"</span>)))</span></pre></div></div></div></div></div><div style="position: absolute; height: 15px; width: 1px; border-bottom: 15px solid transparent; top: 2986px;"></div><div class="CodeMirror-gutters" style="display: none; height: 3016px;"></div></div></div></div></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to unscroll output; double click to hide" style=""></div><div class="output output_scroll" style=""><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_stream output_stdout"><pre>-------------
Start of the program
-------------
Day: 11/04/2017
-------------
Time: 16:25:55
-------------
Num CPUs: 4
-------------
Number of elements for training: 12
IDs for training:
8 11 13 16 17 18 19 20 21 22 24 26 
-------------
Number of elements for testing: 15
IDs for testing:
1 2 3 4 5 6 7 9 10 12 14 15 23 25 28 
-------------
Start of the training
-------------
Operation mode: 4
-------------
Patient ID: 16
-------------
Number of wml Pixels: 272
Number of wm and not wml Pixels: 35163
Number of wm Pixels: 75683
Number of Pixels in the image: 8146600
-------------
Patient ID: 11
-------------
Number of wml Pixels: 19557
Number of wm and not wml Pixels: 100541
Number of wm Pixels: 197402
Number of Pixels in the image: 8146600
-------------
Patient ID: 13
-------------
Number of wml Pixels: 4545
Number of wm and not wml Pixels: 126815
Number of wm Pixels: 245311
Number of Pixels in the image: 8093700
-------------
Patient ID: 17
-------------
Number of wml Pixels: 3340
Number of wm and not wml Pixels: 63044
Number of wm Pixels: 144276
Number of Pixels in the image: 8093700
-------------
Patient ID: 8
-------------
Number of wml Pixels: 28463
Number of wm and not wml Pixels: 107343
Number of wm Pixels: 263305
Number of Pixels in the image: 8093700
-------------
Patient ID: 19
-------------
Number of wml Pixels: 572
Number of wm and not wml Pixels: 41146
Number of wm Pixels: 94358
Number of Pixels in the image: 8146600
-------------
Patient ID: 18
-------------
Number of wml Pixels: 11208
Number of wm and not wml Pixels: 62496
Number of wm Pixels: 153475
Number of Pixels in the image: 8146600
-------------
Patient ID: 20
-------------
Number of wml Pixels: 17751
Number of wm and not wml Pixels: 14412
Number of wm Pixels: 52225
Number of Pixels in the image: 8146600
-------------
Patient ID: 21
-------------

Number of wml Pixels: 431
Number of wm and not wml Pixels: 36047
Number of wm Pixels: 76986
Number of Pixels in the image: 8093700
-------------Patient ID: 26
-------------
Number of wml Pixels: 415
Number of wm and not wml Pixels: 26786
Number of wm Pixels: 55719
Number of Pixels in the image: 8093700
-------------
Patient ID: 24
-------------
Number of wml Pixels: 2328
Number of wm and not wml Pixels: 58178
Number of wm Pixels: 125707
Number of Pixels in the image: 8093700
-------------
Patient ID: 22
-------------
Number of wml Pixels: 8180
Number of wm and not wml Pixels: 103242
Number of wm Pixels: 233748
Number of Pixels in the image: 8093700
-------------
End of the training:
-------------
Total number of pixels wml: 97062
Total number of pixels wm and not wml: 775213
-------------
Size of data: (194124, 12)
-------------
Training the classifier using SVM...
-------------
Training using SVM finished in 55.31 seconds
Start of the testings
-------------
Patient ID: 3
-------------
Number of wml Pixels: 4068
Number of wm and not wml Pixels: 317283
Number of wm Pixels: 321351
Number of Pixels in the image: 8146600
-------------
End of testing for ID: 3
-------------
Total of wml Pixels: 4068
Total of wm and not wml Pixels: 317283
-------------
Size of data: (321351, 12)
Classifying using SVM...
-------------
Confusion Matrix:
[[304815  12468]
 [   103   3965]]
-------------
Result for ID 3:
True Negatives: 304815
False Positives: 12468
False Negatives: 103
True Positives: 3965
-------------
Total of evaluated pixels: 321351
-------------
User ID: 3 | Acurácia: 0.961
-------------
Error rate: 0.039
-------------
Sensibility: 0.975
-------------
Specificity: 0.961
-------------
Precision: 0.241
-------------
Prevalence: 0.013
-------------
Calculating dice...
-------------
User ID: 3 | Dice: 0.351
-------------
Calculating dice with post-processing...
-------------
Patient ID: 2
-------------
Number of wml Pixels: 31189
Number of wm and not wml Pixels: 724402
Number of wm Pixels: 755591
Number of Pixels in the image: 8146600
-------------
End of testing for ID: 2
-------------
Total of wml Pixels: 31189
Total of wm and not wml Pixels: 724402
-------------
Size of data: (755591, 12)
Classifying using SVM...
-------------
Confusion Matrix:
[[703325  21077]
 [  3057  28132]]
-------------
Result for ID 2:
True Negatives: 703325
False Positives: 21077
False Negatives: 3057
True Positives: 28132
-------------
Total of evaluated pixels: 755591
-------------
User ID: 2 | Acurácia: 0.968
-------------
Error rate: 0.032
-------------
Sensibility: 0.902
-------------
Specificity: 0.971
-------------
Precision: 0.572
-------------
Prevalence: 0.041
-------------
Calculating dice...
-------------
User ID: 2 | Dice: 0.623
-------------
Calculating dice with post-processing...
-------------
Patient ID: 1
-------------
Number of wml Pixels: 127992
Number of wm and not wml Pixels: 727490
Number of wm Pixels: 855482
Number of Pixels in the image: 8146600
-------------
End of testing for ID: 1
-------------
Total of wml Pixels: 127992
Total of wm and not wml Pixels: 727490
-------------
Size of data: (855482, 12)
Classifying using SVM...
-------------
Confusion Matrix:
[[705787  21703]
 [ 26373 101619]]
-------------
Result for ID 1:
True Negatives: 705787
False Positives: 21703
False Negatives: 26373
True Positives: 101619
-------------
Total of evaluated pixels: 855482
-------------
User ID: 1 | Acurácia: 0.944
-------------
Error rate: 0.056
-------------
Sensibility: 0.794
-------------
Specificity: 0.970
-------------
Precision: 0.824
-------------
Prevalence: 0.150
-------------
Calculating dice...
-------------
User ID: 1 | Dice: 0.687
-------------
Calculating dice with post-processing...
-------------
Patient ID: 4
-------------
Number of wml Pixels: 183185
Number of wm and not wml Pixels: 843087
Number of wm Pixels: 1026272
Number of Pixels in the image: 8093700
-------------
End of testing for ID: 4
-------------
Total of wml Pixels: 183185
Total of wm and not wml Pixels: 843087
-------------
Size of data: (1026272, 12)
Classifying using SVM...
-------------
Confusion Matrix:
[[811508  31579]
 [ 44721 138464]]
-------------
Result for ID 4:
True Negatives: 811508
False Positives: 31579
False Negatives: 44721
True Positives: 138464
-------------
Total of evaluated pixels: 1026272
-------------
User ID: 4 | Acurácia: 0.926
-------------
Error rate: 0.074
-------------
Sensibility: 0.756
-------------
Specificity: 0.963
-------------
Precision: 0.814
-------------
Prevalence: 0.178
-------------
Calculating dice...
-------------
User ID: 4 | Dice: 0.671
-------------
Calculating dice with post-processing...
-------------
User ID: 3 | Dice with post-processing: 0.547 | std: 0.272
-------------
Patient ID: 5
-------------
Number of wml Pixels: 92304
Number of wm and not wml Pixels: 741506
Number of wm Pixels: 833810
Number of Pixels in the image: 8146600
-------------
End of testing for ID: 5
-------------
Total of wml Pixels: 92304
Total of wm and not wml Pixels: 741506
-------------
Size of data: (833810, 12)
Classifying using SVM...
-------------
Confusion Matrix:
[[701115  40391]
 [ 16349  75955]]
-------------
Result for ID 5:
True Negatives: 701115
False Positives: 40391
False Negatives: 16349
True Positives: 75955
-------------
Total of evaluated pixels: 833810
-------------
User ID: 5 | Acurácia: 0.932
-------------
Error rate: 0.068
-------------
Sensibility: 0.823
-------------
Specificity: 0.946
-------------
Precision: 0.653
-------------
Prevalence: 0.111
-------------
Calculating dice...
-------------
User ID: 5 | Dice: 0.596
-------------
Calculating dice with post-processing...
-------------
User ID: 2 | Dice with post-processing: 0.717 | std: 0.211
-------------
Patient ID: 6
-------------
Number of wml Pixels: 86847
Number of wm and not wml Pixels: 731659
Number of wm Pixels: 818506
Number of Pixels in the image: 8146600
-------------
End of testing for ID: 6
-------------
Total of wml Pixels: 86847
Total of wm and not wml Pixels: 731659
-------------
Size of data: (818506, 12)
Classifying using SVM...
-------------
Confusion Matrix:
[[702217  29442]
 [  3984  82863]]
-------------
Result for ID 6:
True Negatives: 702217
False Positives: 29442
False Negatives: 3984
True Positives: 82863
-------------
Total of evaluated pixels: 818506
</pre></div></div><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_stream output_stdout"><pre>-------------
User ID: 6 | Acurácia: 0.959
-------------
Error rate: 0.041
-------------
Sensibility: 0.954
-------------
Specificity: 0.960
-------------
Precision: 0.738
-------------
Prevalence: 0.106
-------------
Calculating dice...
-------------
User ID: 6 | Dice: 0.746
-------------
Calculating dice with post-processing...
-------------
User ID: 1 | Dice with post-processing: 0.724 | std: 0.183
-------------
Patient ID: 7
-------------
Number of wml Pixels: 77601
Number of wm and not wml Pixels: 781917
Number of wm Pixels: 859518
Number of Pixels in the image: 8146600
-------------
End of testing for ID: 7
-------------
Total of wml Pixels: 77601
Total of wm and not wml Pixels: 781917
-------------
Size of data: (859518, 12)
Classifying using SVM...
-------------
Confusion Matrix:
[[768745  13172]
 [ 18105  59496]]
-------------
Result for ID 7:
True Negatives: 768745
False Positives: 13172
False Negatives: 18105
True Positives: 59496
-------------
Total of evaluated pixels: 859518
-------------
User ID: 7 | Acurácia: 0.964
-------------
Error rate: 0.036
-------------
Sensibility: 0.767
-------------
Specificity: 0.983
-------------
Precision: 0.819
-------------
Prevalence: 0.090
-------------
User ID: 5 | Dice with post-processing: 0.684 | std: 0.228
-------------
Calculating dice...
-------------
User ID: 7 | Dice: 0.718
-------------
Calculating dice with post-processing...
-------------
User ID: 4 | Dice with post-processing: 0.697 | std: 0.108
-------------
Patient ID: 10
-------------
Number of wml Pixels: 84626
Number of wm and not wml Pixels: 624088
Number of wm Pixels: 708714
Number of Pixels in the image: 8093700
-------------
End of testing for ID: 10
-------------
Total of wml Pixels: 84626
Total of wm and not wml Pixels: 624088
-------------
Size of data: (708714, 12)
Classifying using SVM...
-------------
Patient ID: 9
-------------
Number of wml Pixels: 146876
Number of wm and not wml Pixels: 1005894
Number of wm Pixels: 1152770
Number of Pixels in the image: 8093700
-------------
End of testing for ID: 9
-------------
Total of wml Pixels: 146876
Total of wm and not wml Pixels: 1005894
-------------
Confusion Matrix:
[[608873  15215]
 [ 78085   6541]]
-------------
Result for ID 10:
True Negatives: 608873
False Positives: 15215
False Negatives: 78085
True Positives: 6541
-------------
Total of evaluated pixels: 708714
-------------
User ID: 10 | Acurácia: 0.868
-------------
Error rate: 0.132
-------------
Sensibility: 0.077
-------------
Specificity: 0.976
-------------
Precision: 0.301
-------------
Prevalence: 0.119
-------------
Size of data: (1152770, 12)
Classifying using SVM...
-------------
Calculating dice...
-------------
User ID: 10 | Dice: 0.146
-------------
Calculating dice with post-processing...
-------------
Confusion Matrix:
[[990613  15281]
 [ 26574 120302]]
-------------
Result for ID 9:
True Negatives: 990613
False Positives: 15281
False Negatives: 26574
True Positives: 120302
-------------
Total of evaluated pixels: 1152770
-------------
User ID: 9 | Acurácia: 0.964
-------------
Error rate: 0.036
-------------
Sensibility: 0.819
-------------
Specificity: 0.985
-------------
Precision: 0.887
-------------
Prevalence: 0.127
-------------
User ID: 6 | Dice with post-processing: 0.800 | std: 0.208
-------------
Calculating dice...
-------------
User ID: 9 | Dice: 0.703
-------------
Calculating dice with post-processing...
-------------
Patient ID: 12
-------------
Number of wml Pixels: 20703
Number of wm and not wml Pixels: 498306
Number of wm Pixels: 519009
Number of Pixels in the image: 8146600
-------------
End of testing for ID: 12
-------------
Total of wml Pixels: 20703
Total of wm and not wml Pixels: 498306
-------------
Size of data: (519009, 12)
Classifying using SVM...
-------------
Confusion Matrix:
[[472257  26049]
 [  8047  12656]]
-------------
Result for ID 12:
True Negatives: 472257
False Positives: 26049
False Negatives: 8047
True Positives: 12656
-------------
Total of evaluated pixels: 519009
-------------
User ID: 12 | Acurácia: 0.934
-------------
Error rate: 0.066
-------------
Sensibility: 0.611
-------------
Specificity: 0.948
-------------
Precision: 0.327
-------------
Prevalence: 0.040
-------------
Calculating dice...
-------------
User ID: 12 | Dice: 0.409
-------------
Calculating dice with post-processing...
-------------
User ID: 7 | Dice with post-processing: 0.751 | std: 0.176
-------------
Patient ID: 14
-------------
Number of wml Pixels: 111983
Number of wm and not wml Pixels: 907206
Number of wm Pixels: 1019189
Number of Pixels in the image: 8093700
-------------
End of testing for ID: 14
-------------
Total of wml Pixels: 111983
Total of wm and not wml Pixels: 907206
-------------
User ID: 12 | Dice with post-processing: 0.533 | std: 0.206
-------------
Size of data: (1019189, 12)
Classifying using SVM...
-------------
Confusion Matrix:
[[881456  25750]
 [ 28637  83346]]
-------------
Result for ID 14:
True Negatives: 881456
False Positives: 25750
False Negatives: 28637
True Positives: 83346
-------------
Total of evaluated pixels: 1019189
-------------
User ID: 14 | Acurácia: 0.947
-------------
Error rate: 0.053
-------------
Sensibility: 0.744
-------------
Specificity: 0.972
-------------
Precision: 0.764
-------------
Prevalence: 0.110
-------------
Calculating dice...
-------------
User ID: 14 | Dice: 0.647
-------------
Calculating dice with post-processing...
-------------
User ID: 10 | Dice with post-processing: 0.038 | std: 0.081
-------------
Patient ID: 15
-------------
Number of wml Pixels: 29737
Number of wm and not wml Pixels: 735335
Number of wm Pixels: 765072
Number of Pixels in the image: 8146600
-------------
End of testing for ID: 15
-------------
Total of wml Pixels: 29737
Total of wm and not wml Pixels: 735335
-------------
Size of data: (765072, 12)
Classifying using SVM...
-------------
Patient ID: 23
-------------
Number of wml Pixels: 1368
Number of wm and not wml Pixels: 278818
Number of wm Pixels: 280186
Number of Pixels in the image: 8146600
-------------
End of testing for ID: 23
-------------
Total of wml Pixels: 1368
Total of wm and not wml Pixels: 278818
-------------
Size of data: (280186, 12)
Classifying using SVM...
-------------
Confusion Matrix:
[[716994  18341]
 [  4103  25634]]
-------------
Result for ID 15:
True Negatives: 716994
False Positives: 18341
False Negatives: 4103
True Positives: 25634
-------------
Total of evaluated pixels: 765072
-------------
User ID: 15 | Acurácia: 0.971
-------------
Error rate: 0.029
-------------
Sensibility: 0.862
-------------
Specificity: 0.975
-------------
Precision: 0.583
-------------
Prevalence: 0.039
-------------
Confusion Matrix:
[[260843  17975]
 [   176   1192]]
-------------
Result for ID 23:
True Negatives: 260843
False Positives: 17975
False Negatives: 176
True Positives: 1192
-------------
Total of evaluated pixels: 280186
-------------
User ID: 23 | Acurácia: 0.935
-------------
Error rate: 0.065
-------------
Sensibility: 0.871
-------------
Specificity: 0.936
-------------
Precision: 0.062
-------------
Prevalence: 0.005
-------------
Calculating dice...
-------------
User ID: 23 | Dice: 0.110
-------------
Calculating dice with post-processing...
-------------
Calculating dice...
-------------
User ID: 15 | Dice: 0.577
-------------
Calculating dice with post-processing...
-------------
User ID: 9 | Dice with post-processing: 0.697 | std: 0.296
-------------
Patient ID: 25
-------------
Number of wml Pixels: 1969
Number of wm and not wml Pixels: 128752
Number of wm Pixels: 130721
Number of Pixels in the image: 8093700
-------------
End of testing for ID: 25
-------------
Total of wml Pixels: 1969
Total of wm and not wml Pixels: 128752
-------------
Size of data: (130721, 12)
Classifying using SVM...
-------------
Confusion Matrix:
[[124648   4104]
 [   204   1765]]
-------------
Result for ID 25:
True Negatives: 124648
False Positives: 4104
False Negatives: 204
True Positives: 1765
-------------
Total of evaluated pixels: 130721
-------------
User ID: 25 | Acurácia: 0.967
-------------
Error rate: 0.033
-------------
Sensibility: 0.896
-------------
Specificity: 0.968
</pre></div></div><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_stream output_stdout"><pre>-------------
Precision: 0.301
-------------
Prevalence: 0.015
-------------
Calculating dice...
-------------
User ID: 25 | Dice: 0.400
-------------
Calculating dice with post-processing...
-------------
User ID: 23 | Dice with post-processing: 0.437 | std: 0.344
-------------
Patient ID: 28
-------------
Number of wml Pixels: 1984
Number of wm and not wml Pixels: 403417
Number of wm Pixels: 405401
Number of Pixels in the image: 8146600
-------------
End of testing for ID: 28
-------------
Total of wml Pixels: 1984
Total of wm and not wml Pixels: 403417
-------------
Size of data: (405401, 12)
Classifying using SVM...
-------------
Confusion Matrix:
[[395460   7957]
 [   154   1830]]
-------------
Result for ID 28:
True Negatives: 395460
False Positives: 7957
False Negatives: 154
True Positives: 1830
-------------
Total of evaluated pixels: 405401
-------------
User ID: 28 | Acurácia: 0.980
-------------
Error rate: 0.020
-------------
Sensibility: 0.922
-------------
Specificity: 0.980
-------------
Precision: 0.187
-------------
Prevalence: 0.005
-------------
Calculating dice...
-------------
User ID: 28 | Dice: 0.305
-------------
Calculating dice with post-processing...
-------------
User ID: 25 | Dice with post-processing: 0.656 | std: 0.351
-------------
User ID: 15 | Dice with post-processing: 0.681 | std: 0.336
-------------
User ID: 28 | Dice with post-processing: 0.443 | std: 0.418
-------------
User ID: 14 | Dice with post-processing: 0.729 | std: 0.216
-------------
Result for each user ID:
--------------------------------------------------------------------------------------
|id: 01|Acuracy: 0.944| Dice without post-processing: 0.687|std: 0.211| Dice with post-processing: 0.724|std: 0.183|
|id: 02|Acuracy: 0.968| Dice without post-processing: 0.623|std: 0.207| Dice with post-processing: 0.717|std: 0.211|
|id: 03|Acuracy: 0.961| Dice without post-processing: 0.351|std: 0.174| Dice with post-processing: 0.547|std: 0.272|
|id: 04|Acuracy: 0.926| Dice without post-processing: 0.671|std: 0.096| Dice with post-processing: 0.697|std: 0.108|
|id: 05|Acuracy: 0.932| Dice without post-processing: 0.596|std: 0.217| Dice with post-processing: 0.684|std: 0.228|
|id: 06|Acuracy: 0.959| Dice without post-processing: 0.746|std: 0.195| Dice with post-processing: 0.800|std: 0.208|
|id: 07|Acuracy: 0.964| Dice without post-processing: 0.718|std: 0.136| Dice with post-processing: 0.751|std: 0.176|
|id: 09|Acuracy: 0.964| Dice without post-processing: 0.703|std: 0.232| Dice with post-processing: 0.697|std: 0.296|
|id: 10|Acuracy: 0.868| Dice without post-processing: 0.146|std: 0.132| Dice with post-processing: 0.038|std: 0.081|
|id: 12|Acuracy: 0.934| Dice without post-processing: 0.409|std: 0.121| Dice with post-processing: 0.533|std: 0.206|
|id: 14|Acuracy: 0.947| Dice without post-processing: 0.647|std: 0.226| Dice with post-processing: 0.729|std: 0.216|
|id: 15|Acuracy: 0.971| Dice without post-processing: 0.577|std: 0.272| Dice with post-processing: 0.681|std: 0.336|
|id: 23|Acuracy: 0.935| Dice without post-processing: 0.110|std: 0.062| Dice with post-processing: 0.437|std: 0.344|
|id: 25|Acuracy: 0.967| Dice without post-processing: 0.400|std: 0.143| Dice with post-processing: 0.656|std: 0.351|
|id: 28|Acuracy: 0.980| Dice without post-processing: 0.305|std: 0.173| Dice with post-processing: 0.443|std: 0.418|
--------------------------------------------------------------------------------------
Number of elements: 15
Average Accuracy of the testing set: 0.948
Average Dice of the testing set without pos-processing: 0.513
Average Dice of the testing set with pos-processing: 0.609
-------------
Complete Confusion Matrix:
-------------
[9148656 300504]
[258672 743760]
-------------
Final Accuracy: 0.946
Error rate: 0.054
Sensibility: 0.742
Specificity: 0.968
Precision: 0.712
Prevalence: 0.096
</pre></div></div></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[8]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 73.5938px; left: 418.562px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 415.969px; margin-bottom: -15px; border-right-width: 15px; min-height: 96px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 412.969px; top: 68px; height: 17px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">############</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Boxplot</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">############</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">if</span> (<span class="cm-variable">bool_generate_boxplot</span> == <span class="cm-number">1</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">boxplot</span>(<span class="cm-variable">dice_total_testing</span>, <span class="cm-variable">list_testing_wml</span>)</span></pre></div></div></div></div></div><div style="position: absolute; height: 15px; width: 1px; border-bottom: 0px solid transparent; top: 96px;"></div><div class="CodeMirror-gutters" style="display: none; height: 111px;"></div></div></div></div></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to expand output; double click to hide output" style=""></div><div class="output" style=""><div class="output_area"><div class="prompt"></div><div class="output_subarea output_png"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAYAAAAEZCAYAAACervI0AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAIABJREFUeJzt3Xu8XGV97/HPNxBRBEkiViq3VBBttRCtIH1hzbZ4SbQvofZUwRZOsFX0JSpqy8VWE3psRVuFKvWCpgngsajQKj3eQGWH2lZEIFwq4VIIctNCAREoguF3/lhrZ8+ezMxeM7OeNWvNfN+v1yR7Zj/zm2fWXms967kuRQRmZjZ5Fow6A2ZmNhouAMzMJpQLADOzCeUCwMxsQrkAMDObUC4AzMwmlAsAs8QkrZP0F6POh1k7FwA2USRtlvSwpAck/bekf5a0+6jzNUPS45KeOep82GRwAWCTJoBXR8RTgF8G/gv4+GizNIdnZlplXADYJBJARDwKnAf8GoCkp0g6W9J/SbpF0p9tfYP0CUnntTz/kKSL8p+XS7pN0smS7pZ0s6Q3dP1w6U2SbpR0j6QvS9otf31Dnrer8xrK76f48mYzth91BsxGRdKOwOuBf89fOgPYGVgKPA24UNKdEbEOeA9wpaSjgVuAY4ADWsLtBiwBngH8JvA1SZdFxI1tn/nbwF8BLwN+CHwE+AKwPCKWS3oc+PWIuCXBVzabwwWATaIvS/oFsBNZE9ArJS0gKwz2j4iHgVslfQQ4ClgXEf8j6SjgG8ADwHERcVdLzADeFxGPAZdI+irwOuAv2z77DcDaiLgKQNLJwH2S9oqIH+VplOJLm7VzE5BNosMiYgmwA/B24BJgD2Ah8KOWdLcCWzuII+Iy4GayE/SX2mLeFxGPtL33GR0++xn572ZiPgT8d+vnmFXFBYBNopk+gIiIfwK2AAcDjwJ7t6TbG7hj65uktwFPAO4ETmyLuVjSk1qe75Wna3dn62dIejLwVOD2Qb+M2aBcANhEk3QYsAi4Bvgi8JeSdpK0N/Au4Jw83X7A/wH+ADgaOEHS/q2hgFMkLZT0W8Cr83jt/gE4RtL+knYg6w/4XkTclv/+x4CHgVol3Adgk+ifJW0ha7e/FTg6Iq6T9A6yIaE3A/8DnBkR6yRtR1YQfDAirgWQ9F7gHEkvzGPeBdxHdoX/EHBsSwfw1qGdEfFtSe8D/pGs4Pk34IiWvK0Bzpb0RODNEXEeZoko5Q1hJK0Ffgf4SUTs3yXNx4CVZAfNqojYmCxDZglIWg6cExF7jTovZv1I3QS0Dnhlt19KWgnsExHPAo4FPpU4P2ZmlktaAETEd8mqxd0cBpydp70U2EXS01PmyczMMqPuBN4duK3l+R14OJw1TERscPOPNdGoCwAzMxuRUY8CugPYs+X5HrSMu24lyYtkmZkNICI6zi6vogYguk9tv4BsTDWSDgbuj4ifdAsUEYUeq1evLpy230eq2E2L28Q8e1t4W0zituglaQ1A0ueBKeCpkn4ErCabSRkRcWZEfE3SqyTdRDYM9JiU+TEzs1lJC4CI6Lokbkua41LmwczMOhvLTuCpqanGxW5a3JSxmxY3ZeymxU0Zu2lxU8YuK27SmcBlkhRNyauZWV1IIkbYCWxmZjXkAsDMbEKNeh6AmVlXUvebo7lJeHguAMystnyST8sFgPWl2xXZsAeqr/SaLdV+YWm5D8D6MneGYbHZhv3GXb26+ExGq4dU+4Wl5WGgNjAJUvxJUsW1avjvVy+9hoG6CagAV2/NbBy5CaiAQRZZMrNyrVkz6hyMHzcB2cDcBGSdeL+oFzcBWRKrV486B1ZH3i/SSDFSzjUAG5klS+C+XneMbrN4Mdx7b7r89Mt9Q9VqSg2gbvtFrxqACwAbmX4P6KacACwN//0H48XgSuSOKOvE+4U1kWsAfefDVyFlGacaQJ3z1jT9NA3WrVmwjlwDsIklqevD6um++7LCtMijnz6kUUhVMywrrgsAG1gTmj28xET1mrBfVOWUU+od101AfefDVf0Zw24LNwGNpyr3i0E/q6rFB+swJ8LzAMzMWtThYrIO3ATUJ09ymWxLlmRXX+0P2Pa1JUtGm1ez+bgJyAY2iU1AVTRPNF0TmoCqUvcmINcAzGyildFpnapmmLrG6QLABjZsc1jQYc/u8QiGG7o56aNTyh4SOy7NYWWMqEk1dDX1kFg3AdnIVN0EVEZ1fFyaJ9asGb5ATLUtqt7Gdd4vykjrtYAmUN0WpOrEBUCz1fmk14867xepCwA3AfWpKc0IvomNmc1nrGoAVVz1jvtVXZVcA2i2ZNui3z6JITdyKX+nRHl2DaAPnvJv1nyiYK9nRJZ2SGXM7ak6z2UZqxrAbNp0V15lxq5qOnoqw3YkpqwBpFpR0jWAWXVu965aHb7fxNcAmmZuLSVNrSVln0Wqha7KME4rSqbQlL4sS8s1gL7zMfqZfXWIW0bslDWApqWtWp37Q5q4jevw/VwDKFHVk1y8xpCZVc01gBJi1OUqpBPXAJqRtmp1PkaauI3r8P0msgbQ6UodOl+913k6ujVDP8tXDLt0hVVjkvtDktcAJK0ATicrbNZGxIfafv9U4HPALwPbAR+JiPUd4nSsAdS55K2DMvJWhxE1/aZvWtqquQYwuhh1qgEkvSGMpAXAGcChwJ3AZZK+EhGbWpIdB2yMiJWSdgWul/S5iPhFyrxNijL6FmZG1BTR73wYGw33ORmkbwI6CLgxIm6NiMeAc4HD2tL8GNg5/3ln4L998i/PpFZv3VTT26TuFzZX6gJgd+C2lue356+1+gzwXEl3AlcB70ycp1ryAVmups7MNKtSHe4JfDJwVUS8VNI+wEWS9o+IB9sTrmk5S05NTTE1NZVf6RX7oGj5t25OOcWFgJkNb3p6munp6UJpk3YCSzoYWBMRK/LnJwHR2hEs6WvAX0bEv+bPvw2cGBE/aIs11p3A49JhmHK71SEf49IJXIY6bLcytvG43xthlMNALwP2lbS3pCcARwAXtKW5DngZgKSnA/sBNyfOl5kZMNk176QFQERsIRvlcyHwH8C5EXGdpGMlvTlP9kHghZKuAi4CToiIggMJ0xmXTsRJ3rmtO+8XBmMwE7jOVa9+pGouGJcxznXJx7g0AY3LflGXbVyH71fHJiBr088aQ569bGYp1WEU0ETpZ1IVeGKVmaXjGoCNVMFuFqRsmQmzsk1yf4j7AGqcdpD0Zb+/3xh16Q+pw9+vLu3TnZSSt36rpwlW8/X+Nn9a9wFMCK+MakVN8n1wbZZrADVOW5d8+IosfdomqsN28/42f1rXAMzMbBseBWTzGpf1lsxsrrGoAXgUSVpVt/V6rXpLxf1kczW+D6Bz2vFo06tLPprY7l2H71eXbZFKHbabj6f507oPwCaSa4bdTfLYd5vlGkCPGEX5PriDpa1anWuGVavztnANoNy0I7sncJN12+h1PqjNzPrhJiAzswk1lgWAR5E0m9unzaoxln0AafNR7do8dW5bHDZtyhip4qbqG6qa+wAmJ637ACaEJ2z1VkbNsIl9Q0uWZMuQt+tUmNW50Kq7ohcHdRp15gKgT3VuXhLR39VC2uzUzqQ2LfVzD4p+ajg2q4kXBuAmoMq5ylpNjKrVOc91+FvXIW3q2ClieCKYmZklMZYFwKRW9cdFnZvZzMbJWDYBjUt1vN/0TUs7Ttasqe+FRx3+1nVImzr27Ps6d6QMcq51E5BZSVKeoOt68rfqRUTHRx3NWwBI2qHIa5PCB3pznXLKqHMwfrzgXrPN2wQk6YqIeMF8r6VWlyYgTwQrL23V6py3lCZx5MsoYqcwsolgknYDdgeeJOn5zE4xegqwY7EsmZlZXfWaCPZKYBWwB/DRltd/Brw3YZ6G5lEkzVbnDlWzcVKkCej3IuL8ivLTKx+1mAjmJqDy0qaMUWVcqHeh1bS/n5uABsvDIE1ARQqAHYDfA5bSUmOIiL8olq1yuAAolraoVDexqcMJpJuUJ+k6nCy6adrfzwXAYHlItRjcV4CfApcDPy+WlfFV5+alzn/80e/EdVHXK/RxU+djxOYqUgO4NiKeV1F+euWjFjWAYaW8Yknx/n5j1OEKchTqnOdJvOodRewU6jAR7N8k/XqxLIyWpI6POsmWbC7+iKLrO5uZ9alIE9CLgVWSbiFrAhIQEbF/0pwNoAk1hH6WbIa8VE+XncKKlqNlTPhxE4JZNYoUACuT58JqrYq1zttraq2zdptQsLvQsiaatwkoIm4F9gR+O//54SLvs3poyomp2/opZZ78vRaQ2VxF1gJaDZwInJy/tBD4XNEPkLRC0iZJN0g6sUuaKUlXSrpW0sVFY3czPT09bIiumnagNy2/KXktoGp4n2uOIqOANgLPB66IiOfnr11dpA9A0gLgBuBQ4E7gMuCIiNjUkmYX4N+AV0TEHZJ2jYh7OsQqPApo1apVrF+/vlDaIka1vOsg6atU57x10rT8lqVpo7g8CmiwPKQaBfRofuaNPNiTi2UHgIOAGyPi1oh4DDgXOKwtzRuA8yPiDoBOJ/9+bd68edgQczRpeVczs6KKdAJ/UdKngUWS3gS8EfhMwfi7A7e1PL+drFBotR+wMG/62Qn4WEScUzD+VtPT01ubfjZs2MCavB46NTXF1NRUv+GsgKb0L5hZZ0U6gf8GOA84H3g28P6I+HiJedgeeAHZaKMVwPsk7VtifEvEbb2zvC0shX7mDQ0yZ6hIDYCIuAi4qO/ocAewV8vzPfLXWt0O3BMRjwCPSLoEOAC4qT3YmpajrP3KvvX59PT0nLSTrM6LlFUtZY3llFO8na18/cwbmpkz1NoaMu97urVlS/puRLxY0s+YOxdpZiLYU+bPkLYDrifrBL4L+D5wZERc15LmOcDHya7+dwAuBV4fET9sizWyTuAyNXEpCJtfnbdz1R2fw150uBN4sDyUuhhcRLw4/3/nYh/fMcYWSccBF5I1N62NiOskHZv9Os6MiE2SvglcDWwBzmw/+fdr1apVw7zdzIbgmlBzFBkGejDwHxHxs/z5zsCvRcSlFeSvNR9eDK6Cz7PB1Hk7T+JV7yhip1CHYaCfBB5sef5Q/lptpZwIZrN8pWfWbEUKgDmX3hHxOAU7j0fFBUA1PLN2lofEWhMVKQBulvQOSQvzxzuBm1NnzMox6SembkuEl71MuGtD1kRFruTfAnwM+HOy0UDfBt6cMlODaB36dErLpemkTwSb9BPTOPQbNY2HHjfHvJ3AddFPJ/CaNWtqOw/AawFZ1bwWUDWxUxjZMFBJJ0TEhyV9nA73JImIdxTLlpmZ1VGvJqCZsfg/qCIjZZrkJp8qTXr/glnT9ZoJfE5EHCXpnRHxtxXnq1N+PA9gQkxPTzeuEK9zu7ebgKqJncIo5wH8hqRnAG+UtFjSktZHsSzZqNX1pNRLXZfx6MVDYq2JehUAnyIb8fMc4PK2R+OahSZVE09MZd/PwarlpsHm6NUE9CsRcYukT0bEWyvOV6f8uAmogs8blfZhvKvzs0iZw3hTNi3Vejv3O+dhxF/ETUCD5aHsJqDz8v/3K/bxZvU2qTPERWRnhgIPbTvgz8ZYr1FACyS9F9hP0rvbfxkRH02XLWuCMjs+fT8Hs+r1KgCOAA7P0wy8JPS4aeIIlVRS3QRl6dKlpcWqaoa4272tiXrdD+B64EOSro6Ir1eYp1prWgHQxBNTmfdzaD/Rl1mzaF9PaKZ8GYe+KpsMRRaDu0LSWklfB5D0a5L+KHG+hpKyrbdpI1TckpJORHR8TDrvc81RZDG49cA64M/y5zcAXwDWJsrT0Mq+Sm9tRjjrrLO2NlFM+kJzqaSqZflvVQ3fH7k5ihQAu0bEFyWdDBARv5C0JXG+hlL2Vbo7KMeDCwCzuYoUAA9Jeir5gnD5LSJ/mjRXA0h5ld4ae8OGDVsLgEmvAZTZv+DlvJutvT9k5umgTWJFpy4sXjxQeMsVuSfwC4CPA88DrgWeBvyviLg6ffbm5KPwRLCpqalk/QCrVq0aaqkCrwU0vzov591ETZv81E3V6xTVYVuMbDnoGRFxhaTlwLMBAddHxGPFslSdqq7SyxyiWIU6L1JmZqNVpAawEHgr8JL8pWng01UXAv3UAIa9Su9l2A7KqmoA3W552IRRKk0balt3Tbvq7cY1gMHSDlUDAD4JLAQ+kT8/Kn/tj4tlq3opr9KbcmJqwom+m6ZsY7OmK1IAHBgRB7Q8/46kq1JlqAw+gZiZza/IRLAtkvaZeSLpmUCth4G6AKhGqr6FSV20zXpr4qz2uitSAPwpcLGkaUkbgO8A70mbLWuCVPcacAFgnXgwQ/mKjAL6tqRnkY0CgmwU0M/TZsvMzFLrWgBI+kOyUULn5Cf8q/PXj5K0JSI+X1Umbfx5IphZ9XrdEexS4NCIeLDt9ScDl0TEb1SQv9bP9R3BaiZV3jwRrFxNG/qYUtO2xSjvCLaw/eQPEBEPkQ0LrS23IZuZza9XAfCk/Gp/Dkk7A09Il6XhpZoEZnOlGpXhJh/rxJXC8vVqAvoT4FDgLRFxa/7aUuDvgOmI+OuK8jiTn1qsBTSscWoCsmZoWrNHN54JPFjagWYCR8TfSHoQuETSTvnLDwKnRsQni2WpOl6x08ysPz2HgUbEp4BP5c0+RMTPKsmVmZklN+9icHXhJiAb1qQuMte0Zo9u3AQ0WNpBRwE1VtOWbLZq1PWioApSsYdvsDJZkhcAklZI2iTpBkkn9kh3oKTHJL122M9ctmzZsCGsAI/KaIaIbR/dXr/33tHmtRevBVS+eZeCkLQj2do/e0XEm2aWhYiI/1fgvQuAM8hGE90JXCbpKxGxqUO6U4FvDvAdtnH//feXEcbm0YSbf3uG8fio+77WREWWg14HXA78Zv78DuBLwLwFAHAQcGPLMNJzgcOATW3p3g6cBxxYIKZZYe0nes8wNptVpADYJyJeL+lIgIh4WN1uN7Wt3YHbWp7fTlYobCXpGcDhEfFSSXN+1w9f6ZnZfAJlN7YtlHb233FVpAB4VNKTyLdEfm+AMlcDPR1o7RsoWrjM0XqiX79+fbIrvUkdSTIOFi1aNOos2IiJ6G9UTdrsjFyRAmA18A1gT0n/FzgEWFUw/h3AXi3P98hfa/VC4Ny8VrErsFLSYxFxQXuw1pP6qK7sXQA0l/uGZrlDdXy1tobMKyLmfQBPBV4N/A6wa5H35O/bDrgJ2Jts/aCNwK/2SL8OeG2X30Uvp512WixfvjyWL18ewNafTzvttJ7v69fq1auHen/nsRfdH4sXD5ffiy++eLgAPQy5KbpKledh/3Y2WmX8+eY5jQycNpUy8pufOzuec4uMAvpd4DsR8dX8+SJJh0fElwsULlskHQdcSDbkdG1EXCfp2DxTZ7a/Zb6Y3Rx//PEcf/zxQPkTwcrsX+hW/Uw16SRljSXlLSHLyrP7hsZHE0adNU2hJqCI+KeZJxFxv6TVwLwFQJ7+G8zeTWzmtU93SfvGIjGr5pEks7r1/8eop0x24b+dWXdFCoBOk8WKvG9kDj/88FFnYaRSXvWmOtH7St2sekVO5D+Q9FGyZaAB3kY2L6C2ZpqCUmjCSJImXvVWkecmFiQedGApFVkK4u3Ao8AX8sfPyQqBieSRJM3VxBNpqvWLGnBNYBWYtwCIiIci4qSIeGH+ODmy20JaiXx3rVlNzHPTtLSyNYaHrpav1x3BTo+I4yX9Mx1G50TEa1Jnri0/MaqOxvb26dX5nuj2aUuhiv2tDksdj4KXg56rVx/AOfn/f1Ps48dXE9vUrbm8v1lVet0S8vL8/w2Snpb/fHdVGRuGO87MzObXsw9A0hpJ9wDXAzdIulvS+6vJ2uBS3vjDBYtVqQmjzqy5uhYAkt5Ntu7PgRGxJCIWAy8CDpH0rqoyWDcuAJqriXcE27hxY5K47lA16N0HcBTw8oi4Z+aFiLhZ0h+SLe1wWurM9aOqiUSpmpfWrPHQvNSa2DS4efPmJHGbuK/5GClfrwJgYevJf0ZE3C1pYcI8DaSqjrNUJxGvc2IzWi9mNmzYsHVfnvRRZz5GyterAHh0wN/ZhGjCFXXTa4ZmKfUqAA6Q9ECH1wU8MVF+SlH2geh1ajpbv3597b9/E2uGrXmenp72MFBLptcw0O2qzEiZyj4p+YDsLFX7tM1aunTpqLNgY6zWq3pa/TS5fbqJNcNVq1aVEqedO1QNXAAUUsVJz8Py0ktZM4RmrWDaxA5VHyPl67oWUN2Mci2gVmvWrHETUG6q5DuvNVnT9os6rHMzCl4LaK4iy0GbdfTEJ9Z6LECl6t78ZdaJC4A++UCftdtuu406C7Xh/cKayAVAn3ygz/IIFbNmcyew9cVzIsaDO1QNxrQTuImzMps4LK9pHZ/WbGUcI+4Enmssm4CaODKlibfoM6uSj5HyjWUBYNVoWi3LzOYamz4At01Xz9t1VhObHc3GpgDwfVRtlFwAWBO5CchsAvn6yGCMagCtmngl5mF5zdPkZkevBWQwpsNAzarWtCGxdRjiOAoeBjqXm4DMzCaUC4A+NXGOgaVX9yYfs05cAPTJBYB10oQCQNLWB6jtuU2isewENrNtuQ/N2rkAKKCK0R5NXAvI0vP8glk+RsrnUUB9SjXaow4jDqx+Vq1axfr160edjVoo4xjxKKC53AdgVmObN28edRZsjCVvApK0AjidrLBZGxEfavv9G4AT86c/A94aEdekztegXB231FqbHDds2LC1xtmECWbWLElrAJIWAGcArwSeCxwp6TltyW4GXhIRBwAfAD6TMk/D8gFoZuMiaR+ApIOB1RGxMn9+EhDttYCW9IuAayJizw6/q0UfQCp1aG+0+lm6dKmbgXLuAxgs7Sj7AHYHbmt5fnv+Wjd/DHw9aY5qqonrnHhORHqLFi0adRZqo4nHSN3VZhiopJcCxwAv7pamdfTNuLWHNnF4m4coptHaB3DVVVe5DyDXxGNkFFr3n/lU0QS0JiJW5M87NgFJ2h84H1gREf/ZJdZYNwE1UdMWQGsiDwMtl5uA5kpdA7gM2FfS3sBdwBHAkW2Z24vs5H9Ut5O/1UeTl0BOKVVtyO3/llLSAiAitkg6DriQ2WGg10k6Nvt1nAm8D1gCfELZoiSPRcRBKfNlg/Od1zpLVQAsXbq09JhmM5L3AUTEN4Bnt7326Zaf3wS8qczPdNu0Va3MK/XWWtZZZ521tRCY9FqWla82ncBlamIB0MR1Tpq2jcuW6kTtWlZnTTxG6m4s1wJqYudkHTqcbHBTU1NJhsU2cV9OxfMABks7yk7gyrhz0qpWxZIN3nctJdcAaqIOVxs2uGXLlrFx48ZRZ2OsuQYwWFqvBmpmZtsYmyagVq42WxU8Y9eabiwLgCbyOifN03qin56eblyzY9P4GCnfWBYATR0Gas3idfur5WOkfGNZAJhVofVEv3nzZtcArHHGpgDwMFAbpVRLNjSxNmvNMTYFgGdP2iilOkmvX7/eBYAl42GgZiVIdZL23AJLaWxqAK2aeMXkdU5shoeXduZjpHxjWQNo4kHS0m1hZh34GCnfWBYAZmY2v7FcC6iJ6rDuiNXPvvvuy0033TTqbNSC1wIaLK3XAjJrqJ122mnUWbAx5gLArMaWLVs26izYGBvLUUBN5HVObIZvCdmZj5HyuQ/ArMaaeG+LOnMfQNvvmnJSdQFgk0LqeKwC4GNgOC4A5nIfgFnNRMTWx8UXXzznuVmZXAMws4nhGsBcrgGYmU0oFwA14X4+s958jJTPTUA1UYfqptWPF0Cb5ZnAg6X1KKAGqMPOZvXj/WKWC4DB0roPwMzMtuECwMxsQrkAMDObUC4AasLrnJj15mOkfO4ENquBJUvgvvuKp1+8GO69N11+xpU7gefyaqBmNXDfff2dbHosF2RWmJuAzMwmlAsAM7MJlbwAkLRC0iZJN0g6sUuaj0m6UdJGSb4FkplZBZIWAJIWAGcArwSeCxwp6TltaVYC+0TEs4BjgU8N+7kzd1NKIVXsVavSxG3itmha3JSxmxY3ZWwfI+XHTV0DOAi4MSJujYjHgHOBw9rSHAacDRARlwK7SHr6MB+6fv36Yd7e06mnnpok7llnTSeJm3JbnHDCCY2Km+pvB7By5cokcVOdQFJui6OPPjpJ3FTHSMoCINW2aEoBsDtwW8vz2/PXeqW5o0OavmzevHmYt/e0adOmZLFTSLktbrjhhkbFTfm3e+SRR5LFTiHltrjzzjuTxW6aum8LdwKbmU2opBPBJB0MrImIFfnzk4CIiA+1pPkUcHFEfCF/vglYHhE/aYvlWWBmZgMY1USwy4B9Je0N3AUcARzZluYC4G3AF/IC4/72kz90/wJmZjaYpAVARGyRdBxwIVlz09qIuE7Ssdmv48yI+JqkV0m6CXgIOCZlnszMLNOYtYDMzKxcY9UJLGmtpJ9IurrkuHtI+o6k/5B0jaR3lBh7B0mXSroyj/9XZcXO4y+QdIWkC0qMuVnSVXmev19W3Dz2LpK+JOm6fHu8qISY++V5vSL//6dl/Q0lvTPfJ4beLzrtv5IWS7pQ0vWSvilpl5LifjjfxhslnS/pKWXEbfndeyQ9LmlJv3F75Hm1pNvzv+MVklYMELf9WH57/vpf5Pv0RknfkrRHSXGHynO3c4+kgyR9f+YYlPTCfuJuFRFj8wBeDCwDri457m7AsvznnYDrgeeUGH/H/P/tgO8Bh5QY+13A54ALSox5M7A40d9wPXBM/vP2wFNKjr8AuBPYs4RYzwWuBnbI/3YXAs8cIt42+y/wIeCE/OcTgVNLivsyYEH+86nAB8uIm7++B/AN4BZgSYnbYjXw7iH/Zh2PZWCnljRvBz5bUtyh8twh7ibgV4GLgVfkr68kG0jTd/yxqgFExHeBPhbVLRz3xxGxMf/5QeA6hpyr0Bb/4fzHHchOUKV8h/wq5lXAZ8uI1xqaBLXH/Cr0tyJiHUBE/CIiHij5Y14G/GdE3DZvyvn9KnBpRPw8IrYAlwCvHTRYl/33MOCs/OezgMPLiBsR34qIx/On3yM7aQ8dN3ca8Kf9xisYe6jBIN2O5fznGU8G7ikj7rB57hB3E/AMskE1i/Jki8jmT/VtrAqAKkhaSnZlcmmJMRdIuhII0dHyAAAG50lEQVT4MTAdET8sKfTMgVh2R08AF0m6TNKbSoz7K8A9ktbl1eUzJT2pxPgArwf+oaRY1wK/lTfT7EhW2O5ZUuwZvxT5qLiI+DHwSyXHB3gj8PUyAkl6DXBbRFxTRrwOjsubaT47SHNYq/ZjWdIHJP0IWAV8sKy4lJTntrgnAR/J8/th4ORBYroA6IOknYDzgHe2XTEMJSIej4jnk12FvUTS8mFjSno18JP86kEMeeXU5pCIeAHZCe9tkl5cUtztgRcAf5fHf5hsRy+FpIXAa4AvlREvIjaRNdFcBHwNuBLYUkbsXh9bZjBJfwY8FhGfLyHWk4D3kjV7bH152LgtPkHWxLaM7GLpo4MG6nQsR8SfR8RewDrg9JLilpLnDnHXAm/P8/su4O8HiesCoCBJ25P9Ac6JiK+k+Iy8ueOrwGAdOnMdArxG0s1kV7wvlXR2CXGJiLvy/+8G/olszacy3E529fiD/Pl5ZAVCWVYCl+f5LkVErIuIF0bEFHA/UPY6Fj9RvjaWpN2A/yorsKRVZIX4G0oKuQ+wFLhK0i1kFzSXSyql1hIRd0fe6A18BjhwkDgFjuXPM8Ax2CluGXnukt8XRcSX8884jwGPwXEsAMq+2p3x98API+JvywwqadeZamF+BfVyYOOwcSPivRGxV0Q8k2wC3nciYuiVqSTtmF+NIOnJwCvImkKGljd13CZpv/ylQ4GymsMgm4RYVvMPAJKelv+/F/C7ZCePoUIyd/+9gKxJAuB/A4NefMyJm49G+VPgNRHx8wFjzokbEddGxG4R8cyI+BWyAv35ETFoodWe591afvdaBt/vtjmWJe3b8vvDGewY7BS3jDx3OvfcONNSIOlQBr3wGLR3uo4PsoPvTuDnwI/IR5OUEPcQsqr9RrJq/hXAipJi/3oe70rgKuBPEmyX5ZQ0CoisnX5mO1wDnFRyXg8gm0G+EfhHYJeS4u4I3A3sXHJ+LyE7qK8EpoaMtc3+CywGvkU2quRCYFFJcW8Ebs33vSuAT5QRt+33NzP4KKBOeT6bbNTVRuDLwNMHiNvxWCa7wr4mf+18sr6XMuIOlececX+DrC/gSuDfyQravrezJ4KZmU2ocWwCMjOzAlwAmJlNKBcAZmYTygWAmdmEcgFgZjahXACYmU0oFwBWe5KWaHY557vy5XVnnhe+qZGkY1pnpeZLDj+rhPxtJ2lLnp9rJP2DpB16pJekE1ueL5C0YYjPn/O9zIryPABrFEnvBx6MiL7XVJH0L8BxEXFVyXnaDrg7Ipbkz88FvhsRZ3RJv32efnFJn5/ke9n4cw3AmmbOMh+SjlZ2Q50rJJ2Rv7adpLPzG3xcLek4Sa8jW0nx3DztQkn/Imn/PP19kj6Yr9r4r5J2zWPtK+l7eawPSCqyVPe/APvm778gXzX1GklvzH//QWDnPB/rZz6/5TudmH+njZL+PH9tnzzGZyVdK+mrkp7Q4XttL+mv8zQbJQ28qqWNPxcA1liSnku2/s5vRrZ66EJJR5BNk981Ig6IiP2BsyPii2TT5l8XES+IiMfawu1CdlONZWTr48+crD8OfDgiDiBbg71blVl5nhaSTdWfWQ756Ig4kGyxrvfk6z6dBDyQ52NVni7y968E9oqIFwHPBw6RdHCeZj/goxHxPOAR4PD8e22c+V7AEmBlRDwv/y4uAKwrFwDWZC8jW7XxB8rup/ASshUpbwL2k3S6pFfE7E1lei0U+HBEXJj/fDnZqpaQrbr4j/nPvRZ621nSFWTrs9xEdmczyE76G8nWa9k9z18vrwBW5LGuyNPPLI53U8zeK6I1jzD7ve4Ftii7l8LhZEtqm3VUuAPNrIYE/H1ErN7mF9L+ZMs/v03SayPiLfPEerTl5y3MHhtFO8keyK/AW/NwKNmtDQ+KiEfztvontuS9EwEfiPyuaC2x9iFbGK1THreKiF8ouz/sy4HfB94KvLLgd7AJ4xqANdm3gNdJeipsHS20Z95+vyAizgfez+w9BX4GdLv5ebcT8vclzdzm8cgeeen0/l2Ae/OT/3PJ14KP7PaRkXcet7//m8AfKbvDGJJ2n/l+PfK49XvlS3XvEhFfA95N1j9g1pFrANZYEXGtpFOAb0laQHYV/xbgcWCtJOU/n5C/ZR3wWUkPAy9i7tV9tyv9dwLn5KOPLgR+2i07HV77KvBmSdeSLef8vZbfrQWulnQZ8Ecz74+Ir0t6NvC9LPs8wOwNW7rlsfV7vQY4Px+GKrK7RZl15GGgZj1I2jEiHs5//gOyjtffH3G2zErhGoBZbwdKOp2sufReshuTmI0F1wDMzCaUO4HNzCaUCwAzswnlAsDMbEK5ADAzm1AuAMzMJpQLADOzCfX/ARGImHRM6J5KAAAAAElFTkSuQmCC"></div></div></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[9]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 1195.59px; left: 123.562px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true" style="bottom: 0px;"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 694px; margin-bottom: -15px; border-right-width: 15px; min-height: 1218px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors" style="visibility: hidden;"><div class="CodeMirror-cursor" style="left: 117.969px; top: 1190px; height: 17px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">#Color Maps</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-comment">################</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-keyword">if</span> (<span class="cm-variable">bool_generate_color_maps_show</span> == <span class="cm-number">1</span> <span class="cm-keyword">and</span> <span class="cm-variable">bool_generate_color_maps</span> == <span class="cm-number">1</span>):</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">path1</span> = (<span class="cm-variable">path_color_maps_folder</span><span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">desired_user_id1</span>)<span class="cm-operator">+</span><span class="cm-string">"/"</span><span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">desired_slice1</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">path2</span> = (<span class="cm-variable">path_color_maps_folder</span><span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">desired_user_id2</span>)<span class="cm-operator">+</span><span class="cm-string">"/"</span><span class="cm-operator">+</span><span class="cm-builtin">str</span>(<span class="cm-variable">desired_slice2</span>))</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">path_color_map1</span> = (<span class="cm-variable">path1</span><span class="cm-operator">+</span><span class="cm-string">"/Original Image.png"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_color_map1</span> = <span class="cm-variable">matplotlib</span>.<span class="cm-property">image</span>.<span class="cm-property">imread</span>(<span class="cm-variable">path_color_map1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">title</span>(<span class="cm-string">"Original Image"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">imshow</span>(<span class="cm-variable">img_color_map1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">show</span>()</span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">path_color_map1</span> = (<span class="cm-variable">path1</span><span class="cm-operator">+</span><span class="cm-string">"/WML Image.png"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_color_map1</span> = <span class="cm-variable">matplotlib</span>.<span class="cm-property">image</span>.<span class="cm-property">imread</span>(<span class="cm-variable">path_color_map1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">title</span>(<span class="cm-string">"WML Image"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">imshow</span>(<span class="cm-variable">img_color_map1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">show</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">path_color_map1</span> = (<span class="cm-variable">path1</span><span class="cm-operator">+</span><span class="cm-string">"/Prediction without post-processing.png"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_color_map1</span> = <span class="cm-variable">matplotlib</span>.<span class="cm-property">image</span>.<span class="cm-property">imread</span>(<span class="cm-variable">path_color_map1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">title</span>(<span class="cm-string">"Prediction without post-processing Image"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">imshow</span>(<span class="cm-variable">img_color_map1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">show</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">path_color_map1</span> = (<span class="cm-variable">path1</span><span class="cm-operator">+</span><span class="cm-string">"/Prediction with post-processing.png"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_color_map1</span> = <span class="cm-variable">matplotlib</span>.<span class="cm-property">image</span>.<span class="cm-property">imread</span>(<span class="cm-variable">path_color_map1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">title</span>(<span class="cm-string">"Prediction with post-processing Image"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">imshow</span>(<span class="cm-variable">img_color_map1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">show</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">path_color_map1</span> = (<span class="cm-variable">path1</span><span class="cm-operator">+</span><span class="cm-string">"/Color Probability.png"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_color_map1</span> = <span class="cm-variable">matplotlib</span>.<span class="cm-property">image</span>.<span class="cm-property">imread</span>(<span class="cm-variable">path_color_map1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">imshow</span>(<span class="cm-variable">img_color_map1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">title</span>(<span class="cm-string">"Color Probability Image"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">show</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">path_color_map2</span> = (<span class="cm-variable">path2</span><span class="cm-operator">+</span><span class="cm-string">"/Original Image.png"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_color_map2</span> = <span class="cm-variable">matplotlib</span>.<span class="cm-property">image</span>.<span class="cm-property">imread</span>(<span class="cm-variable">path_color_map2</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">title</span>(<span class="cm-string">"Original Image"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">imshow</span>(<span class="cm-variable">img_color_map2</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">show</span>()</span></pre><pre class=" CodeMirror-line "><span class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">path_color_map2</span> = (<span class="cm-variable">path2</span><span class="cm-operator">+</span><span class="cm-string">"/WML Image.png"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_color_map2</span> = <span class="cm-variable">matplotlib</span>.<span class="cm-property">image</span>.<span class="cm-property">imread</span>(<span class="cm-variable">path_color_map2</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">title</span>(<span class="cm-string">"WML Image"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">imshow</span>(<span class="cm-variable">img_color_map2</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">show</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">path_color_map2</span> = (<span class="cm-variable">path2</span><span class="cm-operator">+</span><span class="cm-string">"/Prediction without post-processing.png"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_color_map2</span> = <span class="cm-variable">matplotlib</span>.<span class="cm-property">image</span>.<span class="cm-property">imread</span>(<span class="cm-variable">path_color_map2</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">title</span>(<span class="cm-string">"Prediction without post-processing Image"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">imshow</span>(<span class="cm-variable">img_color_map2</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">show</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">path_color_map2</span> = (<span class="cm-variable">path2</span><span class="cm-operator">+</span><span class="cm-string">"/Prediction with post-processing.png"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_color_map2</span> = <span class="cm-variable">matplotlib</span>.<span class="cm-property">image</span>.<span class="cm-property">imread</span>(<span class="cm-variable">path_color_map1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">title</span>(<span class="cm-string">"Prediction with post-processing Image"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">imshow</span>(<span class="cm-variable">img_color_map1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">show</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">path_color_map2</span> = (<span class="cm-variable">path1</span><span class="cm-operator">+</span><span class="cm-string">"/Color Probability.png"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">img_color_map2</span> = <span class="cm-variable">matplotlib</span>.<span class="cm-property">image</span>.<span class="cm-property">imread</span>(<span class="cm-variable">path_color_map2</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">imshow</span>(<span class="cm-variable">img_color_map1</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">title</span>(<span class="cm-string">"Color Probability Image"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-variable">plt</span>.<span class="cm-property">show</span>()</span></pre></div></div></div></div></div><div style="position: absolute; height: 15px; width: 1px; border-bottom: 0px solid transparent; top: 1218px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1233px;"></div></div></div></div></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to expand output; double click to hide output" style=""></div><div class="output" style=""><div class="output_area"><div class="prompt"></div><div class="output_subarea output_text output_stream output_stdout"><pre>---------------------------------------------------------
End of the program
-------------
Execution time: 1174.870 seconds
-------------
-------------
Execution time: 1174.870 seconds
-------------
------------------------------
-------------



</pre></div></div></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell code_cell rendered unselected" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[&nbsp;]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 90.5938px; left: 115.141px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 677.156px; margin-bottom: -15px; border-right-width: 15px; min-height: 113px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 109.547px; top: 85px; height: 17px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">write_double_fim</span>()</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">write_line</span>(<span class="cm-string">"End of the program"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">deltaTime</span> = (<span class="cm-variable">timeit</span>.<span class="cm-property">default_timer</span>() <span class="cm-operator">-</span> <span class="cm-variable">startTime</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">write_line_fim</span>(<span class="cm-string">"Execution time: "</span> <span class="cm-operator">+</span> <span class="cm-builtin">str</span>(<span class="cm-builtin">format</span>(<span class="cm-variable">deltaTime</span>, <span class="cm-string">"5.3f"</span>)) <span class="cm-operator">+</span> <span class="cm-string">" seconds"</span>)</span></pre><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span class="cm-variable">close_files</span>()</span></pre></div></div></div></div></div><div style="position: absolute; height: 15px; width: 1px; border-bottom: 0px solid transparent; top: 113px;"></div><div class="CodeMirror-gutters" style="display: none; height: 128px;"></div></div></div></div></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to expand output; double click to hide output" style="display: none;"></div><div class="output" style="display: none;"></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div><div class="cell code_cell unselected rendered" tabindex="2"><div class="input"><div class="prompt input_prompt"><bdi>In</bdi>&nbsp;[&nbsp;]:</div><div class="inner_cell"><div class="ctb_hideshow"><div class="celltoolbar"></div></div><div class="input_area"><div class="CodeMirror cm-s-ipython"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 5.59375px; left: 5.59375px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-vscrollbar" cm-not-content="true"><div style="min-width: 1px; height: 0px;"></div></div><div class="CodeMirror-hscrollbar" cm-not-content="true"><div style="height: 100%; min-height: 1px; width: 0px;"></div></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; min-width: 3px; margin-bottom: -15px; border-right-width: 15px; min-height: 28px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines"><div style="position: relative; outline: none;"><div class="CodeMirror-measure"></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-cursors"><div class="CodeMirror-cursor" style="left: 0px; top: 0px; height: 17px;">&nbsp;</div></div><div class="CodeMirror-code"><pre class=" CodeMirror-line "><span style="padding-right: 0.1px;"><span cm-text="">​</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 15px; width: 1px; border-bottom: 0px solid transparent; top: 28px;"></div><div class="CodeMirror-gutters" style="display: none; height: 43px;"></div></div></div></div></div></div><div class="output_wrapper"><div class="out_prompt_overlay prompt" title="click to expand output; double click to hide output" style="display: none;"></div><div class="output" style="display: none;"></div><div class="btn btn-default output_collapsed" title="click to expand output" style="display: none;">. . .</div></div></div></div><div class="end_space"></div></div>
        <div id="tooltip" class="ipython_tooltip" style="display:none"><div class="tooltipbuttons"><a href="http://localhost:8888/notebooks/Dicom.ipynb#" role="button" class="ui-button"><span class="ui-icon ui-icon-close">Close</span></a><a href="http://localhost:8888/notebooks/Dicom.ipynb#" class="ui-corner-all" role="button" id="expanbutton" title="Grow the tooltip vertically (press shift-tab twice)"><span class="ui-icon ui-icon-plus">Expand</span></a><a href="http://localhost:8888/notebooks/Dicom.ipynb#" role="button" class="ui-button" title="show the current docstring in pager (press shift-tab 4 times)"><span class="ui-icon ui-icon-arrowstop-l-n">Open in Pager</span></a><a href="http://localhost:8888/notebooks/Dicom.ipynb#" role="button" class="ui-button" title="Tooltip will linger for 10 seconds while you type" style="display: none;"><span class="ui-icon ui-icon-clock">Close</span></a></div><div class="pretooltiparrow"></div><div class="tooltiptext smalltooltip"></div></div>
    </div>
</div>



</div>



<div id="pager" class="ui-resizable">
    <div id="pager-contents">
        <div id="pager-container" class="container"></div>
    </div>
    <div id="pager-button-area"><a role="button" title="Open the pager in an external window" class="ui-button"><span class="ui-icon ui-icon-extlink"></span></a><a role="button" title="Close the pager" class="ui-button"><span class="ui-icon ui-icon-close"></span></a></div>
<div class="ui-resizable-handle ui-resizable-n" style="z-index: 90;"></div></div>






<script type="text/javascript">
    sys_info = {"os_name": "posix", "platform": "Linux-4.2.0-42-generic-x86_64-with-Ubuntu-14.04-trusty", "default_encoding": "UTF-8", "notebook_path": "/usr/local/lib/python2.7/dist-packages/notebook", "sys_platform": "linux2", "sys_version": "2.7.6 (default, Jun 22 2015, 17:58:13) \n[GCC 4.8.2]", "notebook_version": "5.0.0", "commit_source": "", "commit_hash": "", "sys_executable": "/usr/bin/python"};
</script>

<script src="./Dicom_files/encoding.js" charset="utf-8"></script>

<script src="./Dicom_files/main.min.js" type="text/javascript" charset="utf-8"></script>



<script type="text/javascript">
  function _remove_token_from_url() {
    if (window.location.search.length <= 1) {
      return;
    }
    var search_parameters = window.location.search.slice(1).split('&');
    for (var i = 0; i < search_parameters.length; i++) {
      if (search_parameters[i].split('=')[0] === 'token') {
        // remote token from search parameters
        search_parameters.splice(i, 1);
        var new_search = '';
        if (search_parameters.length) {
          new_search = '?' + search_parameters.join('&');
        }
        var new_url = window.location.origin + 
                      window.location.pathname + 
                      new_search + 
                      window.location.hash;
        window.history.replaceState({}, "", new_url);
        return;
      }
    }
  }
  _remove_token_from_url();
</script>


<div style="position: absolute; width: 0px; height: 0px; overflow: hidden; padding: 0px; border: 0px; margin: 0px;"><div id="MathJax_Font_Test" style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; padding: 0px; border: 0px; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal;"></div></div></body></html>